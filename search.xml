<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>TypeScript ä¹‹å‡½æ•°</title>
      <link href="/2019/10/22/typescript-han-shu/"/>
      <url>/2019/10/22/typescript-han-shu/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>å‡½æ•°æ˜¯ <code>JavaScript</code> åº”ç”¨ç¨‹åºçš„åŸºç¡€ï¼Œå®ƒå¸®åŠ©ä½ å®ç°æŠ½è±¡å±‚ã€æ¨¡æ‹Ÿç±»ã€ä¿¡æ¯éšè—å’Œæ¨¡å—ã€‚åœ¨ <code>TypeScript</code> é‡Œï¼Œè™½ç„¶å·²ç»æ”¯æŒç±»ã€å‘½åç©ºé—´å’Œæ¨¡å—ï¼Œä½†å‡½æ•°ä»»ç„¶æ˜¯ä¸»è¦çš„å®šä¹‰è¡Œä¸ºçš„åœ°æ–¹ã€‚ <code>TypeScript</code> ä¸º <code>JavaScript</code> å‡½æ•°æ·»åŠ äº†é¢å¤–çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“çš„ä½¿ç”¨ã€‚</p><hr><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><p>å’Œ <code>JavaScript</code> ä¸€æ ·ï¼Œ <code>TypeScript</code> å‡½æ•°å¯ä»¥åˆ›å»ºæœ‰åå­—çš„å‡½æ•°å’ŒåŒ¿åå‡½æ•°ã€‚ ä½ å¯ä»¥éšæ„é€‰æ‹©é€‚åˆåº”ç”¨ç¨‹åºçš„æ–¹å¼ï¼Œä¸è®ºæ˜¯å®šä¹‰ä¸€ç³»åˆ— <code>API</code> å‡½æ•°è¿˜æ˜¯åªä½¿ç”¨ä¸€æ¬¡çš„å‡½æ•°ã€‚</p><p>é€šè¿‡ä¸‹é¢çš„ä¾‹å­å¯ä»¥è¿…é€Ÿå›æƒ³èµ·è¿™ä¸¤ç§ <code>JavaScript</code> ä¸­çš„å‡½æ•°ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// Named function</span>funnction <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// Anonymous function</span><span class="token keyword">const</span> myAdd <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>åœ¨ <code>JavaScript</code> é‡Œï¼Œå‡½æ•°å¯ä»¥ä½¿ç”¨å‡½æ•°ä½“å¤–éƒ¨çš„å˜é‡ã€‚å½“å‡½æ•°è¿™ä¹ˆåšæ—¶ï¼Œæˆ‘ä»¬è¯´å®ƒ <code>æ•è·</code> äº†è¿™äº›å˜é‡ã€‚è‡³äºä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·åšä»¥åŠå…¶ä¸­çš„åˆ©å¼Šè¶…å‡ºäº†æœ¬æ–‡èŒƒå›´ï¼Œä½†æ˜¯æ·±åˆ»ç†è§£è¿™ä¸ªæœºåˆ¶å¯¹å­¦ä¹  <code>JavaScript</code> å’Œ <code>TypeScript</code> ä¼šéå¸¸æœ‰å¸®åŠ©ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">addToZ</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><hr><h3 id="å‡½æ•°ç±»å‹"><a href="#å‡½æ•°ç±»å‹" class="headerlink" title="å‡½æ•°ç±»å‹"></a>å‡½æ•°ç±»å‹</h3><p>è®©æˆ‘ä»¬ä¸ºä¸Šé¢é‚£ä¸ªå‡½æ•°æ·»åŠ ç±»å‹ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> myAdd <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå‚æ•°æ·»åŠ ç±»å‹ä¹‹åå†ä¸ºå‡½æ•°æœ¬èº«æ·»åŠ è¿”å›å€¼ç±»å‹ã€‚ <code>TypeScript</code> èƒ½å¤Ÿæ ¹æ®è¿”å›è¯­å¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸çœç•¥å®ƒã€‚</p><hr><h3 id="ä¹¦å†™å®Œæ•´å‡½æ•°ç±»å‹"><a href="#ä¹¦å†™å®Œæ•´å‡½æ•°ç±»å‹" class="headerlink" title="ä¹¦å†™å®Œæ•´å‡½æ•°ç±»å‹"></a>ä¹¦å†™å®Œæ•´å‡½æ•°ç±»å‹</h3><p>ç°åœ¨æˆ‘ä»¬å·²ç»ä¸ºå‡½æ•°æŒ‡å®šäº†ç±»å‹ï¼Œä¸‹é¢ ğŸ‘‡ è®©æˆ‘ä»¬å†™å‡ºå‡½æ•°çš„å®Œæ•´ç±»å‹ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> myAdd<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>  x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span>  y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>å‡½æ•°ç±»å‹åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p><ul><li>1ã€å‚æ•°ç±»å‹</li><li>2ã€è¿”å›å€¼ç±»å‹<br>å½“å†™å‡ºå®Œæ•´å‡½æ•°ç±»å‹çš„æ—¶å€™ï¼Œè¿™ä¸¤éƒ¨åˆ†æ˜¯éœ€è¦çš„ã€‚æˆ‘ä»¬ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å†™å‡ºå‚æ•°ç±»å‹ï¼Œä¸ºæ¯ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªåå­—å’Œç±»å‹ã€‚è¿™ä¸ªåå­—åªæ˜¯ä¸ºäº†å¢åŠ å¯è¯»æ€§ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š</li></ul><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> myAdd<span class="token punctuation">:</span> <span class="token punctuation">(</span>baseValue<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> increment<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>åªè¦å‚æ•°ç±»å‹æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ƒæ˜¯æœ‰æ•ˆçš„å‡½æ•°ç±»å‹ï¼Œè€Œä¸åœ¨ä¹å‚æ•°åæ˜¯å¦æ­£ç¡®ã€‚<br>ç¬¬äºŒéƒ¨åˆ†æ˜¯è¿”å›å€¼ç±»å‹ã€‚å¯¹äºè¿”å›å€¼ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å’Œè¿”å›å€¼ç±»å‹ä¹‹å‰ä½¿ç”¨ <code>=&gt;</code> ç¬¦å·ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚å¦‚ä¹‹å‰æåˆ°çš„ï¼Œè¿”å›å€¼ç±»å‹æ˜¯å‡½æ•°ç±»å‹çš„å¿…è¦éƒ¨åˆ†ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰ä»»ä½•è¿”å›å€¼ï¼Œä½ ä¹Ÿå¿…é¡»æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸º <code>void</code> è€Œä¸èƒ½ç•™ç©ºã€‚<br>å‡½æ•°çš„ç±»å‹åªæ˜¯ç”±ç±»å‹å’Œè¿”å›å€¼ç»„æˆçš„ã€‚å‡½æ•°ä¸­ä½¿ç”¨çš„æ•è·å˜é‡ä¸ä¼šä½“ç°åœ¨ç±»å‹é‡Œã€‚å®é™…ä¸Šï¼Œè¿™äº›å˜é‡æ˜¯å‡½æ•°çš„éšè—çŠ¶æ€ï¼Œå¹¶ä¸æ˜¯ç»„æˆ <code>API</code> çš„ä¸€éƒ¨åˆ†ã€‚</p><hr><h3 id="æ¨æ–­ç±»å‹"><a href="#æ¨æ–­ç±»å‹" class="headerlink" title="æ¨æ–­ç±»å‹"></a>æ¨æ–­ç±»å‹</h3><p>å°è¯•è¿™ä¸ªä¾‹å­çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°å¦‚æœä½ åœ¨èµ‹å€¼è¯­å¥çš„ä¸€è¾¹æŒ‡å®šäº†ç±»å‹ä½†æ˜¯å¦ä¸€è¾¹æ²¡æœ‰ç±»å‹çš„è¯ï¼Œ<code>TypeScript</code> ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¯†åˆ«å‡ºç±»å‹ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// myAdd has the full function type</span><span class="token keyword">let</span> myAdd<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// The parameters `x` and `y` have the type number</span><span class="token keyword">let</span> myAdd<span class="token punctuation">:</span> <span class="token punctuation">(</span>baseValue<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">,</span> increment<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™å«åšâ€æŒ‰ä¸Šä¸‹æ–‡å½’ç±»â€ï¼Œæ˜¯ç±»å‹æ¨æ–­çš„ä¸€ç§ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ä¸ºç¨‹åºæŒ‡å®šç±»å‹ã€‚</p><hr><h3 id="å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°"><a href="#å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°"></a>å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°</h3><p><code>TypeScript</code> é‡Œçš„æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½æ˜¯å¿…é¡»çš„ã€‚è¿™ä¸æ˜¯æŒ‡ä¸èƒ½ä¼ é€’ <code>null</code> æˆ– <code>undefined</code> ä½œä¸ºå‚æ•°ï¼Œè€Œæ˜¯è¯´ç¼–è¯‘å™¨æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºæ¯ä¸ªå‚æ•°éƒ½ä¼ å…¥äº†å€¼ã€‚ç¼–è¯‘å™¨è¿˜ä¼šå‡è®¾åªæœ‰è¿™äº›å‚æ•°ä¼šè¢«ä¼ é€’è¿›å‡½æ•°ã€‚é—´çŸ­åœ°è¯´ï¼Œä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°åœ°å‚æ•°ä¸ªæ•°å¿…é¡»ä¸å‡½æ•°æœŸæœ›çš„å‚æ•°ä¸ªæ•°ä¸€è‡´ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>fristName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">''</span> <span class="token operator">+</span> lastName<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> result1 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// error, too few parameters</span><span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Admas'</span><span class="token punctuation">,</span> <span class="token string">'Sr.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// error, too many parameters</span><span class="token keyword">let</span> result3 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Admas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// right</span></code></pre><p><code>Javascript</code> é‡Œï¼Œæ¯ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä¼ å¯ä¸ä¼ ã€‚æ²¡ä¼ å‚çš„æ—¶å€™ï¼Œå®ƒçš„å€¼å°±æ˜¯ <code>undefined</code>ã€‚åœ¨ <code>TypeScript</code> é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°åæ—ä½¿ç”¨ <code>?</code> å®ç°å¯é€‰å‚æ•°çš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è®© <code>lastName</code> æ˜¯å¯é€‰çš„ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> lastName<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>lastName<span class="token punctuation">)</span> <span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> lastName<span class="token punctuation">;</span>  <span class="token keyword">else</span> <span class="token keyword">return</span> firstName<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> result1 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// works correctly now</span><span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Admas'</span><span class="token punctuation">,</span> <span class="token string">'Sr.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Expected 1-2 arguments, but got 3.</span><span class="token keyword">let</span> result3 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Admas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// right</span></code></pre><p>å¯é€‰å‚æ•°å¿…é¡»è·Ÿåœ¨å¿…é¡»å‚æ•°åé¢ã€‚å¦‚æœä¸Šä¾‹æˆ‘ä»¬æƒ³è®© <code>firstName</code> æ˜¯å¯é€‰çš„ï¼Œé‚£ä¹ˆå°±å¿…é¡»è°ƒæ•´å®ƒä»¬çš„ä½ç½®ï¼ŒæŠŠ <code>firstName</code> æ”¾åœ¨åé¢ã€‚</p><p>åœ¨ <code>TypeScript</code> é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºå‚æ•°æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå½“ç”¨æˆ·æ²¡æœ‰ä¼ é€’è¿™ä¸ªå‚æ•°æˆ–ä¼ é€’çš„å€¼æ˜¯ <code>undefined</code> æ—¶ï¼Œå®ƒä»¬å«åšæœ‰é»˜è®¤åˆå§‹åŒ–å€¼çš„å‚æ•°ã€‚è®©æˆ‘ä»¬ä¿®æ”¹ä¸Šä¾‹ï¼ŒæŠŠ <code>lastName</code> çš„é»˜è®¤å€¼è®¾ç½®ä¸º <code>Smith</code> ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> lastName <span class="token operator">=</span> <span class="token string">'Smith'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> lastName<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> result1 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Bob Smith</span><span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> undefined<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Bob Smith</span><span class="token keyword">let</span> result3 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Admas'</span><span class="token punctuation">,</span> <span class="token string">'Sr.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Expected 1-2 arguments, but got 3.</span><span class="token keyword">let</span> result4 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Admas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//  Bob Admas</span></code></pre><p>åœ¨æ‰€æœ‰å¿…é¡»å‚æ•°åé¢çš„å¸¦åˆå§‹é»˜è®¤è¯çš„å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œä¸å¯é€‰å‚æ•°ä¸€æ ·ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™å¯ä»¥çœç•¥ã€‚ä¹Ÿå°±æ˜¯è¯´å¯é€‰å‚æ•°ä¸æœ«å°¾çš„é»˜è®¤å‚æ•°å…±äº«å‚æ•°ç±»å‹ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> lastName<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// ...</span><span class="token punctuation">}</span></code></pre><p>å’Œ</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> lastName <span class="token operator">=</span> <span class="token string">'Smith'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// ...</span><span class="token punctuation">}</span></code></pre><p>å…±äº«åŒæ ·çš„ç±»å‹(<code>firstName: string, lastName?: string</code>) =&gt; <code>string</code>ã€‚é»˜è®¤å‚æ•°çš„é»˜è®¤å€¼æ¶ˆå¤±äº†ï¼Œåªä¿ç•™äº†å®ƒæ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°çš„ä¿¡æ¯ã€‚</p><p>ä¸æ™®é€šå¯é€‰å‚æ•°ä¸åŒçš„æ˜¯ï¼Œå¸¦é»˜è®¤å€¼çš„å‚æ•°ä¸éœ€è¦æ”¾åœ¨å¿…é¡»å‚æ•°çš„åé¢ã€‚å¦‚æœå¸¦é»˜è®¤å€¼çš„å‚æ•°å‡ºç°åœ¨å¿…é¡»å‚æ•°å‰é¢ï¼Œç”¨æˆ·å¿…é¡»æ˜ç¡®çš„ä¼ å…¥ <code>undefined</code> å€¼æ¥è·å¾—é»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬é‡å†™æœ€åä¸€ä¸ªä¾‹å­ï¼Œè®© <code>undefined</code> æ˜¯å¸¦é»˜è®¤å€¼çš„å‚æ•°ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName <span class="token operator">=</span> <span class="token string">'Will'</span><span class="token punctuation">,</span> lastName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> lastName<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> result1 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// error, too few parameters</span><span class="token keyword">let</span> result2 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Admas'</span><span class="token punctuation">,</span> <span class="token string">'Sr.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// error, too many parameters</span><span class="token keyword">let</span> result3 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Admas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// okay and returns "Bob Admas"</span><span class="token keyword">let</span> result4 <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span>undefined<span class="token punctuation">,</span> <span class="token string">'Admas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// okay and returns "Will Admas"</span></code></pre><hr><h3 id="å‰©ä½™å‚æ•°"><a href="#å‰©ä½™å‚æ•°" class="headerlink" title="å‰©ä½™å‚æ•°"></a>å‰©ä½™å‚æ•°</h3><p>å¿…é¡»å‚æ•°ã€é»˜è®¤å‚æ•°å’Œå¯é€‰å‚æ•°æœ‰ä¸ªå…±åŒç‚¹ï¼šå®ƒä»¬è¡¨ç¤ºæŸä¸€ä¸ªå‚æ•°ã€‚æœ‰æ—¶ï¼Œä½ æƒ³åŒæ—¶æ“ä½œå¤šä¸ªå‚æ•°ï¼Œæˆ–è€…ä½ å¹¶ä¸çŸ¥é“ä¼šæœ‰å¤šå°‘å‚æ•°ä¼ é€’è¿›æ¥ï¼Œåœ¨ <code>JavaScript</code> é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>arguments</code> æ¥ è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ã€‚</p><p>åœ¨ <code>TypeScript</code> é‡Œï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå˜é‡é‡Œï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>restOfName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> restOfName<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> employeeName <span class="token operator">=</span> <span class="token function">buildName</span><span class="token punctuation">(</span><span class="token string">'Joseph'</span><span class="token punctuation">,</span> <span class="token string">'Samuel'</span><span class="token punctuation">,</span> <span class="token string">'Lucas'</span><span class="token punctuation">,</span> <span class="token string">'MacKinzie'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Joseph Samuel Lucas MacKinzie</span></code></pre><p>å‰©ä½™å‚æ•°ä¼šè¢«å½“ä½œä¸ªæ•°ä¸é™çš„å¯é€‰å‚æ•°ã€‚å¯ä»¥ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥æœ‰ä»»æ„ä¸ªã€‚ç¼–è¯‘å™¨åˆ›å»ºå‚æ•°æ•°ç»„ï¼Œåå­—æ˜¯ä½ åœ¨çœç•¥å· (<code>...</code>) åé¢ç»™å®šçš„åå­—ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨è¿™ä¸ªæ•°ç»„ã€‚</p><p>è¿™ä¸ªçœç•¥å·ä¹Ÿä¼šåœ¨å¸¦æœ‰å‰©ä½™å‚æ•°çš„å‡½æ•°ç±»å‹å®šä¹‰ä¸Šä½¿ç”¨åˆ°ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">buildName</span><span class="token punctuation">(</span>firstName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>restOfName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> restOfName<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> buildNameFun<span class="token punctuation">:</span> <span class="token punctuation">(</span>fname<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">string</span> <span class="token operator">=</span> buildName<span class="token punctuation">;</span></code></pre><hr><h3 id="This"><a href="#This" class="headerlink" title="This"></a><code>This</code></h3><p>å­¦ä¹ å¦‚ä½•åœ¨ <code>JavaScript</code> é‡Œæ­£ç¡®çš„ä½¿ç”¨ <code>this</code> å°±å¥½æ¯”ä¸€åœºæˆäººç¤¼ã€‚ç”±äº <code>TypeScript</code> æ˜¯ <code>JavaScript</code> çš„è¶…é›†ï¼Œ <code>TypeScript</code> ç¨‹åºå‘˜ä¹Ÿéœ€è¦å¼„æ¸… <code>this</code> å·¥ä½œæœºåˆ¶å¹¶ä¸”æœ‰ <code>bug</code> çš„æ—¶å€™èƒ½å¤Ÿæ‰¾å‡ºé”™è¯¯æ‰€åœ¨ã€‚å¹¸è¿çš„æ˜¯ï¼Œ <code>TypeScript</code> èƒ½é€šçŸ¥ä½ é”™è¯¯åœ°ä½¿ç”¨äº† <code>this</code> çš„åœ°æ–¹ã€‚å¦‚æœä½ æƒ³äº†è§£ <code>JavaScript</code> é‡Œçš„ <code>this</code> æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œé‚£ä¹ˆé¦–å…ˆé˜…è¯» <code>Yehuda Katz</code> å†™çš„<a href="http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/" target="_blank" rel="noopener">Understanding JavaScript Function Invocation and â€œthisâ€</a>ã€‚ <code>Yehuda Katz</code> çš„æ–‡ç« è¯¦ç»†çš„é˜è¿°äº† <code>this</code> çš„å†…éƒ¨å·¥ä½œåŸç†ï¼Œå› æ­¤æˆ‘ä»¬è¿™é‡Œåªåšç®€å•ä»‹ç»ã€‚</p><hr><h3 id="this-å’Œ-ç®­å¤´å‡½æ•°"><a href="#this-å’Œ-ç®­å¤´å‡½æ•°" class="headerlink" title="this å’Œ ç®­å¤´å‡½æ•°"></a><code>this</code> å’Œ ç®­å¤´å‡½æ•°</h3><p><code>JavaScript</code> é‡Œï¼Œ <code>this</code> çš„å€¼åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šæŒ‡å®šã€‚è¿™æ˜¯ä¸ªæ—¢å¼ºå¤§åˆçµæ´»çš„ç‰¹ç‚¹ï¼Œä½†æ˜¯ä½ éœ€è¦èŠ±ç‚¹æ—¶é—´å¼„æ¸…æ¥šå‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡æ˜¯ä»€ä¹ˆã€‚ä½†ä¼—æ‰€å‘¨çŸ¥ï¼Œè¿™ä¸æ˜¯ä¸€ä»¶å¾ˆç®€å•çš„äº‹ï¼Œå°¤å…¶æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°æˆ–å°†å‡½æ•°å½“ä½œå‚æ•°ä¼ é€’çš„æ—¶å€™ã€‚</p><p>ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> deck <span class="token operator">=</span> <span class="token punctuation">{</span>  suits<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hearts'</span><span class="token punctuation">,</span> <span class="token string">'spades'</span><span class="token punctuation">,</span> <span class="token string">'clubs'</span><span class="token punctuation">,</span> <span class="token string">'diamonds'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  cards<span class="token punctuation">:</span> <span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  createCardPicker<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> pickerCard <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">let</span> pickerSuit <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>pickerCard <span class="token operator">/</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        suit<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>suits<span class="token punctuation">[</span>pickerSuit<span class="token punctuation">]</span><span class="token punctuation">,</span>        card<span class="token punctuation">:</span> pickerCard <span class="token operator">%</span> <span class="token number">13</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> cardPicker <span class="token operator">=</span> deck<span class="token punctuation">.</span><span class="token function">createCardPicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> pickerCard <span class="token operator">=</span> <span class="token function">cardPicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'card: '</span> <span class="token operator">+</span> pickedCard<span class="token punctuation">.</span>card <span class="token operator">+</span> <span class="token string">' of '</span> <span class="token operator">+</span> pickedCard<span class="token punctuation">.</span>suit<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å¯ä»¥çœ‹åˆ° <code>createCardPicker</code> æ˜¯ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å®ƒåˆè¿”å›äº†ä¸€ä¸ªå‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬å°è¯•è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œä¼šå‘ç°å®ƒå¹¶æ²¡æœ‰å¼¹å‡ºå¯¹è¯æ¡†è€Œæ˜¯æŠ¥é”™äº†ã€‚å› ä¸º <code>createCardPicker</code> è¿”å›çš„å‡½æ•°é‡Œçš„ <code>this</code> è¢«è®¾ç½®æˆäº† <code>window</code> è€Œä¸æ˜¯ <code>deck</code> å¯¹è±¡ã€‚å› ä¸ºæˆ‘ä»¬åªæ˜¯ç‹¬ç«‹çš„è°ƒç”¨äº† <code>cardPicker</code> ã€‚é¡¶çº§çš„éæ–¹æ³•å¼è°ƒç”¨ä¼šå°† <code>this</code> è§†ä¸º <code>window</code> ã€‚(æ³¨æ„ âš ï¸ï¼šåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ <code>this</code> ä¸º <code>undefined</code> è€Œä¸æ˜¯ <code>window</code> ã€‚)</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°è¢«è¿”å›æ—¶å°±ç»‘å¥½æ­£ç¡®çš„ <code>this</code> ã€‚è¿™æ ·çš„è¯ï¼Œæ— è®ºä¹‹åæ€ä¹ˆä½¿ç”¨å®ƒï¼Œéƒ½ä¼šå¼•ç”¨ç»‘å®šçš„ <code>deck</code> å¯¹è±¡ã€‚æˆ‘ä»¬éœ€è¦æ”¹å˜å‡½æ•°è¡¨è¾¾å¼æ¥ä½¿ç”¨ <code>ECMAScript 6</code> ç®­å¤´è¯­æ³•ã€‚ç®­å¤´å‡½æ•°èƒ½ä¿å­˜å‡½æ•°åˆ›å»ºæ—¶çš„ <code>this</code> å€¼ï¼Œè€Œä¸æ˜¯è°ƒç”¨æ—¶çš„å€¼ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> deck <span class="token operator">=</span> <span class="token punctuation">{</span>  suits<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hearts'</span><span class="token punctuation">,</span> <span class="token string">'spades'</span><span class="token punctuation">,</span> <span class="token string">'clubs'</span><span class="token punctuation">,</span> <span class="token string">'diamonds'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  cards<span class="token punctuation">:</span> <span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  createCardPicker<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> pickerCard <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">let</span> pickerSuit <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>pickerCard <span class="token operator">/</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        suit<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>suits<span class="token punctuation">[</span>pickerSuit<span class="token punctuation">]</span><span class="token punctuation">,</span>        card<span class="token punctuation">:</span> pickerCard <span class="token operator">%</span> <span class="token number">13</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> cardPicker <span class="token operator">=</span> deck<span class="token punctuation">.</span><span class="token function">createCardPicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> pickedCard <span class="token operator">=</span> <span class="token function">cardPicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'card: '</span> <span class="token operator">+</span> pickedCard<span class="token punctuation">.</span>card <span class="token operator">+</span> <span class="token string">' of '</span> <span class="token operator">+</span> pickedCard<span class="token punctuation">.</span>suit<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æ›´å¥½äº‹æƒ…æ˜¯ï¼Œ <code>TypeScript</code> ä¼šè­¦å‘Šä½ çŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼Œå¦‚æœä½ ç»™ç¼–è¯‘å™¨è®¾ç½®äº† <code>--nolmplicitThis</code> æ ‡è®°ã€‚å®ƒä¼šæŒ‡å‡º <code>this.suits[pickedSuit]</code> é‡Œçš„ <code>this</code> çš„ç±»å‹ä¸º <code>ay</code> ã€‚</p><hr><h3 id="this-å‚æ•°"><a href="#this-å‚æ•°" class="headerlink" title="this å‚æ•°"></a><code>this</code> å‚æ•°</h3><p>ä¸å¹¸çš„æ˜¯ï¼Œ<code>this.suits[pickedSuit]</code> çš„ç±»å‹ä¾æ—§ä¸º <code>any</code>ã€‚è¿™æ˜¯å› ä¸º <code>this</code> æ¥è‡ªå¯¹è±¡å­—é¢é‡é‡Œçš„å‡½æ•°è¡¨è¾¾å¼ã€‚ä¿®æ”¹çš„æ–¹æ³•æ˜¯ï¼Œæä¾›ä¸€ä¸ªæ˜¾å¼çš„ <code>this</code> å‚æ•°ã€‚ <code>this</code> å‚æ•°æ˜¯ä¸ªå‡çš„å‚æ•°ï¼Œå®ƒå‡ºç°åœ¨å‚æ•°åˆ—è¡¨çš„æœ€å‰é¢ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// make sure `this` is unusable in this standalone function</span><span class="token punctuation">}</span></code></pre><p>è®©æˆ‘ä»¬å¾€ä¾‹å­é‡Œæ·»åŠ ä¸€äº›æ¥å£ï¼Œ<code>Card</code> å’Œ <code>Deck</code>ï¼Œè®©ç±»å‹é‡ç”¨èƒ½å¤Ÿå˜å¾—æ¸…æ™°ç®€å•äº›ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">Card</span> <span class="token punctuation">{</span>  suit<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  card<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Deck</span> <span class="token punctuation">{</span>  suits<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  cards<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token function">createCardPicker</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">:</span> Deck<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> Card<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> deck<span class="token punctuation">:</span> Deck <span class="token operator">=</span> <span class="token punctuation">{</span>  suits<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hearts'</span><span class="token punctuation">,</span> <span class="token string">'spades'</span><span class="token punctuation">,</span> <span class="token string">'clubs'</span><span class="token punctuation">,</span> <span class="token string">'diamonds'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  cards<span class="token punctuation">:</span> <span class="token keyword">Array</span><span class="token punctuation">(</span><span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// æ³¨æ„:è¯¥å‡½æ•°ç°åœ¨æ˜¾å¼åœ°æŒ‡å®šå®ƒçš„è¢«è°ƒç”¨æ–¹å¿…é¡»æ˜¯Deckç±»å‹</span>  createCardPicker<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">:</span> Deck<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> pickerCard <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">let</span> pickerSuit <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>pickerCard <span class="token operator">/</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        suit<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>suits<span class="token punctuation">[</span>pickerSuit<span class="token punctuation">]</span><span class="token punctuation">,</span>        card<span class="token punctuation">:</span> pickerCard <span class="token operator">%</span> <span class="token number">13</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> cardPicker <span class="token operator">=</span> deck<span class="token punctuation">.</span><span class="token function">createCardPicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> pickerCard <span class="token operator">=</span> <span class="token function">cardPicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'card: '</span> <span class="token operator">+</span> pickedCard<span class="token punctuation">.</span>card <span class="token operator">+</span> <span class="token string">' of '</span> <span class="token operator">+</span> pickedCard<span class="token punctuation">.</span>suit<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç°åœ¨ <code>TypeScript</code> çŸ¥é“ <code>createCardPicker</code> æœŸæœ›åœ¨æŸä¸ª <code>Deck</code> å¯¹è±¡ä¸Šè°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ <code>this</code> æ˜¯ <code>Deck</code> ç±»å‹çš„ï¼Œè€Œé <code>any</code> ç±»å‹ï¼Œå› æ­¤ <code>--noImplicitThis</code> ä¸ä¼šæŠ¥é”™äº†ã€‚</p><hr><h3 id="this-å‚æ•°åœ¨å›è°ƒå‡½æ•°é‡Œ"><a href="#this-å‚æ•°åœ¨å›è°ƒå‡½æ•°é‡Œ" class="headerlink" title="this å‚æ•°åœ¨å›è°ƒå‡½æ•°é‡Œ"></a><em><code>this</code></em> å‚æ•°åœ¨å›è°ƒå‡½æ•°é‡Œ</h3><p>ä½ ä¹Ÿå¯ä»¥çœ‹åˆ°è¿‡åœ¨å›è°ƒå‡½æ•°é‡Œçš„ <code>this</code> æŠ¥é”™ï¼šå½“ä½ å°†ä¸€ä¸ªå‡½æ•°ä¼ é€’åˆ°æŸä¸ªåº“å‡½æ•°é‡Œç¨åä¼šè¢«è°ƒç”¨æ—¶ã€‚å› ä¸ºå½“å›è°ƒå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒä»¬ä¼šè¢«å½“æˆä¸€ä¸ªæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œ <code>this</code> å°†ä¸º <code>undefined</code> ã€‚ç¨ä½œæ”¹åŠ¨ï¼Œä½ å°±å¯ä»¥é€šè¿‡ <code>this</code> å‚æ•°æ¥é¿å…é”™è¯¯ã€‚é¦–å…ˆï¼Œåº“å‡½æ•°çš„ä½œè€…è¦æŒ‡å®š <code>this</code> çš„ç±»å‹ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">interface</span> <span class="token class-name">UIElement</span> <span class="token punctuation">{</span>  <span class="token function">addClickListener</span><span class="token punctuation">(</span>onclick<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">,</span> e<span class="token punctuation">:</span> Event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><code>this: void</code> è¡¨ç¤º <code>addClickListener</code> æœŸæœ› <code>onclick</code> æ˜¯ä¸éœ€è¦æ­¤<code>this</code> ç±»å‹çš„å‡½æ•°ã€‚å…¶æ¬¡ï¼Œç”¨ <code>this</code> æ³¨é‡Šæ‚¨çš„è°ƒç”¨ä»£ç ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>  info<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// oops, used this here. using this callback would crash at runtime</span>  <span class="token function">onClickBad</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">:</span> Handler<span class="token punctuation">,</span> e<span class="token punctuation">:</span> Event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> e<span class="token punctuation">.</span>message<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>uiElement<span class="token punctuation">.</span><span class="token function">addClickListener</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>onClickBad<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// error!</span></code></pre><p>æŒ‡å®šäº† <code>this</code> ç±»å‹åï¼Œä½ æ˜¾å¼å£°æ˜ <code>onClickBad</code> å¿…é¡»åœ¨ <code>Handler</code> çš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚ç„¶å <code>TypeScript</code> ä¼šæ£€æµ‹ <code>addClickListener</code> è¦æ±‚å‡½æ•°å¸¦æœ‰ <code>this: void</code> ã€‚æ”¹å˜ <code>this</code> ç±»å‹æ¥ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼š</p><p>æŒ‡å®šäº† this ç±»å‹åï¼Œä½ æ˜¾å¼å£°æ˜ onClickBad å¿…é¡»åœ¨ Handler çš„å®ä¾‹ä¸Šè°ƒç”¨ã€‚ ç„¶å TypeScript ä¼šæ£€æµ‹åˆ° addClickListener è¦æ±‚å‡½æ•°å¸¦æœ‰ this: voidã€‚ æ”¹å˜ this ç±»å‹æ¥ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>  info<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// oops, used this here. using this callback would crash at runtime</span>  <span class="token function">onClickGood</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">,</span> e<span class="token punctuation">:</span> Event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'clicked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>uiElement<span class="token punctuation">.</span><span class="token function">addClickListener</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>onClickGood<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>å› ä¸º <code>onClickGood</code> æŒ‡å®šäº† <code>this</code> ç±»å‹ä¸º <code>void</code>ï¼Œå› æ­¤ä¼ é€’ <code>addClickListener</code> æ˜¯åˆæ³•çš„ã€‚ å½“ç„¶äº†ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä¸èƒ½ä½¿ç”¨ <code>this.info</code>ã€‚ å¦‚æœä½ ä¸¤è€…éƒ½æƒ³è¦ï¼Œä½ ä¸å¾—ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°äº†ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>  info<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  onClickGood <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">:</span> Event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> e<span class="token punctuation">.</span>message<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™æ˜¯å¯è¡Œçš„å› ä¸ºç®­å¤´å‡½æ•°ä¸ä¼šæ•è· <code>this</code> ï¼Œæ‰€ä»¥ä½ æ€»æ˜¯å¯ä»¥æŠŠå®ƒä»¬ä¼ ç»™æœŸæœ› <code>this: void</code> çš„å‡½æ•°ã€‚ ç¼ºç‚¹æ˜¯æ¯ä¸ª <code>Handler</code> å¯¹è±¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªç®­å¤´å‡½æ•°ã€‚ å¦ä¸€æ–¹é¢ï¼Œæ–¹æ³•åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œæ·»åŠ åˆ° <code>Handler</code> çš„åŸå‹é“¾ä¸Šã€‚ å®ƒä»¬åœ¨ä¸åŒ <code>Handler</code> å¯¹è±¡é—´æ˜¯å…±äº«çš„ã€‚</p><hr><h3 id="é‡è½½"><a href="#é‡è½½" class="headerlink" title="é‡è½½"></a>é‡è½½</h3><p><code>JavaScript</code> æœ¬èº«æ˜¯ä¸ªåŠ¨æ€è¯­è¨€ï¼Œ<code>JavaScript</code> é‡Œå‡½æ•°æ ¹æ®ä¼ å…¥ä¸åŒçš„å‚æ•°è€Œè¿”å›ä¸åŒç±»å‹çš„æ•°æ®æ˜¯å¾ˆå¸¸è§çš„ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> suits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'hearts'</span><span class="token punctuation">,</span> <span class="token string">'spades'</span><span class="token punctuation">,</span> <span class="token string">'clubs'</span><span class="token punctuation">,</span> <span class="token string">'diamonds'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">pickCard</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// Check to see if we're working with an object/array</span>  <span class="token comment" spellcheck="true">// if so, they gave us the deck and we'll pick the card</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> pickedCard <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> x<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> pickedCard<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// Otherwise just let them pick the card</span>  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> pickedSuit <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>x <span class="token operator">/</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      suit<span class="token punctuation">:</span> suits<span class="token punctuation">[</span>pickedSuit<span class="token punctuation">]</span><span class="token punctuation">,</span>      card<span class="token punctuation">:</span> x <span class="token operator">%</span> <span class="token number">13</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> myDeck <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span> suit<span class="token punctuation">:</span> <span class="token string">'diamonds'</span><span class="token punctuation">,</span> card<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span> suit<span class="token punctuation">:</span> <span class="token string">'spades'</span><span class="token punctuation">,</span> card<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span> suit<span class="token punctuation">:</span> <span class="token string">'hearts'</span><span class="token punctuation">,</span> card<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">let</span> pickedCard1 <span class="token operator">=</span> myDeck<span class="token punctuation">[</span><span class="token function">pickedCard</span><span class="token punctuation">(</span>myDeck<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'card'</span> <span class="token operator">+</span> pickedCard1<span class="token punctuation">.</span>card <span class="token operator">+</span> <span class="token string">'of'</span> <span class="token operator">+</span> pickedCard1<span class="token punctuation">.</span>suit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> pickedCard2 <span class="token operator">=</span> <span class="token function">pickedCard</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'card'</span> <span class="token operator">+</span> pickedCard2<span class="token punctuation">.</span>card <span class="token operator">+</span> <span class="token string">'of'</span> <span class="token operator">+</span> pickedCard2<span class="token punctuation">.</span>suit<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code>pickCard</code> æ–¹æ³•æ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒä¼šè¿”å›ä¸¤ç§ä¸åŒçš„ç±»å‹ã€‚å¦‚æœä¼ å…¥çš„æ˜¯ä»£è¡¨çº¸ç‰Œçš„å¯¹è±¡ï¼Œå‡½æ•°ä½œç”¨æ˜¯ä»ä¸­æŠ“ä¸€å¼ ç‰Œã€‚å¦‚æœç”¨æˆ·æƒ³æŠ“ç‰Œï¼Œæˆ‘ä»¬å‘Šè¯‰ä»–æŠ“åˆ°äº†ä»€ä¹ˆç‰Œã€‚ä½†æ˜¯è¿™æ€ä¹ˆåœ¨ç±»å‹ç³»ç»Ÿé‡Œè¡¨ç¤ºå‘¢ã€‚</p><p>æ–¹æ³•æ˜¯ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®è¿™ä¸ªåˆ—è¡¨å»å¤„ç†å‡½æ•°çš„è°ƒç”¨ã€‚<br>ä¸‹é¢æˆ‘ä»¬æ¥é‡è½½ <code>pickCard</code> å‡½æ•°ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> suits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'hearts'</span><span class="token punctuation">,</span> <span class="token string">'spades'</span><span class="token punctuation">,</span> <span class="token string">'clubs'</span><span class="token punctuation">,</span> <span class="token string">'diamonds'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">pickCard</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token punctuation">{</span>suit<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span> card<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">pickCard</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>  suit<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  card<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">pickCard</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// Check to see if we're working with an object/array</span>  <span class="token comment" spellcheck="true">// if so, they gave us the deck and we'll pick up the card</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">=</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> pickedCard<span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> x<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> pickerCard<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// Otherwise just let them pick up the card</span>  <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">==</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> pickefSuit <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>x <span class="token operator">/</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      suit<span class="token punctuation">:</span> suits<span class="token punctuation">[</span><span class="token string">'pickerSuit'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>      card<span class="token punctuation">:</span> x <span class="token operator">%</span> <span class="token number">13</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> myDeck <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span> suit<span class="token punctuation">:</span> <span class="token string">'diamonds'</span><span class="token punctuation">,</span> card<span class="token punctuation">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span> suit<span class="token punctuation">:</span> <span class="token string">'spades'</span><span class="token punctuation">,</span> card<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span> suit<span class="token punctuation">:</span> <span class="token string">'hearts'</span><span class="token punctuation">,</span> card<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">let</span> pickedCard1 <span class="token operator">=</span> myDeck<span class="token punctuation">[</span><span class="token function">pickCard</span><span class="token punctuation">(</span>myDeck<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">let</span> pickedCard2 <span class="token operator">=</span> <span class="token function">pickCard</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'card'</span> <span class="token operator">+</span> pickedCard2<span class="token punctuation">.</span>card <span class="token operator">+</span> <span class="token string">'of'</span> <span class="token operator">+</span> pickedCard2<span class="token punctuation">.</span>suit<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¿™æ ·æ”¹å˜åï¼Œé‡è½½çš„ <code>pickCard</code> å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ä¼šè¿›è¡Œæ­£ç¡®çš„ç±»å‹æ£€æµ‹ã€‚</p><p>ä¸ºäº†è®©ç¼–è¯‘å™¨èƒ½å¤Ÿé€‰æ‹©æ­£ç¡®çš„æ£€æŸ¥ç±»å‹ï¼Œå®ƒä¸ <code>JavaScript</code> é‡Œçš„å¤„ç†æµç¨‹ç›¸ä¼¼ã€‚å®ƒæŸ¥æ‰¾é‡è½½åˆ—è¡¨ï¼Œå°è¯•ä½¿ç”¨ç¬¬ä¸€ä¸ªé‡è½½å®šä¹‰ã€‚å¦‚æœåŒ¹é…çš„è¯å°±ä½¿ç”¨è¿™ä¸ªã€‚å› æ­¤ï¼Œåœ¨å®šä¹‰é‡è½½çš„æ—¶å€™ï¼Œä¸€å®šè¦æŠŠæœ€ç²¾ç¡®çš„å®šä¹‰æ”¾åœ¨æœ€å‰é¢ã€‚</p><p>æ³¨æ„ï¼Œ<code>function pickCard(x): any</code> å¹¶ä¸æ˜¯é‡è½½åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¿™é‡Œåªè¦ä¸¤ä¸ªé‡è½½ï¼šä¸€ä¸ªæ¥æ”¶å¯¹è±¡ï¼Œå¦ä¸€ä¸ªæ¥æ”¶æ•°å­—ï¼Œä»¥å…¶å®ƒå‚æ•°è°ƒç”¨ <code>pickCard</code> ä¼šäº§ç”Ÿé”™è¯¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
            <tag> å‡½æ•° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript ä¹‹ç±»</title>
      <link href="/2019/10/09/typescript-lei/"/>
      <url>/2019/10/09/typescript-lei/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>ä¼ ç»Ÿçš„ <code>JavaScript</code> ç¨‹åºä½¿ç”¨å‡½æ•°å’ŒåŸºäºåŸå‹çš„ç»§æ‰¿æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä½†å¯¹äºç†Ÿæ‚‰ä½¿ç”¨é¢å‘å¯¹è±¡æ–¹å¼çš„ç¨‹åºå‘˜æ¥è®²å°±æœ‰äº›æ£˜æ‰‹ï¼Œå› ä¸ºä»–ä»¬ç”¨çš„æ˜¯åŸºäºç±»çš„ç»§æ‰¿å¹¶ä¸”å¯¹è±¡æ˜¯ç”±ç±»æ„å»ºå‡ºæ¥çš„ã€‚ ä» <code>ECMAScript 2015</code>ï¼Œä¹Ÿå°±æ˜¯ <code>ECMAScript 6</code> å¼€å§‹ï¼Œ<code>JavaScript</code> ç¨‹åºå‘˜å°†èƒ½å¤Ÿä½¿ç”¨åŸºäºç±»çš„é¢å‘å¯¹è±¡çš„æ–¹å¼ã€‚ ä½¿ç”¨ <code>TypeScript</code>ï¼Œæˆ‘ä»¬å…è®¸å¼€å‘è€…ç°åœ¨å°±ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¹¶ä¸”ç¼–è¯‘åçš„ <code>JavaScript</code> å¯ä»¥åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨å’Œå¹³å°ä¸Šè¿è¡Œï¼Œè€Œä¸éœ€è¦ç­‰åˆ°ä¸‹ä¸ª <code>JavaScript</code> ç‰ˆæœ¬ã€‚</p><hr><h3 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h3><p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªä½¿ç”¨ <code>ç±»</code> çš„ä¾‹å­ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>  greeting<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>greeting <span class="token operator">=</span> message<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">'Hello,'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>greeting<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> greeter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token string">'World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// {greeting: 'World'}</span>greeter<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Hello,World</span></code></pre><p>å¦‚æœä½ ä½¿ç”¨è¿‡ <code>C#</code> æˆ– <code>Java</code>ï¼Œä½ ä¼šå¯¹è¿™ç§è¯­æ³•éå¸¸ç†Ÿæ‚‰ã€‚æˆ‘ä»¬å£°æ˜ä¸€ä¸ª <code>Greeter</code> ç±»ï¼Œè¿™ä¸ªç±»æœ‰ä¸‰ä¸ªæˆå‘˜ï¼š</p><ul><li>ä¸€ä¸ª <code>greeting</code> çš„å±æ€§</li><li>ä¸€ä¸ªæ„é€ å‡½æ•°</li><li>ä¸€ä¸ª <code>greet</code> æ–¹æ³•</li></ul><p>ä½ ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬åœ¨å¼•ç”¨ä»»ä½•ä¸€ä¸ªç±»çš„æˆå‘˜çš„æ—¶å€™ï¼Œéƒ½ç”¨äº† <code>this</code> ï¼Œå®ƒè¡¨ç¤ºæˆ‘ä»¬è®¿é—®çš„æ˜¯ç±»çš„æˆå‘˜ã€‚<br>æœ€åä¸€è¡Œï¼Œæˆ‘ä»¬ç”¨ <code>new</code> æ„é€ äº† <code>Greeter</code> ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚å®ƒä¼šè°ƒç”¨ä¹‹å‰å®šä¹‰çš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ª <code>Greeter</code> ç±»å‹çš„æ–°å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°åˆå§‹åŒ–å®ƒã€‚</p><hr><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>åœ¨ <code>TypeScript</code> é‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¸ç”¨çš„é¢å‘å¯¹è±¡æ¨¡å¼ã€‚åŸºäºç±»çš„ç¨‹åºè®¾è®¡ä¸­ä¸€ç§æœ€åŸºæœ¬çš„æ¨¡å¼æ˜¯ï¼šå…è®¸ä½¿ç”¨ç»§æ‰¿ç±»æ‹“å±•ç°æœ‰çš„ç±»ã€‚<br>çœ‹ä¸‹é¢ ğŸ‘‡ çš„ä¾‹å­ ğŸŒ°ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Animal moved </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distanceInMeters<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">m.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Woof! Woof!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Woof! Woof!</span>dog<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Animal moved 10m.</span>dog<span class="token punctuation">.</span><span class="token function">bark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Woof! Woof!</span></code></pre><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†æœ€åŸºæœ¬çš„ç»§æ‰¿ï¼šç±»ä»åŸºç±»ä¸­ç»§æ‰¿äº†å±æ€§å’Œæ–¹æ³•ã€‚è¿™é‡Œï¼Œ <code>Dog</code> æ˜¯ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œå®ƒæ´¾ç”Ÿè‡ª <code>Animal</code> åŸºç±»ï¼Œé€šè¿‡ <code>extends</code> å…³é”®å­—ã€‚æ´¾ç”Ÿç±»é€šå¸¸è¢«ç§°ä½œå­ç±»ï¼ŒåŸºç±»é€šå¸¸è¢«ç§°ä½œ è¶…ç±»ã€‚</p><ul><li><strong>åŸºç±»</strong>ï¼šåœ¨é¢å‘å¯¹è±¡è®¾è®¡ä¸­ï¼Œè¢«å®šä¹‰ä¸ºåŒ…å«æ‰€æœ‰å®ä½“å…±æ€§çš„ <code>class</code> ç±»å‹ã€‚å·²å­˜åœ¨çš„ç”¨æ¥æ´¾ç”Ÿæ–°ç±»çš„ç±»ç§°ä¸ºåŸºç±»ï¼Œåˆç§°çˆ¶ç±»ã€‚</li><li><strong>æ´¾ç”Ÿç±»</strong>ï¼šä»å·²å®šä¹‰ç±»äº§ç”Ÿæ–°ç±»çš„è¿‡ç¨‹ç§°ä¸ºæ´¾ç”Ÿï¼Œç”±å·²å­˜åœ¨çš„ç±»æ´¾ç”Ÿå‡ºæ¥çš„æ–°ç±»ç§°ä¸ºæ´¾ç”Ÿç±»ï¼Œåˆç§°å­ç±»ã€‚</li></ul><p>å› ä¸º <code>Dog</code> ç»§æ‰¿äº† <code>Animal</code> çš„åŠŸèƒ½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>Dog</code> çš„å®ä¾‹ï¼Œæ‹¥æœ‰ <code>bark()</code> å’Œ <code>move()</code> æ–¹æ³•ã€‚<br>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸ªæ›´åŠ å¤æ‚çš„ä¾‹å­ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> moved </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distanceInMeters<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">m.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Snake</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Slithering'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Horse</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters <span class="token operator">=</span> <span class="token number">45</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Galloping'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> sam <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Snake</span><span class="token punctuation">(</span><span class="token string">'Sammy the Python'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> tom<span class="token punctuation">:</span> Animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Horse</span><span class="token punctuation">(</span><span class="token string">'Tommy the Palomino'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>sam<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Slithering  Sammy the Python moved 5m.</span>tom<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Galloping  Tommy the Palomino moved 34m.</span></code></pre><p>è¿™ä¸ªä¾‹å­å±•ç¤ºäº†ä¸€äº›ä¸Šé¢æ²¡æœ‰æåˆ°çš„ç‰¹æ€§ã€‚è¿™ä¸€æ¬¡æˆ‘ä»¬ä½¿ç”¨ <code>extends</code> å…³é”®å­—åˆ›å»ºäº† <code>Animal</code> çš„ä¸¤ä¸ªå­ç±»ï¼š <code>Snake</code> å’Œ <code>Horse</code> ã€‚</p><p>ä¸å‰ä¸€ä¸ªä¾‹å­çš„ä¸åŒç‚¹æ˜¯ï¼Œæ´¾ç”Ÿç±»åŒ…å«äº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒå¿…é¡»è°ƒç”¨ <code>super</code>ï¼Œå®ƒä¼šæ‰§è¡ŒåŸºç±»çš„æ„é€ å‡½æ•°ã€‚è€Œä¸”ï¼Œåœ¨æ„é€ å‡½æ•°é‡Œè®¿é—® <code>this</code> ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€å®šè¦è°ƒç”¨ <code>super</code>ï¼Œè¿™ä¸ªæ˜¯ <code>TypeScript</code> å¼ºåˆ¶æ‰§è¡Œçš„ä¸€æ¡é‡è¦è§„åˆ™ã€‚</p><p>è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•è®©åœ¨å­ç±»é‡Œé‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚ <code>Snake</code> å’Œ <code>Horse</code> ç±»éƒ½åˆ›å»ºäº† <code>move</code> æ–¹æ³•ï¼Œå®ƒä»¬é‡å†™äº†ä» <code>Animal</code> ç»§æ‰¿æ¥çš„ <code>move</code> æ–¹æ³•ï¼Œä½¿å¾— <code>move</code> æ–¹æ³•æ ¹æ®ä¸åŒçš„ç±»è€Œå…·æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚æ³¨æ„ï¼Œå³ä½¿ <code>tom</code> è¢«å£°æ˜ä¸º <code>Animal</code> ç±»å‹ï¼Œä½†å› ä¸ºå®ƒæ˜¯ <code>Horse</code> ï¼Œè°ƒç”¨ <code>tom.move(34)</code> æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ <code>Horse</code> é‡å†™çš„æ–¹æ³•ã€‚</p><hr><h3 id="å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦"><a href="#å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦" class="headerlink" title="å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦"></a>å…¬å…±ï¼Œç§æœ‰ä¸å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦</h3><h4 id="å…¬å…±-public"><a href="#å…¬å…±-public" class="headerlink" title="å…¬å…± public"></a><code>å…¬å…± public</code></h4><p>åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±çš„è®¿é—®ç¨‹åºé‡Œå®šä¹‰çš„æˆå‘˜ã€‚å¦‚æœä½ å¯¹å…¶è¯­è¨€ä¸­çš„ç±»æ¯”è¾ƒäº†è§£ï¼Œå°±ä¼šæ³¨æ„åˆ°æˆ‘ä»¬åœ¨ä¹‹å‰çš„ä»£ç é‡Œå¹¶æ²¡æœ‰ä½¿ç”¨ <code>public</code> æ¥åšä¿®é¥°ç¬¦ï¼Œåœ¨ <code>TypeScript</code> é‡Œï¼Œæˆå‘˜éƒ½é»˜è®¤ä¸º <code>public</code> ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥æ˜ç¡®çš„å°†ä¸€ä¸ªæˆå‘˜æ ‡è®°æˆ <code>public</code> ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼æ¥é‡å†™ä¸Šé¢çš„ <code>Animal</code> ç±»ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token keyword">public</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> <span class="token function">move</span><span class="token punctuation">(</span>distanceInMeters<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> moved </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>distanceInMeters<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">m.`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h4 id="ç§æœ‰-private"><a href="#ç§æœ‰-private" class="headerlink" title="ç§æœ‰ private"></a><code>ç§æœ‰ private</code></h4><p>å½“æˆå‘˜è¢«æ ‡è®°ä¸º <code>private</code> æ—¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®ã€‚æ¯”å¦‚ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// errorï¼š Property 'name' is private and only accessible within class 'Animal'</span></code></pre><p><code>TypeScript</code> ä½¿ç”¨çš„æ˜¯ç»“æ„æ€§ç±»å‹ç³»ç»Ÿã€‚å½“æˆ‘ä»¬æ¯”è¾ƒä¸¤ç§ä¸åŒçš„ç±»å‹æ—¶ï¼Œå¹¶ä¸åœ¨ä¹å®ƒä»¬ä»ä½•å¤„è€Œæ¥ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜çš„ç±»å‹éƒ½æ˜¯å…¼å®¹çš„ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºå®ƒä»¬çš„ç±»å‹æ˜¯å…¼å®¹çš„ã€‚</p><p>ç„¶è€Œï¼Œå½“æˆ‘ä»¬æ¯”è¾ƒå¸¦æœ‰ <code>private</code> æˆ– <code>protected</code> æˆå‘˜ç±»å‹çš„æ—¶å€™ï¼Œæƒ…å†µå°±ä¸åŒäº†ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹é‡ŒåŒ…å« <code>private</code> æˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»å‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ª <code>private</code> æˆå‘˜ï¼Œå¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºä¸¤ä¸ªç±»å‹æ˜¯å…¼å®¹çš„ã€‚å¯¹äº <code>protected</code> æˆå‘˜ä¹Ÿä½¿ç”¨è¿™ä¸ªè§„åˆ™ã€‚</p><p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œæ›´å¥½çš„è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Rhino</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">'Rhino'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token function">consoructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'Goat'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> rhino <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rhino</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>animal <span class="token operator">=</span> rhino<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// okay</span>animal <span class="token operator">=</span> employee<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é”™è¯¯ï¼šAnimal ä¸ Employee ä¸å…¼å®¹.</span></code></pre><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ‰ <code>Animal</code> ã€ <code>Rhino</code> å’Œ <code>Empolyee</code> ä¸‰ä¸ªç±»ï¼Œ <code>Rhino</code> æ˜¯ <code>Animal</code> çš„å­ç±»ï¼Œ <code>Empolyee</code> ç±»çœ‹ä¸Šå»ä¸ <code>Animal</code> æ˜¯ç›¸åŒçš„ã€‚æˆ‘ä»¬åˆ›å»ºäº†å‡ ä¸ªè¿™äº›ç±»çš„å®ä¾‹ï¼Œå¹¶ç›¸äº’èµ‹å€¼æ‹‰çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å› ä¸º <code>Animal</code> å’Œ <code>Rhino</code> å…±äº«äº†æ¥è‡ª <code>Animal</code> é‡Œçš„ç§æœ‰æˆå‘˜å®šä¹‰ <code>private name: string</code>ï¼Œå› æ­¤å®ƒä»¬æ˜¯å…¼å®¹çš„ã€‚ç„¶è€Œ <code>Emloyee</code> å´ ä¸æ˜¯è¿™æ ·ã€‚å½“æŠŠ <code>Employee</code> èµ‹å€¼ç»™ <code>Animal</code> çš„æ—¶å€™ï¼Œå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œè¯´å®ƒä»¬çš„ç±»å‹ä¸å…¼å®¹ã€‚å°½ç®¡ <code>Employee</code> é‡Œä¹Ÿæœ‰ä¸€ä¸ªç§æœ‰æˆå‘˜ <code>name</code> ï¼Œä½†å®ƒæ˜æ˜¾ä¸æ˜¯ <code>Animal</code> é‡Œé¢å®šä¹‰çš„é‚£ä¸ªã€‚</p><h4 id="å—ä¿æŠ¤çš„-protected"><a href="#å—ä¿æŠ¤çš„-protected" class="headerlink" title="å—ä¿æŠ¤çš„ protected"></a><code>å—ä¿æŠ¤çš„ protected</code></h4><p><code>protected</code> ä¿®é¥°ç¬¦ä¸ <code>private</code> ä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒï¼Œ <code>protected</code> æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®ã€‚ä¾‹å¦‚ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>  <span class="token keyword">protected</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Empolyee</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> department<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> department<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>theName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>department <span class="token operator">=</span> department<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> <span class="token function">getElevatorPitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> and I work in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>department<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> howard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Empolyee</span><span class="token punctuation">(</span><span class="token string">'Howard'</span><span class="token punctuation">,</span> <span class="token string">'Sales'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>howard<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// {name: 'Howard', department: 'Sales'}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>howard<span class="token punctuation">.</span><span class="token function">getElevatorPitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//  Hello, my name is Howard and I work in Sales.</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>howard<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é”™è¯¯ï¼šå±æ€§ 'name' å—ä¿æŠ¤ï¼Œå¹¶ä¸”åªèƒ½åœ¨ç±» 'Person' åŠå…¶å­ç±»ä¸­è®¿é—®</span></code></pre><p>æ³¨æ„ âš ï¸ï¼Œæˆ‘ä»¬ä¸èƒ½å† <code>Person</code> ç±»å¤–ä½¿ç”¨ <code>name</code>ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡ <code>Empolyee</code> ç±»çš„å®ä¾‹æ–¹æ³•è®¿é—®ï¼Œå› ä¸º <code>Employee</code> æ˜¯ç”± <code>Person</code> æ´¾ç”Ÿè€Œæ¥çš„ã€‚</p><p>æ„é€ å‡½æ•°å¯ä»¥è¢«æ ‡è®°æˆ <code>protected</code>ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½åœ¨åŒ…å«å®ƒçš„ç±»å¤–è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯èƒ½è¢«ç»§æ‰¿ã€‚æ¯”å¦‚ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>  <span class="token keyword">protected</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">protected</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// Empooyee èƒ½ç»§æ‰¿ Person</span><span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> department<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> department<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>theName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>department <span class="token operator">=</span> department<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> <span class="token function">getElevatorPitch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> and I work in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>department<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.`</span></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> howard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">'Howard'</span><span class="token punctuation">,</span> <span class="token string">'Sales'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// okay</span><span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'John'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é”™è¯¯ï¼šPerson çš„æ„é€ å‡½æ•°æ˜¯è¢«ä¿æŠ¤çš„</span></code></pre><hr><h3 id="reanonly-ä¿®é¥°ç¬¦"><a href="#reanonly-ä¿®é¥°ç¬¦" class="headerlink" title="reanonly ä¿®é¥°ç¬¦"></a>reanonly ä¿®é¥°ç¬¦</h3><p>ä½ å¯ä»¥ä½¿ç”¨ <code>readonly</code> å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Octopus</span> <span class="token punctuation">{</span>  readonly name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  readonly numberOfLegs<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>theName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> theName<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> dad <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Octopus</span><span class="token punctuation">(</span><span class="token string">'Man with the 8 strong legs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dad<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// {numberOfLegs: 8, name: 'Man with the 8 strong legs'}</span>dad<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Man with the 3-piece suit'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// é”™è¯¯ï¼šname æ˜¯åªè¯»çš„.</span></code></pre><h4 id="å‚æ•°å±æ€§"><a href="#å‚æ•°å±æ€§" class="headerlink" title="å‚æ•°å±æ€§"></a>å‚æ•°å±æ€§</h4><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ <code>Octopus</code> ç±»é‡Œå®šä¹‰ä¸€ä¸ªåªè¯»æˆå‘˜ <code>name</code> å’Œ <code>theName</code> çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”ç«‹åˆ»å°† <code>theName</code> èµ‹å€¼ç»™ <code>name</code>ï¼Œè¿™ç§æƒ…å†µç»å¸¸ä¼šé‡åˆ°ã€‚å‚æ•°å±æ€§å¯ä»¥æ–¹ä¾¿çš„è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªæˆå‘˜ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¯å¯¹ä¹‹å‰ <code>Octopus</code> çš„ä¿®æ”¹ç‰ˆï¼Œä½¿ç”¨äº†å‚æ•°å±æ€§ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Octopus</span> <span class="token punctuation">{</span>  readonly numberOfLegs<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>readonly name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æ³¨æ„çœ‹æˆ‘ä»¬æ˜¯å¦‚ä½•èˆå¼ƒäº† <code>theName</code>ï¼Œä»…åœ¨æ„é€ å‡½æ•°é‡Œä½¿ç”¨ <code>readonly name: string</code>ï¼Œå‚æ•°æ¥åˆ›å»ºå’Œåˆå§‹åŒ– <code>name</code> æˆå‘˜ã€‚æˆ‘ä»¬æŠŠå£°æ˜å’Œèµ‹å€¼åˆå¹¶è‡³ä¸€å¤„ã€‚<br>å‚æ•°å±æ€§é€šè¿‡æ„é€ å‡½æ•°å‚æ•°å‰é¢æ·»åŠ ä¸€ä¸ªè®¿é—®é™å®šç¬¦æ¥å£°æ˜ã€‚ä½¿ç”¨ <code>private</code> é™å®šä¸€ä¸ªå‚æ•°å±æ€§ä¼šå£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼›å¯¹äº <code>public</code> å’Œ <code>protected</code> æ¥è¯´ä¹Ÿæ˜¯ä¸€æ ·ã€‚</p><h3 id="å­˜å–å™¨"><a href="#å­˜å–å™¨" class="headerlink" title="å­˜å–å™¨"></a>å­˜å–å™¨</h3><p><code>TypeScript</code> æ”¯æŒé€šè¿‡ <code>getter</code> å’Œ <code>setter</code> æ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚<br>ä¸‹é¢æ¥çœ‹å¦‚ä½•æŠŠä¸€ä¸ªç®€å•çš„ç±»æ”¹å†™æˆä½¿ç”¨ <code>get</code> å’Œ <code>set</code> ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨å­˜å–å™¨çš„ä¾‹å­å¼€å§‹ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>  fullName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>employee<span class="token punctuation">.</span>fullName <span class="token operator">=</span> <span class="token string">'Bob Smith'</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>employee<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Bob Smith</span><span class="token punctuation">}</span></code></pre><p>æˆ‘ä»¬å¯ä»¥éšæ„çš„è®¾ç½® <code>fullName</code>ï¼Œè¿™æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œä½†æ˜¯è¿™ä¹Ÿå¯èƒ½ä¼šå¸¦æ¥éº»çƒ¦ã€‚<br>ä¸‹é¢è¿™ä¸ªç‰ˆæœ¬é‡Œï¼Œæˆ‘ä»¬å…ˆæ£€æŸ¥ç”¨æˆ·å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œç„¶ååœ¨å…è®¸å…¶ä¿®æ”¹å‘˜å·¥ä¿¡æ¯ã€‚æˆ‘ä»¬æŠŠ <code>fullName</code> çš„ç›´æ¥è®¿é—®æ”¹æˆäº†å¯ä»¥æ£€æŸ¥å¯†ç çš„ <code>set</code> æ–¹æ³•ã€‚æˆ‘ä»¬ä¹ŸåŠ äº†ä¸€ä¸ª <code>get</code> æ–¹æ³•ï¼Œè®©ä¸Šé¢çš„ä¾‹å­ä»ç„¶å¯ä»¥å·¥ä½œã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> passcode <span class="token operator">=</span> <span class="token string">'secret passcode'</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> _fullName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">get</span> <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_fullName<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">set</span> <span class="token function">fullName</span><span class="token punctuation">(</span>newName<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>passcode <span class="token operator">&amp;&amp;</span> passcode <span class="token operator">!==</span> <span class="token string">'secret passcode'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>_fullName <span class="token operator">=</span> newName<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Errorï¼šUnauthorized update of employee!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> employee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>employee<span class="token punctuation">.</span>fullName <span class="token operator">=</span> <span class="token string">'Bob Smith'</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>employee<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">alert</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¼¹å‡º  Blob Smith</span><span class="token punctuation">}</span></code></pre><p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹å¯†ç ï¼Œæ¥éªŒè¯ä¸€ä¸‹å­˜å–å™¨æ˜¯å¦å·¥ä½œçš„ã€‚å½“å¯†ç ä¸å¯¹æ—¶ï¼Œä¼šæç¤ºæˆ‘ä»¬æ²¡æœ‰æƒé™å»ä¿®æ”¹å‘˜å·¥ã€‚<br>å¯¹äºå­˜å–å™¨æœ‰ä¸‹é¢å‡ ç‚¹éœ€è¦æ³¨æ„çš„ï¼š</p><ul><li>é¦–å…ˆï¼Œå­˜å–å™¨è¦æ±‚ä½ å°†ç¼–è¯‘å™¨è®¾ç½®ä¸ºè¾“å‡º <code>ECMAScript 5</code> æˆ–æ›´é«˜ï¼Œä¸æ”¯æŒé™çº§åˆ° <code>ECMAScript 3</code> ã€‚</li><li>å…¶æ¬¡ï¼Œåªæœ‰å¸¦ <code>get</code> ä¸å¸¦æœ‰ <code>set</code> çš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º <code>readonly</code> ã€‚</li></ul><hr><h3 id="é™æ€å±æ€§"><a href="#é™æ€å±æ€§" class="headerlink" title="é™æ€å±æ€§"></a>é™æ€å±æ€§</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªè®¨è®ºäº†ç±»çš„å®ä¾‹æˆå‘˜ï¼Œé‚£äº›ä»…å½“ç±»è¢«å®ä¾‹åŒ–çš„æ—¶å€™æ‰ä¼šè¢«åˆå§‹åŒ–çš„å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Šã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>static</code> å®šä¹‰ <code>origin</code>ï¼Œå› ä¸ºå®ƒæ˜¯æ‰€æœ‰ç½‘æ ¼éƒ½ä¼šç”¨åˆ°çš„å±æ€§ã€‚æ¯ä¸ªå®ä¾‹æƒ³è¦è®¿é—®è¿™ä¸ªå±æ€§çš„æ—¶å€™ï¼Œéƒ½è¦åœ¨ <code>origin</code> å‰åŠ ä¸Šç±»åã€‚å¦‚åŒåœ¨å®ä¾‹å±æ€§ä¸Šä½¿ç”¨ <code>this.</code> å‰ç¼€æ¥è®¿é—®å±æ€§ä¸€æ ·ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code>Grid.</code> æ¥è®¿é—®é™æ€å±æ€§ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Grid</span> <span class="token punctuation">{</span>  <span class="token keyword">static</span> origin <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token function">calculateDistanceFromOrigin</span><span class="token punctuation">(</span>point<span class="token punctuation">:</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span> y<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> xDist <span class="token operator">=</span> point<span class="token punctuation">.</span>x <span class="token operator">-</span> Grid<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>x<span class="token punctuation">;</span>    <span class="token keyword">let</span> yDist <span class="token operator">=</span> point<span class="token punctuation">.</span>x <span class="token operator">-</span> Grid<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y<span class="token punctuation">;</span>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>xDist <span class="token operator">*</span> xDist <span class="token operator">+</span> yDist <span class="token operator">*</span> yDist<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scale<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> scale<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> grid1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Grid</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 5x scale</span><span class="token keyword">let</span> grid2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Grid</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 5x scale</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>grid1<span class="token punctuation">.</span><span class="token function">calculateDistanceFromOrigin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 14.142135623730951</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>grid2<span class="token punctuation">.</span><span class="token function">calculateDistanceFromOrigin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 2.8284271247461903</span></code></pre><hr><h3 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h3><p>æŠ½è±¡ç±»ä½œä¸ºå…¶ä»–æ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ã€‚å®ƒä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ–ã€‚ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚ã€‚<code>abstract</code> å…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³•ã€‚</p><pre class=" language-typescript"><code class="language-typescript">abstract <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>  abstract <span class="token function">makeSound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'roaming the search...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°ã€‚æŠ½è±¡æ–¹æ³•çš„è¯­æ³•äºä¸æ¥å£æ–¹æ³•ç±»ä¼¼ã€‚ä¸¤è€…éƒ½æ˜¯å®šä¹‰æ–¹æ³•ç­¾åä½†ä¸åŒ…å«æ–¹æ³•ä½“ã€‚ç„¶è€Œï¼ŒæŠ½è±¡æ–¹æ³•å¿…é¡»åŒ…å« <code>abstract</code> å…³é”®å­—å¹¶ä¸”å¯ä»¥åŒ…å«è®¿é—®ä¿®é¥°ç¬¦ã€‚</p><pre class=" language-typescript"><code class="language-typescript">abstract <span class="token keyword">class</span> <span class="token class-name">Department</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Department name '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  abstract <span class="token function">printMeeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">AccountingDepartment</span> <span class="token keyword">extends</span> <span class="token class-name">Department</span> <span class="token punctuation">{</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">'Accounting and Auditing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ super()</span>  <span class="token punctuation">}</span>  <span class="token function">printMeeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The Accounting Department meets each Monday at 10am.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">generateReports</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Genaerating accounting reports...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> department<span class="token punctuation">:</span> Department<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»å‹çš„å¼•ç”¨</span>department <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Department</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// errorï¼šCannot create an instance of an abstract class.</span><span class="token comment" spellcheck="true">// é”™è¯¯ï¼šä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹</span>department <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AccountingDepartment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼</span>department<span class="token punctuation">.</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Department name Accounting and Auditing</span>department<span class="token punctuation">.</span><span class="token function">printMeeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// The Accounting Department meets each Monday at 10am.'</span>department<span class="token punctuation">.</span><span class="token function">generateReports</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// errorï¼š Property 'generateReports' does not exist on type 'Department'.</span><span class="token comment" spellcheck="true">// generateReports æ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨</span></code></pre><hr><h3 id="é«˜çº§æŠ€å·§"><a href="#é«˜çº§æŠ€å·§" class="headerlink" title="é«˜çº§æŠ€å·§"></a>é«˜çº§æŠ€å·§</h3><h4 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h4><p>å½“ä½ åœ¨ <code>TypeScript</code> ä¸­å£°æ˜äº†ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå®é™…ä¸ŠåŒæ—¶å£°æ˜äº†å¾ˆå¤šä¸œè¥¿ã€‚é¦–å…ˆå°±æ˜¯ <strong><em>å®ä¾‹çš„ç±»å‹</em></strong>ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>  greeting<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token keyword">constructor</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>greeting <span class="token operator">=</span> message<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">'Hello,'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>greeting<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> greeter<span class="token punctuation">:</span> Greeter<span class="token punctuation">;</span>greeter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token string">'World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeter<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Hello,World</span></code></pre><p>è¿™é‡Œæˆ‘ä»¬å†™äº† <code>let greeter: Greeter</code>ï¼Œæ„æ€æ˜¯ <code>Greeter</code> ç±»çš„å®ä¾‹ç±»å‹æ˜¯ <code>Greeter</code> ã€‚è¿™å¯¹äºç”¨è¿‡å…¶ä»–é¢å‘å¯¹è±¡çš„è¯­è¨€çš„ç¨‹åºå‘˜æ¥è¯´è®²å·²ç»æ˜¯è€ä¹ æƒ¯äº†ã€‚</p><p>æˆ‘ä»¬ä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªå«<em>æ„é€ å‡½æ•°</em>çš„å€¼ã€‚è¿™ä¸ªå‡½æ•°ä¼šåœ¨æˆ‘ä»¬ä½¿ç”¨ <code>new</code> åˆ›å»ºç±»å®ä¾‹çš„æ—¶å€™è¢«è°ƒç”¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘æˆ <code>JavaScript</code> åæ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> Greeter <span class="token operator">=</span> <span class="token comment" spellcheck="true">/** @class */</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">function</span> <span class="token function">Greeter</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>greeting <span class="token operator">=</span> message<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  Greeter<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>greet <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">'Hello,'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>greeting<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> Greeter<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> greeter<span class="token punctuation">;</span>greeter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token string">'World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeter<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Hello,World</span></code></pre><p>ä¸Šé¢çš„ä»£ç é‡Œï¼Œ<code>var Greeter</code> å°†è¢«èµ‹å€¼ä¸ºæ„é€ å‡½æ•°ã€‚å½“æˆ‘ä»¬è°ƒç”¨ <code>new</code> å¹¶æ‰§è¡Œäº†è¿™ä¸ªå‡½æ•°åï¼Œä¾¿ä¼šå¾—åˆ°ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚è¿™ä¸ªæ„é€ å‡½æ•°ä¹ŸåŒ…å«äº†ç±»çš„æ‰€æœ‰é™æ€å±æ€§ã€‚æ¢ä¸ªè§’åº¦è¯´ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºç±»å…·æœ‰<em>å®ä¾‹éƒ¨åˆ†</em>å’Œ<em>é™æ€éƒ¨åˆ†</em>è¿™ä¸ªä¸¤ä¸ªéƒ¨åˆ†ã€‚</p><p>è®©æˆ‘ä»¬ç¨å¾®æ”¹å†™ä¸€ä¸‹è¿™ä¸ªä¾‹å­ï¼Œçœ‹çœ‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>  <span class="token keyword">static</span> standardGreeting <span class="token operator">=</span> <span class="token string">'Hello,there'</span><span class="token punctuation">;</span>  greeting<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">;</span>  <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>greeting<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token string">'Hello,'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>greeting<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> Greeter<span class="token punctuation">.</span>standardGreeting<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> greeter1<span class="token punctuation">:</span> Greeter<span class="token punctuation">;</span>greeter1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeter1<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Hello,there</span><span class="token keyword">let</span> greeterMaker<span class="token punctuation">:</span> <span class="token keyword">typeof</span> Greeter <span class="token operator">=</span> Greeter<span class="token punctuation">;</span>greeterMaker<span class="token punctuation">.</span>standardGreeting <span class="token operator">=</span> <span class="token string">'Hey,there'</span><span class="token punctuation">;</span><span class="token keyword">let</span> greeter2<span class="token punctuation">:</span> Greeter<span class="token punctuation">;</span>greeter2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeter2<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Hey,there</span></code></pre><p>è¿™ä¸ªä¾‹å­é‡Œï¼Œ <code>greeter1</code> ä¸ä¹‹å‰çœ‹åˆ°çš„ä¸€æ ·ã€‚æˆ‘ä»¬å®ä¾‹åŒ– <code>Greeter</code> ç±»ï¼Œå¹¶ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ã€‚ä¸æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ä¸€æ ·ã€‚</p><p>å†ä¹‹åï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ç±»ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå« <code>greeterMaker</code> çš„å˜é‡ã€‚è¿™ä¸ªå˜é‡ä¿å­˜äº†è¿™ä¸ªç±»æˆ–è€…è¯´ä¿å­˜äº†ç±»æ„é€ å‡½æ•°ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨ <code>typeof Greeter</code>ï¼Œæ„æ€æ˜¯å– <code>Greeter</code> ç±»çš„ç±»å‹ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„ç±»å‹ã€‚æˆ–è€…æ›´ç¡®åˆ‡çš„è¯´ï¼Œâ€å‘Šè¯‰æˆ‘ <code>Greeter</code> æ ‡è¯†ç¬¦çš„ç±»å‹â€ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°çš„ç±»å‹ã€‚è¿™ä¸ªç±»å‹åŒ…å«äº†ç±»çš„æ‰€æœ‰é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ã€‚ä¹‹åï¼Œå°±å’Œå‰é¢ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨ <code>greeterMaker</code> ä¸Šä½¿ç”¨ <code>new</code>ï¼Œåˆ›å»º <code>Greeter</code> çš„å®ä¾‹ã€‚</p><h4 id="æŠŠç±»å½“åšæ¥å£ä½¿ç”¨"><a href="#æŠŠç±»å½“åšæ¥å£ä½¿ç”¨" class="headerlink" title="æŠŠç±»å½“åšæ¥å£ä½¿ç”¨"></a>æŠŠç±»å½“åšæ¥å£ä½¿ç”¨</h4><p>ç±»å®šä¹‰ä¼šåˆ›å»ºä¸¤ä¸ªä¸œè¥¿ï¼šç±»çš„å®ä¾‹ç±»å‹å’Œä¸€ä¸ªæ„é€ å‡½æ•°ã€‚å› ä¸ºç±»å¯ä»¥åˆ›å»ºå‡ºç±»å‹ï¼Œæ‰€ä»¥ä½ èƒ½å¤Ÿåœ¨å…è®¸ä½¿ç”¨æ¥å£çš„åœ°æ–¹ä½¿ç”¨ç±»ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>  x<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span>  y<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">interface</span> <span class="token class-name">Point3d</span> <span class="token keyword">extends</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>  z<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> point3d<span class="token punctuation">:</span> Point3d <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> z<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>point3d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// { x: 1, y: 2, z: 3 }</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
            <tag> ç±» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript ä¹‹åŸºç¡€ç±»å‹</title>
      <link href="/2019/09/30/typescript-ji-chu-lei-xing/"/>
      <url>/2019/09/30/typescript-ji-chu-lei-xing/</url>
      
        <content type="html"><![CDATA[<h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>ä¸ºäº†è®©ç¨‹åºæ›´æœ‰ä»·å€¼ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿå¤„ç†æœ€ç®€å•çš„æ•°æ®å•å…ƒï¼šæ•°å­—ã€å­—ç¬¦ä¸²ã€ç»“æ„ä½“ã€å¸ƒå°”å€¼ç­‰ã€‚<code>TypeScript</code>æ”¯æŒä¸<code>JavaScript</code>å‡ ä¹ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œæ­¤å¤–è¿˜æä¾›äº†å®ç”¨çš„æšä¸¾ç±»å‹æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ã€‚</p><hr><h3 id="å¸ƒå°”å€¼"><a href="#å¸ƒå°”å€¼" class="headerlink" title="å¸ƒå°”å€¼"></a>å¸ƒå°”å€¼</h3><p>æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹å°±æ˜¯ç®€å•çš„ <code>true</code>/ <code>false</code> å€¼ï¼Œåœ¨ <code>JavaScript</code> å’Œ <code>TypeScript</code> é‡Œå«åš <code>boolean</code>ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> isDone<span class="token punctuation">:</span> <span class="token keyword">boolean</span> <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span></code></pre><h3 id="æ•°å­—"><a href="#æ•°å­—" class="headerlink" title="æ•°å­—"></a>æ•°å­—</h3><p>å’Œ <code>JavaScript</code> ä¸€æ ·ï¼Œ<code>TypeScript</code> é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ï¼Œè¿™äº›æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯ <code>number</code>ã€‚é™¤äº†æ”¯æŒåè¿›åˆ¶å’Œåå…­è¿›åˆ¶å­—é¢é‡ï¼Œ<code>TypeScript</code> è¿˜æ”¯æŒ <code>ECMAScript2015</code> ä¸­å¼•å…¥çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶å­—é¢é‡ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> decLiteral<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span><span class="token keyword">let</span> hexLiteral<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">0xf00d</span><span class="token punctuation">;</span><span class="token keyword">let</span> binaryLiteral<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">0b1010</span><span class="token punctuation">;</span><span class="token keyword">let</span> octalLiteral<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">0o744</span><span class="token punctuation">;</span></code></pre><h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><p><code>Javascript</code> ç¨‹åºçš„å¦ä¸€é¡¹åŸºæœ¬æ“ä½œæ˜¯å¤„ç†ç½‘é¡µæˆ–æœåŠ¡ç«¯çš„æ–‡æœ¬æ•°æ®ã€‚åƒå…¶ä»–è¯­è¨€é‡Œä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>string</code> è¡¨ç¤ºæ–‡æœ¬æ•°æ®ç±»å‹ã€‚å’Œ<code>Javascript</code> ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨åŒå¼•å·(<code>&quot;</code>)æˆ–å•å¼•å·(<code>&#39;</code>)è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">'bob'</span><span class="token punctuation">;</span>name <span class="token operator">=</span> <span class="token string">'smith'</span><span class="token punctuation">;</span></code></pre><p>ä½ è¿˜å¯ä»¥ä½¿ç”¨æ¨¡ç‰ˆå­—ç¬¦ä¸²ï¼Œå®ƒå¯ä»¥å®šä¹‰å¤šè¡Œæ–‡æœ¬å’Œå†…åµŒè¡¨è¾¾å¼ã€‚ è¿™ç§å­—ç¬¦ä¸²æ˜¯è¢«åå¼•å·åŒ…å›´(<code>`</code>)ï¼Œå¹¶ä¸”ä»¥<code>${ expr }</code>è¿™ç§å½¢å¼åµŒå…¥è¡¨è¾¾å¼ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token template-string"><span class="token string">`GENE`</span></span><span class="token punctuation">;</span><span class="token keyword">let</span> age<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">37</span><span class="token punctuation">;</span><span class="token keyword">let</span> sentence<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token template-string"><span class="token string">`Helloï¼ŒMy name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ï¼ŒI will be </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old next month`</span></span><span class="token punctuation">;</span></code></pre><p>è¿™ä¸ä¸‹é¢å®šä¹‰ <code>sentence</code> çš„æ–¹å¼æ•ˆæœç›¸åŒã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> sentence<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> <span class="token string">'Helloï¼ŒMy name is'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'ï¼ŒI will be'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>age <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' years old next month'</span><span class="token punctuation">;</span></code></pre><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><p><code>TypeScript</code> åƒ <code>JavaScript</code> ä¸€æ ·å¯ä»¥æ“ä½œæ•°ç»„å…ƒç´ ã€‚ æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®šä¹‰æ•°ç»„ã€‚ ç¬¬ä¸€ç§ï¼Œå¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š <code>[]</code>ï¼Œè¡¨ç¤ºç”±æ­¤ç±»å‹å…ƒç´ ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> list<span class="token punctuation">:</span> <span class="token keyword">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><p>ç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨æ•°ç»„æ³›å‹ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> list<span class="token punctuation">:</span> <span class="token keyword">Array</span><span class="token operator">&lt;</span><span class="token keyword">number</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><h3 id="å…ƒç»„-Tuple"><a href="#å…ƒç»„-Tuple" class="headerlink" title="å…ƒç»„ Tuple"></a>å…ƒç»„ Tuple</h3><p>å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œå…ƒç´ ç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚æ¯”å¦‚ä½ å¯ä»¥å®šä¹‰ä¸€å¯¹å€¼åˆ†åˆ«ä¸º <code>string</code> å’Œ <code>number</code> ç±»å‹çš„å…ƒç»„ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// Declare a tuple type</span><span class="token keyword">let</span> x<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">string</span><span class="token punctuation">,</span>  <span class="token keyword">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Initialize x</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span><span class="token comment" spellcheck="true">// Initialize it incorrectly</span>x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Error</span></code></pre><p>å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹ï¼š</p><pre class=" language-typescript"><code class="language-typescript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Error, 'number' does not have 'substr'</span></code></pre><p>å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£ã€‚</p><pre class=" language-typescript"><code class="language-typescript">x<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK, 'string' å’Œ 'number' éƒ½æœ‰ totoString</span>x<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Error, å¸ƒå°”ä¸æ˜¯(string | number) ç±»å‹</span></code></pre><p>è”åˆç±»å‹æ˜¯é«˜çº§ä¸»é¢˜ï¼Œæˆ‘ä»¬ä¼šåœ¨ä»¥åçš„ç« èŠ‚é‡ŒåŒè®¨è®ºå®ƒã€‚</p><h3 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h3><p><code>enum</code> ç±»å‹æ˜¯å¯¹ <code>JavaScript</code> æ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚åƒ <code>C#</code> ç­‰å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆç¾å¥½çš„å‹å¥½çš„åå­—ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>Red<span class="token punctuation">,</span> Green<span class="token punctuation">,</span> Blue<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> c<span class="token punctuation">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Green<span class="token punctuation">;</span></code></pre><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä» <code>0</code> å¼€å§‹ä¸ºå…ƒç´ ç¼–å·ã€‚ ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æŒ‡å®šæˆå‘˜çš„æ•°å€¼ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä¸Šé¢çš„ä¾‹å­æ”¹æˆä» <code>1</code> å¼€å§‹ç¼–å·ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>Red <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Green<span class="token punctuation">,</span> Blue<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> c<span class="token punctuation">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Green<span class="token punctuation">;</span></code></pre><p>æˆ–è€…ï¼Œå…¨éƒ¨éƒ½é‡‡ç”¨æ‰‹åŠ¨èµ‹å€¼ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>Red <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Green <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> Blue <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> c<span class="token punctuation">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Green<span class="token punctuation">;</span></code></pre><p>æšä¸¾ç±»å‹æä¾›çš„ä¸€ä¸ªä¾¿åˆ©æ˜¯ä½ å¯ä»¥ç”±æšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­—ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“æ•°å€¼ä¸º <code>2</code>ï¼Œä½†æ˜¯ä¸çŸ¥é“å®ƒæ˜ å°„åˆ° <code>Color</code> é‡Œçš„é‚£ä¸ªåå­—ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥æ‰¾ç›¸åº”çš„åå­—ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">enum</span> Color <span class="token punctuation">{</span>Red <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> Green<span class="token punctuation">,</span> Blue<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> colorName<span class="token punctuation">:</span> <span class="token keyword">string</span> <span class="token operator">=</span> Color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>colorName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ˜¾ç¤º Green å› ä¸ºä¸Šé¢ä»£ç é‡Œï¼Œå®ƒçš„å€¼æ˜¯2</span></code></pre><h3 id="Any"><a href="#Any" class="headerlink" title="Any"></a>Any</h3><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹ã€‚è¿™äº›å€¼å¯èƒ½æ¥è‡ªäºåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥è‡ªç”¨æˆ·è¾“å…¥çš„ç¬¬ä¸‰æ–¹ä»£ç åº“ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯ç›´æ¥è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>any</code> ç±»å‹æ¥æ ‡è®°è¿™äº›å˜é‡ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> notSure<span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>notSure <span class="token operator">=</span> <span class="token string">'maybe a string instead'</span><span class="token punctuation">;</span>notSure <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// okay, definitely a boolean</span></code></pre><p>åœ¨å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ”¹å†™çš„æ—¶å€™ï¼Œå°±åƒå®ƒåœ¨å…¶ä»–è¯­è¨€ä¸­é‚£æ ·ï¼Œå®ƒå…è®¸ä½ åœ¨ç¼–è¯‘æ—¶å¯é€‰æ‹©çš„åŒ…å«æˆ–ç§»é™¤ç±»å‹æ£€æŸ¥ã€‚ä½ å¯èƒ½è®¤ä¸º <code>Object</code> æœ‰ç›¸ä¼¼çš„ä½œç”¨ï¼Œå°±åƒå®ƒåœ¨å…¶ä»–è¯­è¨€ä¸­é‚£æ ·ã€‚ä½†æ˜¯ <code>Object</code> ç±»å‹çš„å˜é‡åªæ˜¯å…è®¸ä½ ç»™å®ƒèµ‹ä»»æ„å€¼ï¼Œä½†æ˜¯å´ä¸èƒ½å¤Ÿåœ¨å®ƒä¸Šé¢è°ƒç”¨ä»»æ„çš„æ–¹æ³•ï¼Œå³ä¾¿å®ƒçœŸæœ‰è¿™æ ·çš„æ–¹æ³•ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> nouSure<span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>notSure<span class="token punctuation">.</span><span class="token function">ifItExists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// okay, ifItExists might exist at runtime</span>notSure<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// okay, toFixed exists (but the compiler does not check)</span><span class="token keyword">let</span> prettySure<span class="token punctuation">:</span> Object <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>prettySure<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Error: Property 'toFixed' doesn't exist on the type 'Object'.</span></code></pre><p>å½“ä½ åªçŸ¥é“ä¸€éƒ¨åˆ†æ•°æ®çš„ç±»å‹æ—¶ï¼Œ <code>any</code> ç±»å‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚æ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«äº†ä¸åŒçš„ç±»å‹çš„æ•°æ®ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> list<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">true</span><span class="token punctuation">,</span> <span class="token string">'free'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>list<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></code></pre><h3 id="Void"><a href="#Void" class="headerlink" title="Void"></a>Void</h3><p>æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œ <code>void</code> ç±»å‹åƒæ˜¯ä¸ <code>any</code>  ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ <code>void</code>ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">function</span> <span class="token function">warnUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This is my warning message'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å£°æ˜ä¸€ä¸ª <code>void</code> ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½èµ‹äºˆå®ƒ <code>undefined</code> å’Œ <code>null</code> ã€‚</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> unusable<span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token operator">=</span> undefined<span class="token punctuation">;</span></code></pre><h3 id="Null-å’Œ-Undefined"><a href="#Null-å’Œ-Undefined" class="headerlink" title="Null å’Œ Undefined"></a>Null å’Œ Undefined</h3><p> <code>TypeScript</code> é‡Œï¼Œ <code>undefined</code> å’Œ <code>null</code> ä¸¤è€…å„è‡ªæœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åš <code>undefined</code> å’Œ <code>null</code> ã€‚å’Œ <code>void</code> ç›¸ä¼¼ï¼Œå®ƒä»¬çš„æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ï¼š</p><pre class=" language-typescript"><code class="language-typescript"> <span class="token comment" spellcheck="true">// æˆ‘ä»¬å¯ä»¥ä¸ºè¿™äº›å˜é‡åˆ†é…çš„ä¸œè¥¿ä¸å¤šï¼</span> <span class="token keyword">let</span> u<span class="token punctuation">:</span> undefined <span class="token operator">=</span> undefined<span class="token punctuation">;</span> <span class="token keyword">let</span> n<span class="token punctuation">:</span> <span class="token keyword">null</span> <span class="token operator">=</span> nill<span class="token punctuation">;</span></code></pre><p> é»˜è®¤æƒ…å†µä¸‹ <code>null</code> å’Œ <code>undefined</code> æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ <code>null</code> å’Œ <code>undefined</code> èµ‹å€¼ç»™ <code>number</code> ç±»å‹çš„å˜é‡ã€‚</p><p> ç„¶è€Œï¼Œå½“ä½ æŒ‡å®šäº†ä¸€ä¸ª <code>--strickNullChecks</code> æ ‡è®°ï¼Œ <code>null</code> å’Œ <code>undefined</code> åªèƒ½èµ‹å€¼ç»™ <code>void</code> å’Œå®ƒä»¬è‡ªä¸ªã€‚è¿™èƒ½é¿å…å¾ˆå¤šå¸¸è§çš„é—®é¢˜ã€‚ä¹Ÿè®¸åœ¨æŸå¤„ä¼ å…¥ä¸€ä¸ª <code>string</code> æˆ– <code>null</code> æˆ– <code>undefined</code> ï¼Œä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹ <code>string</code> | <code>null</code> | <code>undefined</code> ã€‚å†æ¬¡è¯´æ˜ï¼Œåé¢ä¼šä»‹ç»è”åˆç±»å‹ã€‚</p><blockquote><p>æ³¨æ„ï¼šæˆ‘ä»¬é¼“åŠ±å°½å¯èƒ½çš„ä½¿ç”¨ <code>--strickNullChecks</code> ï¼Œä½†åœ¨æœ¬ä»‹ç»æ‰‹å†Œä¸­æˆ‘ä»¬å‡è®¾è¿™ä¸ªæ ‡è®°æ˜¯å…³é—­çš„ã€‚</p></blockquote><h3 id="Never"><a href="#Never" class="headerlink" title="Never"></a>Never</h3><p><code>never</code> ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ<code>never</code> ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼›å˜é‡ä¹Ÿå¯èƒ½æ˜¯ <code>never</code> ç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤çº¦æŸæ—¶ã€‚</p><p><code>never</code> ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯ <code>never</code> çš„å­ç±»å‹å¯ä»¥èµ‹å€¼ç»™ <code>never</code> ç±»å‹ï¼ˆé™¤äº† <code>never</code> æœ¬èº«é™¤å¤–ï¼‰ã€‚å³ä¾¿ <code>any</code> ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ <code>never</code> ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›è¿”å› <code>never</code> ç±»å‹çš„å‡½æ•°ï¼š</p><pre class=" language-typescript"><code class="language-typescript"><span class="token comment" spellcheck="true">// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹ã€‚</span><span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> never <span class="token punctuation">{</span>  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸º never</span><span class="token keyword">function</span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Something failed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹ã€‚</span><span class="token keyword">function</span> <span class="token function">infiniteLoop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> never <span class="token punctuation">{</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h3><p> <code>object</code> è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤äº† <code>number</code> ï¼Œ <code>string</code> ï¼Œ <code>boolean</code> ï¼Œ <code>symbol</code>ï¼Œ <code>null</code>  æˆ– <code>undefined</code> ä¹‹å¤–çš„ç±»å‹ã€‚</p><p> ä½¿ç”¨ <code>object</code> ç±»å‹ï¼Œå°±å¯ä»¥æ›´å¥½çš„è¡¨ç¤ºåƒ <code>Object.create</code> è¿™æ ·çš„ <code>API</code> ã€‚ä¾‹å¦‚ï¼š</p><pre class=" language-typescript"><code class="language-typescript"> <span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span>o<span class="token punctuation">:</span> object <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>prop<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// OK</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Error</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Error</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Error</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Error</span></code></pre><h3 id="ç±»å‹æ–­è¨€"><a href="#ç±»å‹æ–­è¨€" class="headerlink" title="ç±»å‹æ–­è¨€"></a>ç±»å‹æ–­è¨€</h3><p> æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯”  <code>TypeScript</code> æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šçš„çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒæœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚</p><p> é€šå¸¸ç±»å‹æ–­è¨€è¿™ç§æ–¹å¼å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼š<code>&#39;ç›¸ä¿¡æˆ‘ï¼Œæˆ‘çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆ&#39;</code>ã€‚ç±»å‹æ–­è¨€å¥½æ¯”å…¶ä»–è¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„ç±»å‹æ£€æŸ¥å’Œé‡æ„ã€‚å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚ <code>TypeScript</code> ä¼šå‡è®¾ä½ ï¼Œç¨‹åºå‘˜ï¼Œå·²ç»è¿›è¡Œäº†å¿…é¡»çš„æ£€æŸ¥ã€‚</p><p> ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ã€‚å…¶ä¸€æ˜¯ â€œå°–æ‹¬å·â€ <code>&lt;&gt;</code> è¯­æ³•ï¼š</p><pre class=" language-typescript"><code class="language-typescript"> <span class="token keyword">let</span> someValue<span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token operator">=</span> <span class="token string">'This is a string'</span><span class="token punctuation">;</span> <span class="token keyword">let</span> strLength<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span>someValue<span class="token punctuation">)</span><span class="token punctuation">.</span>length</code></pre><p> å¦ä¸€ä¸ªä¸º <code>as</code> è¯­æ³•ï¼š</p><pre class=" language-typescript"><code class="language-typescript"> <span class="token keyword">let</span> someValue<span class="token punctuation">:</span> <span class="token keyword">any</span> <span class="token operator">=</span> <span class="token string">'This is a string'</span><span class="token punctuation">;</span> <span class="token keyword">let</span> strLength<span class="token punctuation">:</span> <span class="token keyword">number</span> <span class="token operator">=</span> <span class="token punctuation">(</span>someValue as <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length</code></pre><p> ä¸¤ç§å½¢å¼æ˜¯ç­‰ä»·çš„ã€‚è‡³äºä½¿ç”¨å“ªä¸ªå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å‡­ä¸ªäººå–œå¥½ã€‚ç„¶è€Œï¼Œå½“ä½ åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨ <code>JSX</code> æ—¶ï¼Œåªæœ‰ <code>as</code> è¯­æ³•æ–­è¨€æ˜¯è¢«å…è®¸çš„ã€‚</p><h3 id="å…³äº-let"><a href="#å…³äº-let" class="headerlink" title="å…³äº let"></a>å…³äº let</h3><p> ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>let</code> å…³é”®å­—æ¥æ›¿ä»£å¤§å®¶æ‰€ç†Ÿæ‚‰çš„ <code>JavaScript</code> å…³é”®å­— <code>var</code> ã€‚ <code>let</code> å…³é”®å­—æ˜¯ <code>JavaScript</code> çš„ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œ <code>TypeScript</code> å®ç°äº†å®ƒã€‚å¾ˆå¤šå¸¸è§çš„é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>let</code> æ¥è§£å†³ï¼Œæ‰€ä»¥å°½å¯èƒ½çš„ä½¿ç”¨ <code>let</code> æ¥æ›¿ä»£ <code>var</code> å§ã€‚</p><hr><blockquote><p>æœ¬æ–‡å‚è€ƒæ¥æºï¼š <a href="https://www.tslang.cn/docs/handbook/basic-types.html" target="_blank" rel="noopener">TypeScript åŸºç¡€ç±»å‹</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
            <tag> åŸºç¡€ç±»å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoå¿«é€Ÿæ­å»ºä¸ªäººç½‘ç«™</title>
      <link href="/2019/09/27/xmind-tu-zhi-ying-yong-hexo-da-jian-ge-ren-wang-zhan/"/>
      <url>/2019/09/27/xmind-tu-zhi-ying-yong-hexo-da-jian-ge-ren-wang-zhan/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼Œä½¿ç”¨ Markdownï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ã€‚<br>åœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚<br>åº”ç”¨ XMind åˆ¶ä½œçš„åº”ç”¨ Hexo å¿«é€Ÿæ­å»ºä¸ªäººç½‘ç«™æµç¨‹å›¾ã€‚</p></blockquote><p>æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/libing-cheer/merge-table/master/src/assets/Hexo%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2.png" alt="Hexoå¿«é€Ÿæ­å»ºä¸ªäººç½‘ç«™æµç¨‹å›¾"></p><p>ç‚¹å‡»é¢„è§ˆå›¾ç‰‡ä¸æ¸…æ¥šï¼Œä½†æ˜¯æŠŠä¸‹è½½ä¸‹æ¥å°±å¾ˆæ¸…æ™°äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
          <category> XMind </category>
          
          <category> æ­å»ºç½‘ç«™ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> XMind </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tableè¡¨æ ¼åˆå¹¶</title>
      <link href="/2019/09/26/table-biao-ge-he-bing/"/>
      <url>/2019/09/26/table-biao-ge-he-bing/</url>
      
        <content type="html"><![CDATA[<blockquote><p>vue+elementUI ä¸­çš„ Table è¡¨æ ¼çš„åˆå¹¶åŠŸèƒ½ï¼Œå¯é…ç½®ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚</p></blockquote><h3 id="1ã€åˆå¹¶å‰åæ•ˆæœå›¾"><a href="#1ã€åˆå¹¶å‰åæ•ˆæœå›¾" class="headerlink" title="1ã€åˆå¹¶å‰åæ•ˆæœå›¾"></a>1ã€åˆå¹¶å‰åæ•ˆæœå›¾</h3><p><img src="https://raw.githubusercontent.com/libing-cheer/merge-table/master/src/assets/beforeMerge.png" alt="åˆå¹¶å‰"><br><img src="https://raw.githubusercontent.com/libing-cheer/merge-table/master/src/assets/afterMerge.png" alt="åˆå¹¶å"></p><h3 id="2ã€ä»£ç å®ç°"><a href="#2ã€ä»£ç å®ç°" class="headerlink" title="2ã€ä»£ç å®ç°"></a>2ã€ä»£ç å®ç°</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    {{msg}}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span>        <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tableData<span class="token punctuation">"</span></span>        <span class="token attr-name">:span-method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>arraySpanMethod<span class="token punctuation">"</span></span>        <span class="token attr-name">border</span><span class="token style-attr language-css"><span class="token attr-name">        <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">1000</span>px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span><span class="token number">30</span>px auto<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span>        <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>550<span class="token punctuation">"</span></span>      <span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(item, index) in tableTitleData<span class="token punctuation">"</span></span>          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>          <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item.prop<span class="token punctuation">"</span></span>          <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item.label<span class="token punctuation">"</span></span>          <span class="token attr-name">:min-width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item.minWidth<span class="token punctuation">"</span></span>        <span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>scope<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>{{scope.row[item.prop]}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">{</span> tableTitleData<span class="token punctuation">,</span> tableData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./js/options'</span><span class="token punctuation">;</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">'mergeTable'</span><span class="token punctuation">,</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        msg<span class="token punctuation">:</span> <span class="token string">'è¡¨æ ¼åˆå¹¶'</span><span class="token punctuation">,</span>        tableData<span class="token punctuation">,</span>        tableTitleData      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// ====================================== åˆå¹¶å¤šåˆ—å•å…ƒæ ¼é€»è¾‘</span>      <span class="token function">arraySpanMethod</span><span class="token punctuation">(</span><span class="token punctuation">{</span> row<span class="token punctuation">,</span> column<span class="token punctuation">,</span> rowIndex<span class="token punctuation">,</span> columnIndex <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åˆå¹¶å•å…ƒæ ¼</span>        <span class="token comment" spellcheck="true">/**         * desc è¯¥æ–¹æ³•ä¼šè§¦å‘næ¬¡ï¼Œnæ˜¯è¡¨æ ¼dataçš„length*è¡¨å¤´dataçš„length;         * @param  {String} row         [ å½“å‰éå†åˆ°çš„è¡Œæ•°æ® (åå°æ¥å£è¿”å›çš„) ]         * @param  {Object} column      [ å½“å‰éå†åˆ°çš„åˆ—æ•°æ® (elemenè¡¨æ ¼å¯¹è±¡å†…ç½®çš„) ]         * @param  {Number} rowIndex    [ å½“å‰éå†åˆ°çš„è¡Œä¸‹æ ‡ ]         * @param  {Number} columnIndex [ å½“å‰éå†åˆ°çš„åˆ—ä¸‹æ ‡ ]         * @return {Object} åŒ…å«åˆå¹¶çš„è¡Œå’Œåˆ—ä¿¡æ¯         */</span>        <span class="token comment" spellcheck="true">//  ================================================================ åˆ†å‰²çº¿</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>realTitleData <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>realTitleData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è¿™ä¸ªæ•°ç»„æ˜¯å¸¦childrençš„è¡¨å¤´dataå±•å¼€childrenåçš„æ•°ç»„</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>tableTitleData<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>val <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// å±•å¼€å­˜åœ¨childrençš„titleData</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>val<span class="token punctuation">.</span>children <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>              val<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>child <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>realTitleData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>realTitleData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mergeTabelArr <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// åªè¿è¡Œä¸€æ¬¡ï¼Œè·å¾—è¦åˆå¹¶çš„ä¿¡æ¯æ•°ç»„</span>          <span class="token keyword">const</span> keywords <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'areaName'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// (è¿™ä¸ªæ•°ç»„è¦æ ¹æ®ä¸åŒè¡¨æ ¼æ¥é…ç½®!!!) ä¸€äº›propåçš„é›†åˆï¼Œè¿™äº›porpåä»£è¡¨çš„å­—æ®µ åœ¨æ¯ä¸ªåšè¿‡åˆå¹¶çš„è¡Œæ•°æ®é›†åˆé‡Œ å®ƒçš„çš„å€¼ éƒ½æ˜¯å”¯ä¸€çš„ï¼ˆæ¯”å¦‚åŒºåŸŸã€ç‰‡åŒºã€ä¸­å¿ƒåç§°ä¹‹ç±»çš„ï¼‰ã€‚è¿™ä¸ªé›†åˆç”¨äºç¡®ä¿åˆå¹¶ä¿¡æ¯çš„å”¯ä¸€æ€§ï¼Œç¡®ä¿è¡¨æ ¼ä¸ä¼šé”™ä¹±</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>mergeTabelArr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMergeTabelArr</span><span class="token punctuation">(</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>tableData<span class="token punctuation">,</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>realTitleData<span class="token punctuation">,</span>            keywords<span class="token punctuation">,</span>            <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>          <span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// console.log('å®Œæ•´çš„åˆå¹¶è¡¨æ ¼çš„ä¿¡æ¯é›†åˆ', this.mergeTabelArr);</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// if (columnIndex > 0) { // é™¤æ‰åºå·é‚£ä¸€åˆ—(è¿™é‡Œç”¨äºè‡ªå®šä¹‰è¿‡æ»¤æŸåˆ—)ï¼Œéƒ½è¦åˆå¹¶</span>        <span class="token keyword">const</span> _rowArr <span class="token operator">=</span> <span class="token punctuation">(</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>mergeTabelArr<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>n <span class="token operator">=</span><span class="token operator">></span> n<span class="token punctuation">.</span>key <span class="token operator">===</span> column<span class="token punctuation">.</span>property<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token punctuation">)</span><span class="token punctuation">.</span>connect<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// connectæ•°ç»„</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_rowArr<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">const</span> _row <span class="token operator">=</span> _rowArr<span class="token punctuation">[</span>rowIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token punctuation">{</span>            rowspan<span class="token punctuation">:</span> _row<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// 0ä»£è¡¨åˆ é™¤è¿™åˆ—ï¼Œ1ä»£è¡¨å±•ç¤ºè¿™åˆ—ï¼Œ>1ä»£è¡¨åˆå¹¶åˆ—</span>            colspan<span class="token punctuation">:</span> _row <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment" spellcheck="true">// 0ä»£è¡¨åˆ é™¤è¿™åˆ—ï¼Œ1ä»£è¡¨å±•ç¤ºè¿™åˆ—ï¼Œ>1ä»£è¡¨åˆå¹¶åˆ—</span>          <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">// }</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">getMergeTabelArr</span><span class="token punctuation">(</span>        data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        titleData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        keywords <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        colIndexs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–åˆå¹¶è¡¨æ ¼çš„ä¿¡æ¯é›†åˆ</span>        <span class="token comment" spellcheck="true">/**         * desc è¯¥æ–¹æ³•ä¸ºæœ€ç»ˆç»„åˆâ€˜åˆå¹¶è¡¨æ ¼çš„ä¿¡æ¯é›†åˆâ€™çš„æ–¹æ³•         * @param  {Array}  data                   [ è¡¨æ ¼çš„data ]         * @param  {Array}  titleData              [ è¡¨æ ¼çš„è¡¨å¤´çš„data ]         * @param  {Array}  keywords  ['1','a'...] [ ä¸€äº›propåçš„é›†åˆï¼Œè¿™äº›porpåä»£è¡¨çš„å­—æ®µ åœ¨æ¯ä¸ªåšè¿‡åˆå¹¶çš„è¡Œæ•°æ®é›†åˆé‡Œ å®ƒçš„çš„å€¼ éƒ½æ˜¯å”¯ä¸€çš„ï¼ˆæ¯”å¦‚åŒºåŸŸã€ç‰‡åŒºã€ä¸­å¿ƒåç§°ä¹‹ç±»çš„ï¼‰ã€‚è¿™ä¸ªé›†åˆç”¨äºç¡®ä¿åˆå¹¶ä¿¡æ¯çš„å”¯ä¸€æ€§ï¼Œç¡®ä¿è¡¨æ ¼ä¸ä¼šé”™ä¹± ]         * @param  {Array}  colIndexs [0,1,-2,...] [ åˆå¹¶è§„åˆ™æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„é‡Œæ‰€æœ‰çš„è´Ÿæ•°å€¼ä»£è¡¨ä¸åˆå¹¶çš„åˆ—çš„ä¸‹æ ‡ï¼Œæ­£æ•°ä»£è¡¨åˆå¹¶çš„åˆ—çš„ä¸‹æ ‡ ]         * @return {Array} arr  ç¤ºä¾‹:         * [         *   {         *     key: 'nextSite', // å¯¹åº”åˆ—çš„propå         *     connect: [2, 0, 2, 0, 1]  // connectæ•°ç»„         *   },         *   ...         * ];         */</span>        <span class="token comment" spellcheck="true">//  ================================================================ åˆ†å‰²çº¿</span>        <span class="token keyword">const</span> columnArr <span class="token operator">=</span> colIndexs<span class="token punctuation">.</span>length          <span class="token operator">?</span> titleData<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>              <span class="token keyword">const</span> index <span class="token operator">=</span> colIndexs<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>realV <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>realV <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                <span class="token keyword">const</span> v <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>realV<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> i <span class="token operator">===</span> v<span class="token punctuation">;</span>              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">return</span> index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>          <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æŒ‰ä¼ é€’è¿›æ¥çš„è§„åˆ™è¿‡æ»¤</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>oldMergeTabel <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç»™thisæ·»åŠ oldMergeTabelå±æ€§ï¼Œé˜²æ­¢åé¢æŠ¥é”™</span>        <span class="token keyword">const</span> arr <span class="token operator">=</span> columnArr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>v1 <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getConnectArr</span><span class="token punctuation">(</span>            data<span class="token punctuation">,</span>            v1<span class="token punctuation">.</span>prop<span class="token punctuation">,</span>            keywords<span class="token punctuation">,</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>oldMergeTabel          <span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>oldMergeTabel <span class="token operator">=</span> obj<span class="token punctuation">.</span>connect<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¿å­˜å‰ä¸€æ¡çš„connectæ•°ç»„ä¿¡æ¯</span>          <span class="token keyword">return</span> obj<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> arr<span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">getConnectArr</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> key<span class="token punctuation">,</span> keywords<span class="token punctuation">,</span> oldMergeTabel<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è·å–connectæ•°ç»„</span>        <span class="token comment" spellcheck="true">/**         * desc è¯¥æ–¹æ³•ä¼šè§¦å‘næ¬¡ï¼Œnæ˜¯è¿‡æ»¤åçš„ï¼Œè¦åˆå¹¶çš„è¡¨å¤´dataçš„length;         * @param  {Array}  data          [ è¡¨æ ¼çš„dataæ•°æ® ]         * @param  {String} key           [ è¦åˆå¹¶çš„è¡¨å¤´çš„propå ]         * @param  {Array}  keywords      [ ä¸€äº›propåçš„é›†åˆï¼Œè¿™äº›porpåä»£è¡¨çš„å­—æ®µ åœ¨æ¯ä¸ªåšè¿‡åˆå¹¶çš„è¡Œæ•°æ®é›†åˆé‡Œ å®ƒçš„çš„å€¼ éƒ½æ˜¯å”¯ä¸€çš„ï¼ˆæ¯”å¦‚åŒºåŸŸã€ç‰‡åŒºã€ä¸­å¿ƒåç§°ä¹‹ç±»çš„ï¼‰ã€‚è¿™ä¸ªé›†åˆç”¨äºç¡®ä¿åˆå¹¶ä¿¡æ¯çš„å”¯ä¸€æ€§ï¼Œç¡®ä¿è¡¨æ ¼ä¸ä¼šé”™ä¹± ]         * @param  {Object} oldMergeTabel [ å‰ä¸€æ¡ç»„åˆå¥½çš„connectæ•°ç»„ä¿¡æ¯,ç”¨äºç¡®ä¿è¡¨æ ¼ä¸ä¼šé”™ä¹± ]         * @return {Object} åŒ…å«åˆå¹¶çš„è¡Œå’Œåˆ—ä¿¡æ¯ï¼ˆå…¶å®å°±æ˜¯ â€˜åˆå¹¶è¡¨æ ¼çš„ä¿¡æ¯æ•°ç»„â€™ çš„ä¸€ä¸ªæˆå‘˜ï¼Œçœ‹ä¸Šé¢getMergeTabelArræ–¹æ³•çš„ç¤ºä¾‹ï¼‰         */</span>        <span class="token comment" spellcheck="true">//  ================================================================ åˆ†å‰²çº¿</span>        <span class="token keyword">const</span> oldArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¿å­˜ä¸Šä¸€ä¸ªæ•°ç»„</span>        <span class="token keyword">let</span> oldObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ§åˆ¶åªè·Ÿä¸Šä¸€ä¸ªå…ƒç´ åšå¯¹æ¯”,ä¸è·Ÿæ•´ä¸ªæ•°ç»„å¯¹æ¯”</span>        <span class="token comment" spellcheck="true">// æ­£ç¡®çš„ä»£ç </span>        data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token keyword">let</span> newObj<span class="token punctuation">;</span>          <span class="token keyword">let</span> newKey <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¿è¯å”¯ä¸€æ€§çš„key</span>          keywords<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>k <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            newKey <span class="token operator">+</span><span class="token operator">=</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>v<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-`</span></span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          newKey <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token keyword">const</span> oldIndex <span class="token operator">=</span> oldArr<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>n <span class="token operator">=</span><span class="token operator">></span> n<span class="token punctuation">.</span>key <span class="token operator">===</span> newKey<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¿å­˜çš„æ•°ç»„é‡Œæ˜¯å¦å­˜åœ¨ä¸å½“å‰è¡¨å¤´æ•°æ®ä¸€æ ·çš„å…ƒç´ ï¼ˆæ³¨æ„ï¼ŒfindIndexæ‰¾åˆ°çš„æ˜¯ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ çš„ä¸‹æ ‡ï¼‰</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>oldIndex <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> oldObj<span class="token punctuation">.</span>key <span class="token operator">===</span> newKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>            newObj <span class="token operator">=</span> <span class="token punctuation">{</span>              key<span class="token punctuation">:</span> newKey<span class="token punctuation">,</span>              value<span class="token punctuation">:</span> <span class="token number">0</span>            <span class="token punctuation">}</span><span class="token punctuation">;</span>            oldArr<span class="token punctuation">[</span>oldIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ‰¾åˆ°é‡å¤é¡¹çš„ç¬¬ä¸€é¡¹ï¼Œå€¼åŠ 1</span>          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            newObj <span class="token operator">=</span> <span class="token punctuation">{</span>              key<span class="token punctuation">:</span> newKey<span class="token punctuation">,</span>              value<span class="token punctuation">:</span> <span class="token number">1</span>            <span class="token punctuation">}</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>          oldArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newObj<span class="token punctuation">)</span><span class="token punctuation">;</span>          oldObj <span class="token operator">=</span> newObj<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¿å­˜å½“å‰æ•°æ®ï¼Œç”¨ä½œä¸ä¸‹ä¸€æ¡æ•°æ®çš„å¯¹æ¯”ï¼Œçœ‹æ˜¯å¦ç›¸åŒï¼Œç›¸åŒæŠŠä¸‹ä¸€æ¡æ•°æ®çš„å ç”¨åˆ—ç½®æˆ0ï¼Œè¿™æ ·è¡¨æ ¼ä¸ä¼šé”™ä¹±</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> connect <span class="token operator">=</span> oldArr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>n <span class="token operator">=</span><span class="token operator">></span> n<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldMergeTabel<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// æ§åˆ¶æ•°ç»„åˆå¹¶ã€‚å¦‚æœæœ‰é‡å¤é¡¹ä¹Ÿä¸èƒ½è·¨è¶Šè¿‡ä¸Šä¸€æ¡çš„åˆå¹¶è¡Œ</span>          oldMergeTabel<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>oldVal<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">const</span> newVal <span class="token operator">=</span> connect<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ–°å€¼</span>            <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// connectæ•°ç»„å„é¡¹å€¼çš„å’Œ,</span>            <span class="token keyword">const</span> rule1 <span class="token operator">=</span> newVal <span class="token operator">></span> oldVal <span class="token operator">&amp;&amp;</span> oldVal <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">const</span> rule2 <span class="token operator">=</span> newVal <span class="token operator">&lt;</span> oldVal <span class="token operator">&amp;&amp;</span> newVal <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>rule1 <span class="token operator">||</span> rule2<span class="token punctuation">)</span> <span class="token punctuation">{</span>              connect<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> oldVal<span class="token punctuation">;</span>              connect<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>                count <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">;</span>              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// èµ‹å€¼åè®¡ç®—connectæ•°ç»„å„é¡¹å€¼çš„å’Œ</span>              <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> data<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// connectæ•°ç»„å„é¡¹å€¼åŠ èµ·æ¥ä¸èƒ½è¶…è¿‡è¡¨æ ¼æ•°æ®dataçš„length,ï¼ˆå¯èƒ½æœ‰bugï¼Œä»¥åå†è§£å†³å§ï¼Œå“ˆå“ˆå“ˆï¼‰</span>                connect<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> count <span class="token operator">-</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>              <span class="token punctuation">}</span>            <span class="token punctuation">}</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span>          key<span class="token punctuation">:</span> key<span class="token punctuation">,</span>          connect<span class="token punctuation">:</span> connect        <span class="token punctuation">}</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">// æŸ¥è¯¢æ•°æ®</span>      <span class="token function">queryData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// åœ¨å·¥ä½œä¸­ï¼Œä¸€èˆ¬æ˜¯è¦è°ƒæ¥å£å»æŸ¥è¯¢æ•°æ®ï¼Œåœ¨æŸ¥è¯¢ä¹‹å‰ï¼Œéœ€è¦å°†mergeTabelArrç½®ä¸ºç©ºæ•°ç»„ï¼Œç„¶ååœ¨æ‰§è¡Œä¹‹åçš„æ“ä½œã€‚</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>mergeTabelArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// ...</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">  <span class="token selector"><span class="token class">.tableHeader</span> </span><span class="token punctuation">{</span>    <span class="token property">background</span><span class="token punctuation">:</span> red <span class="token important">!important</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h3 id="3ã€options-js-æ•°æ®æ¥æºæ–‡ä»¶"><a href="#3ã€options-js-æ•°æ®æ¥æºæ–‡ä»¶" class="headerlink" title="3ã€options.js æ•°æ®æ¥æºæ–‡ä»¶"></a>3ã€<code>options.js</code> æ•°æ®æ¥æºæ–‡ä»¶</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/** * è¡¨å¤´é…ç½® */</span><span class="token keyword">const</span> tableTitleData <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span>    minWidth<span class="token punctuation">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>    prop<span class="token punctuation">:</span> <span class="token string">'areaName'</span><span class="token punctuation">,</span>    label<span class="token punctuation">:</span> <span class="token string">'ç‰‡åŒº'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    minWidth<span class="token punctuation">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>    prop<span class="token punctuation">:</span> <span class="token string">'managementAreaName'</span><span class="token punctuation">,</span>    label<span class="token punctuation">:</span> <span class="token string">'çœåŒº'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    minWidth<span class="token punctuation">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>    prop<span class="token punctuation">:</span> <span class="token string">'centerName'</span><span class="token punctuation">,</span>    label<span class="token punctuation">:</span> <span class="token string">'å¸‚åŒº'</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">const</span> tableData <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'ä¸œåŒ—'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'é»‘é¾™æ±Ÿ'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'å“ˆå°”æ»¨å¸‚'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'ä¸œåŒ—'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'é»‘é¾™æ±Ÿ'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'é½é½å“ˆå°”å¸‚'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'ä¸œåŒ—'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'é»‘é¾™æ±Ÿ'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'é¹¤å²—å¸‚'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'ä¸œåŒ—'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'é»‘é¾™æ±Ÿ'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'ç‰¡ä¸¹æ±Ÿå¸‚'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'ä¸œåŒ—'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'é»‘é¾™æ±Ÿ'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'ä½³æœ¨æ–¯å¸‚'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'ä¸œåŒ—'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'é»‘é¾™æ±Ÿ'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'ç»¥åŒ–å¸‚'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'ä¸œåŒ—'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'å‰æ—'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'é•¿æ˜¥å¸‚'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'ä¸œåŒ—'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'å‰æ—'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'ç£çŸ³å¸‚'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'ä¸œåŒ—'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'å‰æ—'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'èˆ’å…°å¸‚'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'åä¸œ'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'é’æµ¦åŒº'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'åä¸œ'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'å¾æ±‡åŒº'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'åä¸œ'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'é»„æµ¦åŒº'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'åä¸œ'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'æµ¦ä¸œæ–°åŒº'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'åä¸œ'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'æ¾æ±ŸåŒº'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    areaName<span class="token punctuation">:</span> <span class="token string">'åä¸œ'</span><span class="token punctuation">,</span>    managementAreaName<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·'</span><span class="token punctuation">,</span>    centerName<span class="token punctuation">:</span> <span class="token string">'å˜‰å®šåŒº'</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token punctuation">{</span> tableTitleData<span class="token punctuation">,</span> tableData <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="4ã€å®Œæ•´-Table-åˆå¹¶ä»£ç -Demo"><a href="#4ã€å®Œæ•´-Table-åˆå¹¶ä»£ç -Demo" class="headerlink" title="4ã€å®Œæ•´ Table åˆå¹¶ä»£ç  Demo"></a>4ã€å®Œæ•´ Table åˆå¹¶ä»£ç  Demo</h3><p><a href="https://github.com/libing-cheer/merge-table" target="_blank" rel="noopener">Github Demo</a></p>]]></content>
      
      
      <categories>
          
          <category> è¡¨æ ¼åˆå¹¶ </category>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javascript </tag>
            
            <tag> è¡¨æ ¼åˆå¹¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javascriptå‰ç«¯åˆ†é¡µ</title>
      <link href="/2019/09/16/qian-duan-fen-ye/"/>
      <url>/2019/09/16/qian-duan-fen-ye/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€é€‚åˆæƒ…å½¢"><a href="#1ã€é€‚åˆæƒ…å½¢" class="headerlink" title="1ã€é€‚åˆæƒ…å½¢"></a>1ã€é€‚åˆæƒ…å½¢</h3><p>å‰ç«¯åˆ†é¡µä¸€èˆ¬ç”¨äºæ•°æ®é‡è¾ƒå°çš„æƒ…å†µï¼Œä¸€æ¬¡è¯·æ±‚æŠŠæ•°æ®å…¨éƒ¨ä»åç«¯è¯·æ±‚å›æ¥ã€‚</p><h3 id="2ã€å‰ç«¯åˆ†é¡µä¾‹å­"><a href="#2ã€å‰ç«¯åˆ†é¡µä¾‹å­" class="headerlink" title="2ã€å‰ç«¯åˆ†é¡µä¾‹å­"></a>2ã€å‰ç«¯åˆ†é¡µä¾‹å­</h3><p><a href="https://github.com/libing-cheer/front-end-paging" target="_blank" rel="noopener">å‰ç«¯åˆ†é¡µä»£ç ç¤ºä¾‹</a></p><pre class=" language-javascript"><code class="language-javascript">cd front<span class="token operator">-</span>end<span class="token operator">-</span>page                   è¿›å…¥front<span class="token operator">-</span>end<span class="token operator">-</span>page æ–‡ä»¶å¤¹ä¸‹npm install                         å®‰è£…ä¾èµ–npm run dev                         è¿è¡Œ</code></pre><h3 id="3ã€å®ç°å…³é”®"><a href="#3ã€å®ç°å…³é”®" class="headerlink" title="3ã€å®ç°å…³é”®"></a>3ã€å®ç°å…³é”®</h3><p>ä½¿ç”¨è®¡ç®—å±æ€§å¯¹è·å–çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå³<code>computed</code>ä¸­<code>frontEndPageChange</code>æ–¹æ³•ã€‚<code>el-table</code>ä¸­çš„<code>:data</code>ç»‘å®š<code>frontEndPageChange</code>ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>el<span class="token operator">-</span>table  <span class="token punctuation">:</span>data<span class="token operator">=</span><span class="token string">"frontEndPageChange"</span>  stripe  style<span class="token operator">=</span><span class="token string">"width: 1000px;margin:30px auto;"</span>  height<span class="token operator">=</span><span class="token string">"550"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">></span>computed<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">// è®¡ç®—å±æ€§å¯¹æ•°æ®è¿›è¡Œå¤„ç†</span><span class="token function">frontEndPageChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>currentPage <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>pageSize<span class="token punctuation">;</span>  <span class="token keyword">const</span> end <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>currentPage <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>pageSize<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tableData<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="4ã€vue-æ–‡ä»¶å®Œæ•´ä»£ç "><a href="#4ã€vue-æ–‡ä»¶å®Œæ•´ä»£ç " class="headerlink" title="4ã€vue æ–‡ä»¶å®Œæ•´ä»£ç "></a>4ã€<code>vue</code> æ–‡ä»¶å®Œæ•´ä»£ç </h3><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hello"</span><span class="token operator">></span>    <span class="token punctuation">{</span><span class="token punctuation">{</span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>table        <span class="token punctuation">:</span>data<span class="token operator">=</span><span class="token string">"frontEndPageChange"</span>        stripe        style<span class="token operator">=</span><span class="token string">"width: 1000px;margin:30px auto;"</span>        height<span class="token operator">=</span><span class="token string">"550"</span>      <span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column          prop<span class="token operator">=</span><span class="token string">"date"</span>          label<span class="token operator">=</span><span class="token string">"æ—¥æœŸ"</span>          width<span class="token operator">=</span><span class="token string">"100"</span>        <span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column          prop<span class="token operator">=</span><span class="token string">"name"</span>          label<span class="token operator">=</span><span class="token string">"å§“å"</span>          width<span class="token operator">=</span><span class="token string">"100"</span>        <span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column          prop<span class="token operator">=</span><span class="token string">"address"</span>          label<span class="token operator">=</span><span class="token string">"åœ°å€"</span>          width<span class="token operator">=</span><span class="token string">"190"</span>        <span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>        <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column          label<span class="token operator">=</span><span class="token string">"ä¸ªäººä¿¡æ¯"</span>          width<span class="token operator">=</span><span class="token string">"180"</span>          align<span class="token operator">=</span><span class="token string">"center"</span>        <span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column            prop<span class="token operator">=</span><span class="token string">"age"</span>            label<span class="token operator">=</span><span class="token string">"å¹´é¾„"</span>            align<span class="token operator">=</span><span class="token string">"center"</span>          <span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>          <span class="token operator">&lt;</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column            prop<span class="token operator">=</span><span class="token string">"height"</span>            label<span class="token operator">=</span><span class="token string">"èº«é«˜"</span>            align<span class="token operator">=</span><span class="token string">"center"</span>          <span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">-</span>column<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>table<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>el<span class="token operator">-</span>pagination            @size<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"handleSizeChange"</span>            @current<span class="token operator">-</span>change<span class="token operator">=</span><span class="token string">"handlePageChange"</span>            <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"z-pagination"</span>            <span class="token punctuation">:</span>current<span class="token operator">-</span>page<span class="token operator">=</span><span class="token string">"paginationOptions.currentPage"</span>            <span class="token punctuation">:</span>page<span class="token operator">-</span>size<span class="token operator">=</span><span class="token string">"paginationOptions.pageSize"</span>            <span class="token punctuation">:</span>page<span class="token operator">-</span>sizes<span class="token operator">=</span><span class="token string">"paginationOptions.pageSizes"</span>            layout<span class="token operator">=</span><span class="token string">"sizes, prev, pager, next, jumper,total"</span>            <span class="token punctuation">:</span>total<span class="token operator">=</span><span class="token string">"tableData.length"</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>pagination<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token comment" spellcheck="true">// æ•°æ®æ¥æº</span><span class="token keyword">import</span> <span class="token punctuation">{</span> tableData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./js/options'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  name<span class="token punctuation">:</span> <span class="token string">'frontEndPage'</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      msg<span class="token punctuation">:</span> <span class="token string">'å‰ç«¯åˆ†é¡µ'</span><span class="token punctuation">,</span>      paginationOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>        currentPage<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// å½“å‰é¡µ</span>        pageSize<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// å±•ç¤ºé¡µæ•°</span>        pageSizes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">// å¯é€‰æ‹©å±•ç¤ºé¡µæ•° æ•°ç»„</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      tableData<span class="token punctuation">,</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è®¡ç®—å±æ€§å¯¹æ•°æ®è¿›è¡Œå¤„ç†</span>    <span class="token function">frontEndPageChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>currentPage <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>pageSize<span class="token punctuation">;</span>      <span class="token keyword">const</span> end <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>currentPage <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>pageSize<span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tableData<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ”¹å˜åˆ†é¡µæ•°é‡</span>    <span class="token function">handleSizeChange</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>pageSize <span class="token operator">=</span> val<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// æ”¹å˜å½“å‰é¡µ</span>    <span class="token function">handlePageChange</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>paginationOptions<span class="token punctuation">.</span>currentPage <span class="token operator">=</span> val<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><h3 id="5ã€options-js-æ•°æ®æ¥æºæ–‡ä»¶"><a href="#5ã€options-js-æ•°æ®æ¥æºæ–‡ä»¶" class="headerlink" title="5ã€options.js æ•°æ®æ¥æºæ–‡ä»¶"></a>5ã€<code>options.js</code> æ•°æ®æ¥æºæ–‡ä»¶</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/** * è¡¨å¤´é…ç½® */</span><span class="token keyword">const</span> tableData <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-02'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'ç‹å°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1510 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-04'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'æå°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1511 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-01'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'å­™å°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1512 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-02'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'æœ±å°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1513 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-04'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'é’±å°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1514 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-01'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'æœå°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1515 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-03'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'èµµå°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1516 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-02'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'é™ˆå°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1510 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-04'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'å´å°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1511 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-01'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'å¾å°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1512 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-02'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'é»„å°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1513 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token string">'2016-05-04'</span><span class="token punctuation">,</span>    name<span class="token punctuation">:</span> <span class="token string">'ç§¦å°è™'</span><span class="token punctuation">,</span>    address<span class="token punctuation">:</span> <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1514 å¼„'</span><span class="token punctuation">,</span>    age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token string">'180cm'</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token punctuation">{</span> tableData <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯åˆ†é¡µ </category>
          
          <category> Javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯åˆ†é¡µ </tag>
            
            <tag> Javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6ä¹‹ async å‡½æ•°</title>
      <link href="/2019/09/05/es6-zhi-async-han-shu/"/>
      <url>/2019/09/05/es6-zhi-async-han-shu/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€å«ä¹‰"><a href="#1ã€å«ä¹‰" class="headerlink" title="1ã€å«ä¹‰"></a>1ã€å«ä¹‰</h3><hr><p>åœ¨<code>ES2017</code>æ ‡å‡†ä¸­å¼•å…¥äº†<code>async</code>å‡½æ•°ï¼Œä½¿å¾—ä¸€æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚<br>é‚£ä¹ˆ<code>async</code>å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿä¸€å¥è¯ï¼Œå®ƒå°±æ˜¯<code>Generator</code>å‡½æ•°çš„è¯­æ³•ç³–ã€‚<br>æœ‰ä¸€ä¸ª<code>Generator</code>å‡½æ•°å¦‚ä¸‹ï¼Œä¾æ¬¡è¯»å–ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> readFile <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>        fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> gen <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> f1 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/etc/fstab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> f2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/etc/shells'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>toString<span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f2<span class="token punctuation">.</span>toString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç çš„å‡½æ•°<code>gen</code>å¯ä»¥å†™æˆ<code>async</code>å‡½æ•°ï¼Œå°±æ˜¯ä¸‹é¢ ğŸ‘‡ è¿™æ ·ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> asyncReadFile <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> f1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/etc/fstab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> f2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/etc/shells'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f1<span class="token punctuation">.</span>toString<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f2<span class="token punctuation">.</span>toString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>ä¸€æ¯”è¾ƒå°±ä¼šå‘ç°ï¼Œ<code>async</code>å‡½æ•°å°±æ˜¯å°†<code>Generator</code>å‡½æ•°çš„ï¼ˆ<code>*</code>ï¼‰æ›¿æ¢æˆ<code>async</code>ï¼Œå°†<code>yield</code>æ›¿æ¢æˆ<code>await</code>ï¼Œä»…æ­¤è€Œå·²ã€‚<code>async</code>å‡½æ•°å¯¹<code>Generator</code>å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹ã€‚</p><ul><li>ï¼ˆ1ï¼‰å†…ç½®æ‰§è¡Œå™¨<br><code>Generator</code>å‡½æ•°çš„æ‰§è¡Œå¿…é¡»ä¾é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº†<code>co</code>æ¨¡å—ï¼Œè€Œ<code>async</code>å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>async</code>å‡½æ•°çš„æ‰§è¡Œï¼Œä¸æ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªè¦ä¸€è¡Œã€‚</li><li>ï¼ˆ2ï¼‰æ›´å¥½çš„è¯­ä¹‰<br><code>async</code>å’Œ<code>await</code>ï¼Œæ¯”èµ·æ˜Ÿå·å’Œ<code>yield</code>ï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚<code>async</code>è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œ<code>await</code>è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</li><li>ï¼ˆ3ï¼‰æ›´å¹¿çš„é€‚åº”æ€§<br><code>co</code>æ¨¡å—çº¦å®šï¼Œ<code>yield</code>å‘½ä»¤åé¢åªèƒ½æ˜¯<code>Thunk</code>å‡½æ•°æˆ–<code>Promise</code>å¯¹è±¡ï¼Œè€Œ<code>async</code>å‡½æ•°çš„<code>await</code>å‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯<code>Promise</code>å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†è¿™æ—¶ä¼šè‡ªåŠ¨è½¬æˆç«‹å³<code>resolved</code>çš„<code>Promise</code>å¯¹è±¡ï¼‰ã€‚</li><li>ï¼ˆ4ï¼‰è¿”å›ä¹‹æ˜¯<code>Promise</code><br><code>async</code>å‡½æ•°çš„è¿”å›å€¼æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œè¿™æ¯”<code>Generator</code>å‡½æ•°çš„è¿”å›å€¼<code>Iterator</code>å¯¹è±¡æ–¹ä¾¿å¤šäº†ã€‚ä½ å¯ä»¥ç”¨<code>then</code>æ–¹æ³•æŒ‡å®šä¸‹ä¸€æ­¥çš„æ“ä½œã€‚<br>è¿›ä¸€æ­¥è¯´ï¼Œ<code>async</code>å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œè€Œ<code>async</code>å‘½ä»¤å°±æ˜¯å†…éƒ¨<code>then</code>å‘½ä»¤çš„è¯­æ³•ç³–ã€‚</li></ul><hr><h3 id="2ã€åŸºæœ¬ç”¨æ³•"><a href="#2ã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="2ã€åŸºæœ¬ç”¨æ³•"></a>2ã€åŸºæœ¬ç”¨æ³•</h3><hr><p>ä½¿ç”¨<code>async</code>çš„å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>then</code>æ–¹æ³•æ·»åŠ å›æ‰å‡½æ•°ã€‚å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ°<code>await</code>å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“åé¢çš„è¯­å¥ã€‚<br>ä¸‹é¢ ğŸ‘‡ æ˜¯ä¸€ä¸ªä¾‹å­ ğŸŒ°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getStockPriceByName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> symbol <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getStockSymbol</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> stockPrice <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getStockPrice</span><span class="token punctuation">(</span>symbol<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">getStockPriceByName</span><span class="token punctuation">(</span><span class="token string">'good'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç æ˜¯ä¸€ä¸ªè·å–è‚¡ç¥¨æŠ¥ä»·çš„å‡½æ•°ï¼Œå‡½æ•°å‰é¢çš„<code>async</code>å…³é”®å­—ï¼Œè¡¨æ˜è¯¥å‡½æ•°å†…éƒ¨æœ‰å¼‚æ­¥æ“ä½œã€‚è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œä¼šç«‹å³è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ã€‚</p><p>ä¸‹é¢ ğŸ‘‡ æ˜¯å¦ä¸€ä¸ªä¾‹å­ ğŸŒ°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncPrint</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> ms<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> <span class="token function">timeout</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">asyncPrint</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç æŒ‡å®š<code>50</code>æ¯«ç§’åï¼Œè¾“å‡º<code>hello world</code>ã€‚</p><p>ç”±äº<code>async</code>å‡½æ•°è¿”å›çš„æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œå¯ä»¥ä½œä¸º<code>await</code>å‘½ä»¤çš„å‚æ•°ã€‚æ‰€ä»¥ï¼Œä¸Šé¢ ğŸ‘† çš„ä¾‹å­ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asyncPrint</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> ms<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> <span class="token function">timeout</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">asyncPrint</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä½¿ç”¨<code>async</code>å‡½æ•°çš„å¤šç§å½¢å¼ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// å‡½æ•°å£°æ˜</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å‡½æ•°è¡¨è¾¾å¼</span><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å¯¹è±¡çš„æ–¹æ³•</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token keyword">async</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">Storage</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// Class çš„æ–¹æ³•</span><span class="token keyword">class</span> <span class="token class-name">Storage</span> <span class="token punctuation">{</span>    constructor <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>catchPromise <span class="token operator">=</span> caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'avatars'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">async</span> <span class="token function">getAvatar</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> cache <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>catchProise<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">catch</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">'/avatars/${name}.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">const</span> storage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Storage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>storage<span class="token punctuation">.</span><span class="token function">getAvatar</span><span class="token punctuation">(</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ç®­å¤´å‡½æ•°</span><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="3ã€è¯­æ³•"><a href="#3ã€è¯­æ³•" class="headerlink" title="3ã€è¯­æ³•"></a>3ã€è¯­æ³•</h3><p>å…³äºè¯­æ³•ï¼Œ<code>async</code>å‡½æ•°çš„è¯­æ³•è§„åˆ™æ€»ä½“ä¸Šæ¯”è¾ƒç®€å•ï¼Œéš¾ç‚¹æ˜¯é”™è¯¯å¤„ç†æœºåˆ¶ã€‚</p><hr><h4 id="3-1ã€è¿”å›-Promise-å¯¹è±¡"><a href="#3-1ã€è¿”å›-Promise-å¯¹è±¡" class="headerlink" title="3.1ã€è¿”å› Promise å¯¹è±¡"></a>3.1ã€è¿”å› <code>Promise</code> å¯¹è±¡</h4><p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>async</code>å‡½æ•°è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ã€‚<br>è€Œä¸”<code>async</code>å‡½æ•°å†…éƒ¨<code>return</code>è¯­å¥è¿”å›çš„å€¼ï¼Œä¼šæˆä¸º<code>then</code>æ–¹æ³•å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// hello world</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå‡½æ•°<code>f</code>å†…éƒ¨<code>return</code>å‘½ä»¤è¿”å›çš„å€¼ï¼Œä¼šè¢«<code>then</code>æ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚<br>å‘½ä»¤<code>async</code>å‡½æ•°å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œä¼šå¯¼è‡´è¿”å›çš„<code>Promise</code>å¯¹è±¡å˜ä¸º<code>reject</code>çŠ¶æ€ã€‚æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ä¼šè¢«<code>catch</code>æ–¹æ³•å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> e<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Error: å‡ºé”™äº†</span></code></pre><hr><h4 id="3-2ã€Promise-å¯¹è±¡çš„çŠ¶æ€å˜åŒ–"><a href="#3-2ã€Promise-å¯¹è±¡çš„çŠ¶æ€å˜åŒ–" class="headerlink" title="3.2ã€Promise å¯¹è±¡çš„çŠ¶æ€å˜åŒ–"></a>3.2ã€<code>Promise</code> å¯¹è±¡çš„çŠ¶æ€å˜åŒ–</h4><p>å‘½ä»¤<code>async</code>å‡½æ•°è¿”å›çš„<code>Promise</code>å¯¹è±¡ï¼Œå¿…é¡»ç­‰åˆ°å†…éƒ¨æ‰€æœ‰<code>await</code>å‘½ä»¤åé¢çš„<code>Promise</code>å¯¹è±¡æ‰§è¡Œå®Œï¼Œæ‰ä¼šå‘ç”ŸçŠ¶æ€æ”¹å˜ï¼Œé™¤éé‡åˆ°<code>return</code>è¯­å¥æˆ–è€…æŠ›å‡ºé”™è¯¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰<code>async</code>å‡½æ•°å†…éƒ¨çš„å¼‚æ­¥æ“ä½œæ‰§è¡Œå®Œï¼Œæ‰ä¼šæ‰§è¡Œ<code>then</code>æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚</p><p>ä¸‹é¢ ğŸ‘‡ æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getTitle</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> html <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> html<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/&lt;title>([\s\S]+)&lt;\/title>/i</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token string">'http://es6.ruanyifeng.com/#docs/async#%E8%AF%AD%E6%B3%95'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>  res <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ECMAScript 6å…¥é—¨</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå‡½æ•°<code>getTitle</code>å†…éƒ¨æœ‰ä¸‰ä¸ªæ“ä½œï¼šæŠ“å–ç½‘é¡µã€å–å‡ºæ–‡æœ¬ã€åŒ¹é…é¡µé¢æ ‡é¢˜ã€‚åªæœ‰è¿™ä¸‰ä¸ªæ“ä½œå…¨éƒ¨å®Œæˆï¼Œæ‰ä¼šæ‰§è¡Œ<code>then</code>æ–¹æ³•é‡Œé¢çš„<code>console.log</code></p><hr><h4 id="3-3ã€await-å‘½ä»¤"><a href="#3-3ã€await-å‘½ä»¤" class="headerlink" title="3.3ã€await å‘½ä»¤"></a>3.3ã€<code>await</code> å‘½ä»¤</h4><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œè¿”å›è¯¥å¯¹è±¡çš„ç»“æœã€‚å¦‚æœä¸æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œå°±ç›´æ¥è¿”å›å¯¹åº”çš„å€¼ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// ç­‰åŒäº</span>  <span class="token comment" spellcheck="true">// return 123;</span>  <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œ<code>await</code>å‘½ä»¤çš„å‚æ•°æ˜¯æ•°å€¼<code>123</code>ï¼Œè¿™æ—¶ç­‰åŒäº<code>return 123</code>ã€‚<br>å¦ä¸€ç§æƒ…å†µæ˜¯ï¼Œ<code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª<code>thenable</code>å¯¹è±¡ï¼ˆå³å®šä¹‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œé‚£ä¹ˆ<code>await</code>ä¼šå°†å…¶ç­‰åŒäº<code>Promise</code>å¯¹è±¡ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Sleep</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>timeout <span class="token operator">=</span> timeout<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">resolve</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> sleepTime <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Sleep</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sleepTime<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 1000</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œ<code>await</code>å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª<code>Sleep</code>å¯¹è±¡çš„å®ä¾‹ã€‚è¿™ä¸ªå®ä¾‹ä¸æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œå› ä¸ºå®šä¹‰äº†<code>then</code>æ–¹æ³•ï¼Œ<code>await</code>ä¼šå°†å…¶è§†ä¸º<code>Promise</code>å¯¹è±¡å¤„ç†ã€‚<br>è¿™ä¸ªä¾‹å­è¿˜æ¼”ç¤ºäº†å¦‚ä½•å®ç°ä¼‘çœ æ•ˆæœã€‚<code>Javascript</code>ä¸€ç›´æ²¡æœ‰ä¼‘çœ çš„è¯­æ³•ï¼Œä½†æ˜¯å€ŸåŠ©<code>await</code>å‘½ä»¤å°±å¯ä»¥è®©ç¨‹åºåœé¡¿æŒ‡å®šçš„æ—¶é—´ã€‚ä¸‹é¢ç»™å‡ºäº†ä¸€ä¸ªç®€åŒ–çš„<code>sleep</code>å®ç°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> interval<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">one2FiveInAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">one2FiveInAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1 2 3 4 5</span></code></pre><p><code>await</code>å‘½ä»¤åçš„<code>Promise</code>å¯¹è±¡å¦‚æœå˜ä¸º<code>reject</code>çŠ¶æ€ï¼Œåˆ™<code>reject</code>çš„å‚æ•°ä¼šè¢«<code>catch</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°æ¥æ”¶åˆ°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å‡ºé”™äº†</span></code></pre><p>æ³¨æ„ï¼Œä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œ<code>await</code>è¯­å¥å‰é¢æ²¡æœ‰<code>return</code>ï¼Œä½†æ˜¯<code>reject</code>æ–¹æ³•çš„å‚æ•°ä¾ç„¶ä¼ å…¥äº†<code>catch</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°ã€‚è¿™é‡Œå¦‚æœåœ¨<code>await</code>å‘½ä»¤å‰é¢åŠ ä¸Š<code>return</code>ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><p>ä»»ä½•ä¸€ä¸ª<code>await</code>è¯­å¥åé¢çš„<code>Promise</code>å¯¹è±¡å˜ä¸º<code>reject</code>çŠ¶æ€ï¼Œé‚£ä¹ˆæ•´ä¸ª<code>async</code>å‡½æ•°éƒ½ä¼šä¸­æ–­æ‰§è¡Œã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¸ä¼šæ‰§è¡Œ</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œç¬¬äºŒä¸ª<code>await</code>è¯­å¥æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œå› ä¸ºç¬¬ä¸€ä¸ª<code>await</code>è¯­å¥çŠ¶æ€å˜æˆäº†<code>reject</code>ã€‚<br>æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å³ä½¿å‰ä¸€ä¸ªå¼‚æ­¥æ“ä½œå¤±è´¥ï¼Œä¹Ÿä¸è¦ä¸­æ–­åé¢çš„å¼‚æ­¥æ“ä½œã€‚è¿™æ—¶å¯ä»¥å°†ç¬¬ä¸€ä¸ª<code>await</code>æ”¾åœ¨<code>try...catch</code>ç»“æ„é‡Œé¢ï¼Œè¿™æ ·ä¸ç®¡è¿™ä¸ªå¼‚æ­¥æ“ä½œæ˜¯å¦æˆåŠŸï¼Œç¬¬äºŒä¸ªå¼‚æ­¥æ“ä½œéƒ½ä¼šæ‰§è¡Œã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// hello world</span></code></pre><p>å¦ä¸€ç§æ–¹æ³•æ˜¯<code>await</code>åé¢çš„<code>Promise</code>å¯¹è±¡å†è·Ÿä¸€ä¸ª<code>catch</code>æ–¹æ³•ï¼Œå¤„ç†å‰é¢å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å‡ºé”™äº†</span><span class="token comment" spellcheck="true">// hello world</span></code></pre><hr><h4 id="3-4ã€é”™è¯¯å¤„ç†"><a href="#3-4ã€é”™è¯¯å¤„ç†" class="headerlink" title="3.4ã€é”™è¯¯å¤„ç†"></a>3.4ã€é”™è¯¯å¤„ç†</h4><p>å¦‚æœ<code>await</code>åé¢çš„å¼‚æ­¥æ“ä½œå‡ºé”™ï¼Œé‚£ä¹ˆç­‰åŒäº<code>async</code>å‡½æ•°è¿”å›çš„<code>Promise</code>å¯¹è±¡è¢«<code>reject</code>ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Error: å‡ºé”™äº†</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œ<code>async</code>å‡½æ•°<code>f</code>æ‰§è¡Œåï¼Œ<code>await</code>åé¢çš„<code>Promise</code>å¯¹è±¡ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼Œå¯¼è‡´<code>catch</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œå®ƒçš„å‚æ•°å°±æ˜¯æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ã€‚å…·ä½“çš„æ‰§è¡Œæœºåˆ¶ï¼Œå¯ä»¥å‚è€ƒåæ–‡çš„<code>async å‡½æ•°çš„å®ç°åŸç†</code>ã€‚</p><p>é˜²æ­¢å‡ºé”™çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯å°†å…¶æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¹‹ä¸­ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'å‡ºé”™äº†'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å¦‚æœæœ‰å¤šä¸ª<code>await</code>å‘½ä»¤ï¼Œå¯ä»¥ç»Ÿä¸€æ”¾åœ¨<code>try...catch</code>ç»“æ„ä¸­ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> val1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">firstStep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> val2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">secondStep</span><span class="token punctuation">(</span>val1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> val3 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">thirdStep</span><span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Finalï¼š'</span> <span class="token operator">+</span> val3<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ä¸‹é¢ ğŸ‘‡ çš„ä¾‹å­ ğŸŒ° ä½¿ç”¨<code>try...catch</code>ç»“æ„ï¼Œå®ç°å¤šæ¬¡é‡å¤å°è¯•ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> superagent <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'superagent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> NUM_RETRIES <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> i<span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> NUM_RETRIES<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token keyword">await</span> superagent<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'http://google.com/this-throws-an-error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token punctuation">}</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 3</span><span class="token punctuation">}</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœ<code>await</code>æ“ä½œæˆåŠŸï¼Œå°±ä¼šä½¿ç”¨<code>break</code>è¯­å¥è·³å‡ºå¾ªç¯ â™»ï¸ï¼›å¦‚æœå¤±è´¥ï¼Œä¼šè¢«<code>catch</code>è¯­å¥æ•æ‰ï¼Œç„¶åè¿›å…¥ä¸‹ä¸€è½®å¾ªç¯ â™»ï¸ã€‚</p><hr><h4 id="3-5ã€ä½¿ç”¨æ³¨æ„ç‚¹"><a href="#3-5ã€ä½¿ç”¨æ³¨æ„ç‚¹" class="headerlink" title="3.5ã€ä½¿ç”¨æ³¨æ„ç‚¹"></a>3.5ã€ä½¿ç”¨æ³¨æ„ç‚¹</h4><p>ç¬¬ä¸€ç‚¹ï¼Œå‰é¢å·²ç»è¯´è¿‡ï¼Œ<code>await</code>å‘½ä»¤åé¢çš„<code>Promise</code>å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯<code>rejected</code>ï¼Œæ‰€ä»¥æœ€å¥½æŠŠ<code>await</code>å‘½ä»¤æ”¾åœ¨<code>try...catch</code>ä»£ç å—ä¸­ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token function">somethingThatReturnsAPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å¦ä¸€ç§å†™æ³•</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> <span class="token function">somethingThatReturnsAPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ç¬¬äºŒç‚¹ï¼Œå¤šä¸ª<code>await</code>å‘½ä»¤åé¢çš„å¼‚æ­¥æ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œæœ€å¥½è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œ<code>getFoo</code>å’Œ<code>getBar</code>æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å¼‚æ­¥æ“ä½œï¼ˆç›¸äº’ä¸ä¾èµ–ï¼‰ï¼Œè¢«å†™æˆç»§å‘å…³ç³»ã€‚è¿™æ ·æ¯”è¾ƒè€—æ—¶ï¼Œå› ä¸ºåªæœ‰<code>getFoo</code>å®Œæˆä¹‹åï¼Œæ‰ä¼šæ‰§è¡Œ<code>getBar</code>ï¼Œå®Œå…¨å¯ä»¥è®©å®ƒä»¬åŒæ—¶è§¦å‘ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// å†™æ³•ä¸€</span><span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">getFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å†™æ³•äºŒ</span><span class="token keyword">let</span> fooPromise <span class="token operator">=</span> <span class="token function">getFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> barPromise <span class="token operator">=</span> <span class="token function">getBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token keyword">await</span> fooPromise<span class="token punctuation">;</span><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token keyword">await</span> barPromise<span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä¸¤ç§å†™æ³•ï¼Œ<code>getFoo</code>å’Œ<code>getBar</code>éƒ½æ˜¯åŒæ—¶è§¦å‘ï¼Œè¿™æ ·å°±ä¼šç¼©çŸ­ç¨‹åºçš„æ‰§è¡Œæ—¶é—´ã€‚</p><p>ç¬¬ä¸‰ç‚¹ï¼Œ<code>await</code>å‘½ä»¤åªèƒ½ç”¨åœ¨<code>async</code>å‡½æ•°ä¹‹ä¸­ï¼Œå¦‚æœç”¨åœ¨æ™®é€šå‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">dbFuc</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> docs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  docs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// Uncaught SyntaxError: await is only valid in async function</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º<code>await</code>è¯­å¥ç”¨åœ¨æ™®é€šå‡½æ•°ä¹‹ä¸­äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†<code>forEach</code>æ–¹æ³•çš„å‚æ•°æ”¹æˆ<code>async</code>å‡½æ•°ï¼Œä¹Ÿæœ‰é—®é¢˜ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">dbFuc</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// è¿™é‡Œä¸éœ€è¦ async</span>  <span class="token keyword">let</span> docs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// å¯èƒ½å¾—åˆ°é”™è¯¯ç»“æœ</span>  docs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç å¯èƒ½ä¸ä¼šæ­£å¸¸å·¥ä½œï¼ŒåŸå› æ˜¯è¿™æ—¶ä¸‰ä¸ª<code>db.post</code>æ“ä½œå°†æ˜¯å¹¶å‘æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åŒæ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯ç»§å‘æ‰§è¡Œã€‚æ­£ç¡®çš„å†™æ³•æ˜¯é‡‡ç”¨<code>for</code>å¾ªç¯ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">dbFunc</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> docs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> doc <span class="token keyword">of</span> docs<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> db<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å¦‚æœç¡®å®å¸Œæœ›å¤šä¸ªè¯·æ±‚å¹¶å‘æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨<code>Promise.all</code>æ–¹æ³•ã€‚å½“ä¸‰ä¸ªè¯·æ±‚éƒ½ä¼š<code>resolved</code>æ—¶ï¼Œä¸‹é¢ä¸¤ç§å†™æ³•æ•ˆæœç›¸åŒã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">dbFuc</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> docs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> promise <span class="token operator">=</span> docs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>doc <span class="token operator">=</span><span class="token operator">></span> db<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> results <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„å†™æ³•</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">dbFuc</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> docs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> peomises <span class="token operator">=</span> docs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>doc <span class="token operator">=</span><span class="token operator">></span> db<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> promise <span class="token keyword">of</span> promises<span class="token punctuation">)</span> <span class="token punctuation">{</span>    results<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">await</span> promise<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="3-6ã€async-å‡½æ•°å¯ä»¥ä¿ç•™å †æ ˆ"><a href="#3-6ã€async-å‡½æ•°å¯ä»¥ä¿ç•™å †æ ˆ" class="headerlink" title="3.6ã€async å‡½æ•°å¯ä»¥ä¿ç•™å †æ ˆ"></a>3.6ã€<code>async</code> å‡½æ•°å¯ä»¥ä¿ç•™å †æ ˆ</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå‡½æ•°<code>a</code>å†…éƒ¨è¿è¡Œäº†ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡<code>b()</code>ã€‚å½“<code>b()</code>è¿è¡Œçš„æ—¶å€™ï¼Œå‡½æ•°<code>a</code>ä¸ä¼šä¸­æ–­ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œã€‚ç­‰åˆ°<code>b()</code>è¿è¡Œç»“æŸï¼Œå¯èƒ½<code>a()</code>æ—©å°±è¿è¡Œç»“æŸäº†ï¼Œ<code>b</code>æ‰€åœ¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒå·²ç»æ¶ˆå¤±äº†ã€‚å¦‚æœ<code>b()</code>æˆ–<code>c()</code>æŠ¥é”™ï¼Œé”™è¯¯å †æ ˆå°†ä¸åŒ…æ‹¬<code>a()</code>ã€‚</p><p>ç°åœ¨å°†è¿™ä¸ªä¾‹å­ ğŸŒ° æ”¹æˆ<code>await</code>å‡½æ•°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† çš„ä»£ç ä¸­ï¼Œ<code>b()</code>è¿è¡Œçš„æ—¶å€™ï¼Œ<code>a()</code>æ˜¯æš‚åœæ‰§è¡Œï¼Œä¸Šä¸‹æ–‡ç¯å¢ƒéƒ½ä¿å­˜ç€ã€‚ä¸€æ—¦<code>b()</code>æˆ–<code>c()</code>æŠ¥é”™ï¼Œé”™è¯¯å †æ ˆå°†åŒ…æ‹¬<code>a()</code>ã€‚</p><h3 id="4ã€async-å‡½æ•°çš„å®ç°åŸç†"><a href="#4ã€async-å‡½æ•°çš„å®ç°åŸç†" class="headerlink" title="4ã€async å‡½æ•°çš„å®ç°åŸç†"></a>4ã€<code>async</code> å‡½æ•°çš„å®ç°åŸç†</h3><p><code>async</code>å‡½æ•°çš„å®ç°åŸç†ï¼Œå°±æ˜¯å°†<code>Generator</code>å‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// ...</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ç­‰åŒäº</span><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ...</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æ‰€æœ‰çš„<code>async</code>å‡½æ•°éƒ½å¯ä»¥å†™æˆä¸Šé¢çš„ç¬¬äºŒç§å½¢å¼ï¼Œå…¶ä¸­çš„<code>spawn</code>å‡½æ•°å°±æ˜¯è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚<br>ä¸‹é¢ç»™å‡º<code>spawn</code>å‡½æ•°çš„å®ç°ï¼ŒåŸºæœ¬å°±æ˜¯å‰æ–‡è‡ªåŠ¨æ‰§è¡Œå™¨çš„ç¿»ç‰ˆã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">spawn</span><span class="token punctuation">(</span>genF<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> gen <span class="token operator">=</span> <span class="token function">genF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span>nextF<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> next<span class="token punctuation">;</span>      <span class="token keyword">try</span> <span class="token punctuation">{</span>        next <span class="token operator">=</span> <span class="token function">nextF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>next<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>        v <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        e <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token keyword">throw</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>undefined<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><hr><h3 id="5ã€ä¸å…¶ä»–å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ"><a href="#5ã€ä¸å…¶ä»–å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ" class="headerlink" title="5ã€ä¸å…¶ä»–å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ"></a>5ã€ä¸å…¶ä»–å¼‚æ­¥å¤„ç†æ–¹æ³•çš„æ¯”è¾ƒ</h3><p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥çœ‹<code>async</code>å‡½æ•°ä¸<code>Generator</code>ä¸<code>Promise</code>å‡½æ•°çš„æ¯”è¾ƒã€‚<br>å‡å®šæŸä¸ª<code>DOM</code>å…ƒç´ ä¸Šé¢ï¼Œéƒ¨ç½²äº†ä¸€ç³»åˆ—çš„åŠ¨ç”»ï¼Œå‰ä¸€ä¸ªåŠ¨ç”»ç»“æŸï¼Œæ‰èƒ½å¼€å§‹ä¸‹ä¸€ä¸ªã€‚å¦‚æœå½“ä¸­æœ‰ä¸€ä¸ªåŠ¨ç”»å‡ºé”™ï¼Œè¿”å›ä¸Šä¸€ä¸ªæˆåŠŸæ‰§è¡Œçš„åŠ¨ç”»çš„è¿”å›å€¼ã€‚</p><p>é¦–å…ˆæ˜¯<code>Promise</code>çš„å†™æ³•ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">chainAnimationsPromise</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> animations<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// å˜é‡ ret ç”¨æ¥ä¿å­˜ä¸Šä¸€ä¸ªåŠ¨ç”»çš„è¿”å›å€¼</span>  <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// æ–°å»ºä¸€ä¸ªç©ºçš„ Promise</span>  <span class="token keyword">let</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// ä½¿ç”¨ then æ–¹æ³•æ·»åŠ æ‰€æœ‰åŠ¨ç”»</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> anim <span class="token keyword">of</span> animations<span class="token punctuation">)</span> <span class="token punctuation">{</span>    p <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>val <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      ret <span class="token operator">=</span> val<span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token function">anim</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// è¿”å›ä¸€ä¸ªéƒ¨ç½²äº†é”™è¯¯æœºåˆ¶çš„ Promise</span>  <span class="token keyword">return</span> p    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">/*å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ*/</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è™½ç„¶<code>Promise</code>çš„å†™æ³•æ¯”å›è°ƒå‡½æ•°çš„å†™æ³•å¤§å¤§æ”¹è¿›ï¼Œä½†æ˜¯ä¸€çœ¼çœ‹ä¸Šå»ï¼Œä»£ç å®Œå…¨éƒ½æ˜¯<code>Promise</code>çš„<code>API</code>ï¼ˆ<code>then</code>ã€<code>catch</code>ç­‰ç­‰ï¼‰ï¼Œæ“ä½œæœ¬èº«çš„è¯­ä¹‰åè€Œä¸å®¹æ˜“çœ‹å‡ºæ¥ã€‚</p><p>æ¥ç€æ˜¯<code>Generator</code>å‡½æ•°çš„å†™æ³•ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">chainAnimationsGenerator</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> animations<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token function">spawn</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span>anim <span class="token keyword">of</span> animations<span class="token punctuation">)</span> <span class="token punctuation">{</span>        ret <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">anim</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">/*å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ*/</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä½¿ç”¨<code>Generator</code>å‡½æ•°éå†äº†æ¯ä¸ªåŠ¨ç”»ï¼Œè¯­ä¹‰æ¯”<code>Promise</code>å†™æ³•æ›´æ¸…æ™°ï¼Œç”¨æˆ·å®šä¹‰çš„æ“ä½œå…¨éƒ¨éƒ½å‡ºç°åœ¨<code>spawn</code>å‡½æ•°çš„å†…éƒ¨ã€‚è¿™ä¸ªå†™æ³•çš„é—®é¢˜åœ¨äºï¼Œå¿…é¡»æœ‰ä¸€ä¸ªä»»åŠ¡è¿è¡Œå™¨ï¼Œè‡ªåŠ¨æ‰§è¡Œ<code>Generator</code>å‡½æ•°ï¼Œä¸Šé¢çš„ä»£ç <code>spawn</code>å°±æ˜¯è‡ªåŠ¨æ‰§è¡Œå™¨ï¼Œå®ƒè¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œè€Œä¸”å¿…é¡»ä¿è¯<code>yield</code>è¯­å¥åé¢çš„è¡¨è¾¾å¼ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ª<code>Promise</code>ã€‚</p><p>æœ€åæ˜¯<code>async</code>å‡½æ•°çš„å†™æ³•ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">chainAnimationsAsync</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span> animations<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> anim <span class="token keyword">of</span> animations<span class="token punctuation">)</span> <span class="token punctuation">{</span>      ret <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">anim</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/*å¿½ç•¥é”™è¯¯ï¼Œç»§ç»­æ‰§è¡Œ*/</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>async</code></p><hr><p>æœ¬æ–‡å‚è€ƒæ¥æº <a href="http://es6.ruanyifeng.com/#docs/async" target="_blank" rel="noopener">é˜®ä¸€å³°åšå®¢ async</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
            <tag> async </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ES6ä¹‹ let å’Œ const å‘½ä»¤</title>
      <link href="/2019/08/30/es6-zhi-let-he-const/"/>
      <url>/2019/08/30/es6-zhi-let-he-const/</url>
      
        <content type="html"><![CDATA[<h2 id="ES6-ä¹‹-let-å’Œ-const-å‘½ä»¤"><a href="#ES6-ä¹‹-let-å’Œ-const-å‘½ä»¤" class="headerlink" title="ES6 ä¹‹ let å’Œ const å‘½ä»¤"></a>ES6 ä¹‹ let å’Œ const å‘½ä»¤</h2><hr><h3 id="1ã€let-å‘½ä»¤"><a href="#1ã€let-å‘½ä»¤" class="headerlink" title="1ã€let å‘½ä»¤"></a>1ã€let å‘½ä»¤</h3><hr><h4 id="1-1ã€åŸºæœ¬ç”¨æ³•"><a href="#1-1ã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="1.1ã€åŸºæœ¬ç”¨æ³•"></a>1.1ã€åŸºæœ¬ç”¨æ³•</h4><p>ES6 æ–°å¢äº†<code>let</code>å‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å˜é‡ã€‚å®ƒçš„ç”¨æ³•ç±»ä¼¼äº<code>var</code>ï¼Œä½†æ˜¯æ‰€å£°æ˜çš„å˜é‡ï¼Œåªåœ¨<code>let</code>å‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  a<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 10</span><span class="token punctuation">}</span>a<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Uncaught ReferenceError: a is not defined</span>b<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1</span></code></pre><p>ä¸Šé¢ä»£ç åœ¨ä»£ç å—ä¹‹ä¸­ï¼Œåˆ†åˆ«ç”¨<code>let</code>å’Œ<code>var</code>å£°æ˜äº†ä¸¤ä¸ªå˜é‡ã€‚ç„¶ååœ¨ä»£ç å—ä¹‹å¤–è°ƒç”¨è¿™ä¸¤ä¸ªå˜é‡ï¼Œç»“æœ<code>let</code>å£°æ˜çš„å˜é‡æŠ¥é”™ï¼Œ<code>var</code>å£°æ˜çš„å˜é‡è¿”å›äº†æ­£ç¡®çš„å€¼ã€‚è¿™è¡¨æ˜ï¼Œ<code>let</code>å£°æ˜çš„å˜é‡åªåœ¨å®ƒæ‰€åœ¨çš„ä»£ç å—å†…ç”Ÿæ•ˆã€‚</p><p>ç”¨<code>for</code>å¾ªç¯çš„è®¡æ•°å™¨ï¼Œå°±å¾ˆé€‚åˆä½¿ç”¨<code></code>let`å‘½ä»¤ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// ...</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError: i is not defined</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œè®¡æ•°å™¨<code>i</code>åªåœ¨<code>for</code>å¾ªç¯ä½“å†…æœ‰æ•ˆï¼Œåœ¨å¾ªç¯ä½“å¤–å¼•ç”¨å°±ä¼šæŠ¥é”™ã€‚</p><p>ä¸‹é¢ ğŸ‘‡ çš„ä»£ç å¦‚æœä½¿ç”¨<code>var</code>ï¼Œæœ€åè¾“å‡ºçš„æ˜¯<code>10</code>ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span>a<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 10</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå˜é‡<code>i</code>æ˜¯<code>var</code>å£°æ˜çš„ï¼Œåœ¨å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆï¼Œæ‰€ä»¥å…¨å±€åªæœ‰ä¸€ä¸ªå˜é‡<code>i</code>ã€‚æ¯ä¸€æ¬¡å¾ªç¯ï¼Œå˜é‡<code>i</code>çš„å€¼éƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè€Œå¾ªç¯å†…è¢«èµ‹ç»™æ•°ç»„<code>a</code>çš„å‡½æ•°å†…éƒ¨çš„<code>console.log(i)</code>ï¼Œé‡Œé¢çš„<code>i</code>æŒ‡å‘çš„å°±æ˜¯å…¨å±€çš„<code>i</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰æ•°ç»„<code>a</code>çš„é‡Œé¢æˆå‘˜çš„<code>i</code>ï¼ŒæŒ‡å‘çš„éƒ½æ˜¯åŒä¸€ä¸ª<code>i</code>ï¼Œå¯¼è‡´è¿è¡Œæ—¶è¾“å‡ºçš„æ˜¯æœ€åä¸€è½®çš„<code>i</code>çš„å€¼ï¼Œä¹Ÿå°±æ˜¯<code>10</code>ã€‚</p><p>å¦‚æœä½¿ç”¨<code>let</code>ï¼Œå£°æ˜çš„å˜é‡ä»…åœ¨å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œæœ€åè¾“å‡ºçš„æ˜¯<code>6</code>ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span>a<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 6</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå˜é‡<code>i</code>æ˜¯<code>let</code>å£°æ˜çš„ï¼Œå½“å‰çš„<code>i</code>åªåœ¨æœ¬è½®å¾ªç¯å†…æœ‰æ•ˆï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡å¾ªç¯çš„<code>i</code>å…¶å®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡æ‰€ä»¥å·¦åè¾“å‡ºçš„æ˜¯<code>6</code>ã€‚ä½ å¯èƒ½ä¼šé—®ï¼Œå¦‚æœæ¯ä¸€è½®å¾ªç¯çš„å˜é‡<code>i</code>éƒ½æ˜¯é‡æ–°å£°æ˜çš„ï¼Œé‚£å®ƒæ€ä¹ˆçŸ¥é“ä¸Šä¸€è½®å¾ªç¯çš„å€¼ï¼Œä»è€Œè®¡ç®—å‡ºæœ¬è½®å¾ªç¯çš„å€¼ï¼Ÿè¿™æ˜¯å› ä¸º<code>Javascript</code>å¼•æ“å†…éƒ¨ä¼šè®°ä½ä¸Šä¸€è½®å¾ªç¯çš„å€¼ï¼Œåˆå§‹åŒ–æœ¬è½®çš„å˜é‡<code>i</code>æ—¶ï¼Œå°±åœ¨ä¸Šä¸€è½®å¾ªç¯çš„åŸºç¡€ä¸Šè¿›è¡Œè®¡ç®—ã€‚</p><p>å¦å¤–ï¼Œ<code>for</code>å¾ªç¯è¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«ä¹‹å¤„ï¼Œå°±æ˜¯è®¾ç½®å¾ªç¯å˜é‡çš„é‚£éƒ¨åˆ†æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œè€Œå¾ªç¯ä½“å†…éƒ¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­ä½œç”¨åŸŸã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// abc</span><span class="token comment" spellcheck="true">// abc</span><span class="token comment" spellcheck="true">// abc</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç æ­£ç¡®è¿è¡Œï¼Œè¾“å‡ºäº†<code>3</code>æ¬¡<code>abc</code>ã€‚è¿™è¡¨æ˜å‡½æ•°å†…éƒ¨çš„å˜é‡<code>i</code>ä¸å¾ªç¯å˜é‡<code>i</code>ä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸï¼Œæœ‰å„è‡ªå•ç‹¬çš„ä½œç”¨åŸŸã€‚</p><hr><h4 id="1-2ã€ä¸å­˜åœ¨å˜é‡æå‡"><a href="#1-2ã€ä¸å­˜åœ¨å˜é‡æå‡" class="headerlink" title="1.2ã€ä¸å­˜åœ¨å˜é‡æå‡"></a>1.2ã€ä¸å­˜åœ¨å˜é‡æå‡</h4><p>ä½¿ç”¨<code>var</code>å‘½ä»¤ä¼šå‘ç”Ÿ<code>å˜é‡æå‡</code>ç°è±¡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œå€¼ä¸º<code>undefined</code>ã€‚è¿™ç§ç°è±¡å¤šå¤šå°‘å°‘æ˜¯æœ‰äº›å¥‡è‘©çš„ï¼ŒæŒ‰ç…§ä¸€èˆ¬çš„é€»è¾‘ï¼Œå˜é‡åº”è¯¥åœ¨è¯­å¥å£°æ˜ä¹‹åæ‰å¯ä»¥ä½¿ç”¨ã€‚</p><p>ä¸ºäº†çº æ­£è¿™ç§ç°è±¡ï¼Œ<code>let</code>å‘½ä»¤æ”¹å˜çš„äº†è¯­æ³•è¡Œä¸ºï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡ä¸€å®šè¦åœ¨å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ä½¿ç”¨ var çš„æƒ…å†µ</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// undefined</span><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä½¿ç”¨ let çš„æƒ…å†µ</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError: bar is not defined</span><span class="token keyword">let</span> bar <span class="token operator">=</span> <span class="token string">'bar'</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå˜é‡<code>foo</code>ç”¨<code>var</code>å£°æ˜ï¼Œä¼šå‘ç”Ÿå˜é‡æå‡ï¼Œå³è„šæœ¬å¼€å§‹è¿è¡Œæ—¶ï¼Œå˜é‡<code>foo</code>å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯æ²¡æœ‰å€¼ï¼Œæ‰€ä»¥ä¼šè¾“å‡º<code>undefined</code>ã€‚å˜é‡<code>bar</code>ç”¨<code>let</code>å£°æ˜ï¼Œä¸ä¼šå‘ç”Ÿå˜é‡æå‡ã€‚è¿™è¡¨æ˜åœ¨å£°æ˜å®ƒä¹‹å‰å˜é‡<code>bar</code>æ˜¯ä¸å­˜åœ¨çš„ï¼Œè¿™æ—¶å¦‚æœç”¨åˆ°å®ƒï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><hr><h4 id="1-3ã€æš‚æ—¶æ€§æ­»åŒº"><a href="#1-3ã€æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="1.3ã€æš‚æ—¶æ€§æ­»åŒº"></a>1.3ã€æš‚æ—¶æ€§æ­»åŒº</h4><p>åªè¦å—çº§ä½œç”¨åŸŸå†…å­˜åœ¨<code>let</code>å‘½ä»¤ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±ç»‘å®šï¼ˆbindingï¼‰è¿™ä¸ªåŒºåŸŸï¼Œä¸å†å—å¤–éƒ¨çš„å½±å“ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  temp <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError: Cannot access 'tmp' before initialization</span>  <span class="token keyword">let</span> temp<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­˜åœ¨å…¨å±€å˜é‡<code>temp</code>ï¼Œä½†æ˜¯å—çº§ä½œç”¨åŸŸå†…<code>let</code>åˆå£°æ˜äº†ä¸€ä¸ªå˜é‡<code>temp</code>ï¼Œå¯¼è‡´åè€…ç»‘å®šè¿™ä¸ªå—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥åœ¨<code>let</code>å£°æ˜å˜é‡å‰ï¼Œå¯¹<code>temp</code>èµ‹å€¼ä¼šæŠ¥é”™ã€‚</p><p><code>ES6</code>æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨<code>let</code>å’Œ<code>const</code>å‘½ä»¤ï¼Œè¿™ä¸ªåŒºå—å¯¹è¿™äº›å‘½ä»¤å£°æ˜çš„å˜é‡ï¼Œä»ä¸€å¼€å§‹å°±å½¢æˆäº†å°é—­ä½œç”¨åŸŸã€‚å‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±ä½¿ç”¨è¿™äº›å˜é‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚æ€»ä¹‹ï¼Œåœ¨ä»£ç å—å†…ï¼Œä½¿ç”¨<code>let</code>å‘½ä»¤å£°æ˜å˜é‡ä¹‹å‰ï¼Œæ”¹å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚è¿™åœ¨è¯­æ³•ä¸Šï¼Œæˆä¸ºâ€æš‚æ—¶æ€§æ­»åŒºâ€ï¼ˆtemporal dead zoneï¼Œç®€ç§° TDZï¼‰ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// TDZ å¼€å§‹</span>  temp <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError</span>  <span class="token keyword">let</span> temp<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// TDZ ç»“æŸ</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// undefined</span>  temp <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 123</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œåœ¨<code>let</code>å‘½ä»¤å£°æ˜å˜é‡<code>temp</code>ä¹‹å‰ï¼Œéƒ½å±äºå˜é‡<code>temp</code>çš„â€æ­»åŒºâ€ã€‚<br>â€œæš‚æ—¶æ€§æ­»åŒºâ€æ„å‘³ç€<code>typeof</code>ä¸å†æ˜¯ä¸€ä¸ªç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„æ“ä½œã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">typeof</span> x<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError</span><span class="token keyword">let</span> x<span class="token punctuation">;</span></code></pre><p>å£°æ˜ä»£ç ä¸­ï¼Œå˜é‡<code>x</code>ä½¿ç”¨<code>let</code>å‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥åœ¨å£°æ˜ä¹‹å‰ï¼Œéƒ½å±äº<code>x</code>çš„æ­»åŒºï¼Œåªè¦ç”¨åˆ°æ”¹å˜é‡å°±ä¼šæŠ¥é”™ã€‚å› æ­¤<code>typeof</code>å°±ä¼šæŠ›å‡ºä¸€ä¸ª<code>ReferenceError</code>ã€‚</p><p>ä½œä¸ºæ¯”è¾ƒï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ ¹æœ¬æ²¡æœ‰è¢«å£°æ˜ï¼Œä½¿ç”¨<code>typeof</code>åè€Œä¸ä¼šæŠ¥é”™ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">typeof</span> undeclared_variable<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// undefined</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œ<code>undeclared_variable</code>æ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡åï¼Œç»“æœè¿”å›â€<code>undefined</code>â€œã€‚æ‰€ä»¥ï¼Œåœ¨æ²¡æœ‰<code>let</code>ä¹‹å‰ï¼Œ<code>typeof</code>è¿ç®—ç¬¦æ˜¯ç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„ï¼Œæ°¸è¿œä¸ä¼šæŠ¥é”™ã€‚ç°åœ¨è¿™ä¸€ç‚¹ä¸æˆç«‹äº†ã€‚è¿™æ ·çš„è®¾è®¡æ˜¯ä¸ºäº†è®©å¤§å®¶å…»æˆè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œå˜é‡ä¸€å®šè¦åœ¨å£°æ˜ä¹‹åä½¿ç”¨ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚</p><p>æœ‰äº›â€æ­»åŒºâ€æ¯”è¾ƒéšè”½ï¼Œä¸å¤ªå®¹æ˜“å‘ç°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span>x <span class="token operator">=</span> y<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError: Cannot access 'y' before initialization</span></code></pre><p>å¦å¤–ï¼Œä¸‹é¢ ğŸ‘‡ çš„ä»£ç ä¹Ÿä¼šæŠ¥é”™ï¼Œä¸<code>var</code>çš„è¡Œä¸ºä¸åŒã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ä¸æŠ¥é”™</span><span class="token keyword">var</span> x <span class="token operator">=</span> x<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æŠ¥é”™ ReferenceErrorï¼šx is not defined</span><span class="token keyword">let</span> x <span class="token operator">=</span> x<span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç æŠ¥é”™ï¼Œæ˜¯å› ä¸ºå­˜åœ¨æš‚æ—¶æ€§æ­»åŒºã€‚ä½¿ç”¨<code>let</code>å£°æ˜å˜é‡æ—¶ï¼Œåªè¦å˜é‡è¿˜æ²¡æœ‰åœ¨å£°æ˜å®Œæˆå‰ä½¿ç”¨ï¼Œå°±ä¼šæŠ¥é”™ã€‚ä¸Šé¢è¿™è¡Œå°±å±äºè¿™ä¸ªæƒ…å†µï¼Œåœ¨å˜é‡<code>x</code>çš„å£°æ˜è¯­å¥è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæˆä¹‹å‰ï¼Œå°±å»å–<code>x</code>çš„å€¼ï¼Œå¯¼è‡´æŠ¥é”™â€<code>x æœªå®šä¹‰</code>â€œã€‚</p><p>åœ¨<code>ES6</code>ä¸­ï¼Œè§„å®šæš‚æ—¶æ€§æ­»åŒºå’Œ<code>let</code>ã€<code>const</code>è¯­å¥ä¸å‡ºç°å˜é‡æå‡ï¼Œä¸»è¦æ˜¯ä¸ºäº†å‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼Œé˜²æ­¢å˜é‡åœ¨å£°æ˜å‰å°±ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œä»è€Œå¯¼è‡´æ„æ–™ä¹‹å¤–çš„è¡Œä¸ºã€‚è¿™æ ·çš„é”™è¯¯åœ¨<code>ES5</code>æ˜¯å¾ˆå¸¸è§çš„ï¼Œç°åœ¨æœ‰äº†è¿™ç§è§„å®šï¼Œé¿å…æ­¤ç±»é”™è¯¯å°±å¾ˆå®¹æ˜“äº†ã€‚</p><p>æ€»ä¹‹ï¼Œæš‚æ—¶æ€§æ­»åŒºçš„æœ¬è´¨å°±æ˜¯ï¼Œåªè¦ä¸€è¿›å…¥å½“å‰ä½œç”¨åŸŸï¼Œæ‰€è¦ä½¿ç”¨çš„å˜é‡å°±å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸å¯è·å–ï¼Œåªæœ‰ç­‰åˆ°å£°æ˜å˜é‡çš„é‚£ä¸€è¡Œä»£ç å‡ºç°ï¼Œæ‰å¯ä»¥è·å–å’Œä½¿ç”¨æ”¹å˜é‡ã€‚</p><hr><h4 id="1-4ã€ä¸å…è®¸é‡å¤å£°æ˜"><a href="#1-4ã€ä¸å…è®¸é‡å¤å£°æ˜" class="headerlink" title="1.4ã€ä¸å…è®¸é‡å¤å£°æ˜"></a>1.4ã€ä¸å…è®¸é‡å¤å£°æ˜</h4><p>å‘½ä»¤<code>let</code>ä¸å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…ï¼Œé‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æŠ¥é”™</span><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// SyntaxError: Identifier 'a' has already been declared</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æŠ¥é”™</span><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// SyntaxError: Identifier 'a' has already been declared</span><span class="token punctuation">}</span></code></pre><p>å› æ­¤ï¼Œä¸èƒ½å†å‡½æ•°å†…éƒ¨é‡æ–°å£°æ˜å‚æ•°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æŠ¥é”™</span><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> arg<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// SyntaxErrorï¼šIdentifier 'arg' has already been declared</span><span class="token comment" spellcheck="true">// ä¸æŠ¥é”™</span><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">{</span>    <span class="token keyword">let</span> arg<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><hr><h3 id="2ã€å—çº§ä½œç”¨åŸŸ"><a href="#2ã€å—çº§ä½œç”¨åŸŸ" class="headerlink" title="2ã€å—çº§ä½œç”¨åŸŸ"></a>2ã€å—çº§ä½œç”¨åŸŸ</h3><hr><h4 id="2-1ã€ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸ"><a href="#2-1ã€ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸ" class="headerlink" title="2.1ã€ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸ"></a>2.1ã€ä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸ</h4><p>åœ¨<code>ES5</code>ä¸­ï¼Œåªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œè¿™ä¼šå¸¦æ¥å¾ˆå¤šä¸åˆç†çš„åœºæ™¯ã€‚<br>ç¬¬ä¸€ç§åœºæ™¯ï¼Œå†…å±‚å˜é‡å¯èƒ½ä¼šè¦†ç›–å¤–éƒ¨å˜é‡ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token string">'hello world'</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// undefined</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç çš„åŸæ„æ˜¯ï¼Œ<code>if</code>ä»£ç å—çš„å¤–éƒ¨ä½¿ç”¨çš„æ˜¯å¤–å±‚<code>temp</code>å˜é‡ï¼Œå†…éƒ¨ä½¿ç”¨çš„æ˜¯å†…å±‚çš„<code>temp</code>å˜é‡ã€‚ä½†æ˜¯ï¼Œå‡½æ•°<code>f()</code>æ‰§è¡Œåï¼Œè¾“å‡ºç»“æœä¸º<code>undefined</code>ï¼ŒåŸå› åœ¨äºå˜é‡æå‡ï¼Œå¯¼è‡´å†…å±‚çš„<code>temp</code>å˜é‡è¦†ç›–äº†å¤–å±‚çš„<code>temp</code>å˜é‡ã€‚</p><p>ç¬¬äºŒç§åœºæ™¯ï¼Œç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// h e l l o</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 5</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå˜é‡<code>i</code>åªç”¨æ¥æ§åˆ¶å¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯ç»“æŸåï¼Œå®ƒå¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œæ³„æ¼æˆäº†å…¨å±€å˜é‡ã€‚</p><hr><h4 id="2-2ã€ES6-çš„å—çº§ä½œç”¨åŸŸ"><a href="#2-2ã€ES6-çš„å—çº§ä½œç”¨åŸŸ" class="headerlink" title="2.2ã€ES6 çš„å—çº§ä½œç”¨åŸŸ"></a>2.2ã€ES6 çš„å—çº§ä½œç”¨åŸŸ</h4><p>å‘½ä»¤<code>let</code>å®é™…ä¸Šä¸º JavaScript æ–°å¢äº†å—çº§ä½œç”¨åŸŸã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 5</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† çš„çš„å‡½æ•°æœ‰ä¸¤ä¸ªä»£ç å—ï¼Œéƒ½å£°æ˜äº†å˜é‡<code>n</code>ï¼Œè¿è¡Œåè¾“å‡º<code>5</code>ã€‚è¿™è¡¨ç¤ºå¤–å±‚ä»£ç å—ä¸å—å†…å±‚ä»£ç å—çš„å½±å“ã€‚å¦‚æœä¸¤æ¬¡éƒ½ä½¿ç”¨<code>var</code>å®šä¹‰å˜é‡<code>n</code>ï¼Œæœ€åè¾“å‡ºçš„å€¼æ‰æ˜¯<code>10</code>ã€‚</p><p>åœ¨<code>ES6</code>ä¸­ï¼Œå…è®¸å—çº§ä½œç”¨åŸŸçš„ä»»æ„åµŒå¥—ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>  <span class="token punctuation">{</span>    <span class="token punctuation">{</span>      <span class="token punctuation">{</span>        <span class="token punctuation">{</span>          <span class="token keyword">let</span> insane <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>insane<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError: insane is not defined</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† çš„ä»£ç ä½¿ç”¨äº†ä¸€ä¸ªäº”å±‚çš„å—çº§ä½œç”¨åŸŸï¼Œæ¯ä¸€å±‚éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸã€‚ç¬¬å››å±‚ä½œç”¨åŸŸæ— æ³•è¯»å–ç¬¬äº”å±‚ä½œç”¨åŸŸçš„å†…éƒ¨å˜é‡ã€‚</p><p>å†…å±‚ä½œç”¨åŸŸå¯ä»¥å®šä¹‰å¤–å±‚ä½œç”¨åŸŸçš„åŒåå˜é‡ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>  <span class="token punctuation">{</span>    <span class="token punctuation">{</span>      <span class="token punctuation">{</span>        <span class="token keyword">let</span> insane <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>        <span class="token punctuation">{</span>          <span class="token keyword">let</span> insane <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>å—çº§ä½œç”¨åŸŸçš„å‡ºç°ï¼Œå®é™…ä¸Šä½¿å¾—å¹¿æ³›ä½¿ç”¨çš„åŒ¿åç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆ<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E5%87%BD%E6%95%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener">åŒ¿å IIFE</a>ï¼‰ä¸å†å¿…è¦äº†ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// IIFE å†™æ³•</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Barry'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>name<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError: name2 is not defined</span><span class="token comment" spellcheck="true">// å—çº§ä½œç”¨åŸŸå†™æ³•</span><span class="token punctuation">{</span>  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'Barry'</span><span class="token punctuation">;</span><span class="token punctuation">}</span>name<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ReferenceError: name2 is not defined</span></code></pre><hr><h4 id="2-3ã€å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜"><a href="#2-3ã€å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜" class="headerlink" title="2.3ã€å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜"></a>2.3ã€å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜</h4><p>å‡½æ•°èƒ½ä¸èƒ½åœ¨å‡½æ•°ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Ÿè¿™æ˜¯ä¸€ä¸ªç›¸å½“ä»¤äººæ··æ·†çš„é—®é¢˜ã€‚<br>åœ¨<code>ES5</code>ä¸­è§„å®šï¼Œå‡½æ•°åªèƒ½åœ¨é¡¶å±‚ä½œç”¨åŸŸå¥½å‡½æ•°ä½œç”¨åŸŸä¸­å£°æ˜ï¼Œä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸä¸­å£°æ˜ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æƒ…å†µä¸€</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æƒ…å†µäºŒ</span><span class="token keyword">try</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä¸¤ç§æƒ…å†µå£°æ˜ï¼Œæ ¹æ®<code>ES5</code>çš„è§„å®šéƒ½æ˜¯éæ³•çš„ã€‚</p><p>ä½†æ˜¯ï¼Œæµè§ˆå™¨æ²¡æœ‰éµå®ˆè¿™ä¸ªè§„å®šï¼Œä¸ºäº†å…¼å®¹ä»¥å‰çš„æ—§ä»£ç ï¼Œè¿˜æ˜¯æ”¯æŒåœ¨å—çº§ä½œç”¨åŸŸä¸­å£°æ˜å‡½æ•°ï¼Œå› æ­¤ä¸Šé¢ä¸¤ç§æƒ…å†µå®é™…éƒ½èƒ½è¿è¡Œï¼Œä¸ä¼šæŠ¥é”™ã€‚</p><p>åœ¨<code>ES6</code>ä¸­å¼•å…¥å—çº§ä½œç”¨åŸŸï¼Œæ˜ç¡®å…è®¸åœ¨å—çº§ä½œç”¨åŸŸä¸­å£°æ˜å‡½æ•°ã€‚<code>ES6</code>è§„å®šï¼Œå—çº§ä½œç”¨åŸŸä¹‹ä¸­ï¼Œå‡½æ•°å£°æ˜è¯­å¥çš„è¡Œä¸ºç±»ä¼¼äº<code>let</code>ï¼Œåœ¨å—çº§ä½œç”¨åŸŸä¹‹å¤–ä¸å¯å¼•ç”¨ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am outside'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•° f()</span>    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am inside'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç åœ¨<code>ES5</code>ä¸­è¿è¡Œï¼Œä¼šå¾—åˆ°â€I am insideâ€ï¼Œå› ä¸ºåœ¨<code>if</code>å†…å£°æ˜å‡½æ•°<code>f</code>ä¼šè¢«æå‡åˆ°å‡½æ•°å¤´éƒ¨ï¼Œå®é™…è¿è¡Œçš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ES5 ç¯å¢ƒ</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am outside'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am inside'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•° f()</span>  <span class="token punctuation">}</span>  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä½†åœ¨<code>ES6</code>ä¸­å°±å®Œå…¨ä¸ä¸€æ ·äº†ï¼Œç†è®ºä¸Šä¼šå¾—åˆ°â€I am outsideâ€ã€‚å› ä¸ºå—çº§ä½œç”¨åŸŸå†…å£°æ˜çš„å‡½æ•°ç±»ä¼¼äº<code>let</code>ï¼Œå¯¹ä½œç”¨åŸŸä¹‹å¤–æ²¡æœ‰å½±å“ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ çœŸçš„åœ¨<code>ES6</code>æµè§ˆå™¨ä¸­è¿è¡Œä¸€ä¸‹ä¸Šé¢ ğŸ‘† çš„ä»£ç ï¼Œæ˜¯ä¼šæŠ¥é”™çš„è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æµè§ˆå™¨çš„ ES6 ç¯å¢ƒ</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am outside'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•° f()</span>    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am inside'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Uncaught TypeError: f is not a function</span></code></pre><p>ä¸Šé¢ ğŸ‘† çš„ä»£ç åœ¨æµè§ˆå™¨ä¸­ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚</p><p>åŸæ¥ï¼Œå¦‚æœæ”¹å˜äº†å—çº§ä½œç”¨åŸŸå†…å£°æ˜çš„å‡½æ•°çš„å¤„ç†è§„åˆ™ï¼Œæ˜¾ç„¶ä¼šå¯¹è€ä»£ç äº§ç”Ÿå¾ˆå¤§çš„å½±å“ã€‚ä¸ºäº†å‡è½»å› æ­¤äº§ç”Ÿçš„ä¸å…¼å®¹é—®é¢˜ï¼Œ<code>ES6</code>åœ¨<a href="http://www.ecma-international.org/ecma-262/6.0/index.html#sec-block-level-function-declarations-web-legacy-compatibility-semantics" target="_blank" rel="noopener">é™„å½• B</a>é‡Œé¢è§„å®šï¼Œæµè§ˆå™¨çš„å®ç°å¯ä»¥ä¸éµå®ˆä¸Šé¢çš„è§„å®šï¼Œæœ‰è‡ªå·±çš„<a href="https://stackoverflow.com/questions/31419897/what-are-the-precise-semantics-of-block-level-functions-in-es6" target="_blank" rel="noopener">è¡Œä¸ºæ–¹å¼</a>ã€‚</p><ul><li>å…è®¸åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ã€‚</li><li>å‡½æ•°å£°æ˜ç±»ä¼¼äº<code>var</code>ï¼Œå³ä¼šæå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚</li><li>åŒæ—¶ï¼Œå‡½æ•°å£°æ˜è¿˜ä¼šæå‡åˆ°æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚</li></ul><p>æ³¨æ„ âš ï¸ï¼šä¸Šé¢ä¸‰æ¡è§„åˆ™åªå¯¹<code>ES6</code>çš„æµè§ˆå™¨å®ç°æœ‰æ•ˆï¼Œå…¶ä»–ç¯å¢ƒçš„å®ç°ä¸éµå®ˆï¼Œè¿˜æ˜¯å°†å—çº§ä½œç”¨åŸŸçš„å‡½æ•°å£°æ˜å½“ä½œ<code>let</code>å¤„ç†ã€‚</p><p>æ ¹æ®è¿™ä¸‰æ¡è§„åˆ™ï¼Œæµè§ˆå™¨çš„<code>ES6</code>ç¯å¢ƒä¸­ï¼Œå—çº§ä½œç”¨åŸŸå†…å£°æ˜çš„å‡½æ•°ï¼Œè¡Œä¸ºç±»ä¼¼äº<code>var</code>å£°æ˜çš„å˜é‡ã€‚ä¸Šé¢çš„ä¾‹å­å®é™…å…è®¸çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æµè§ˆå™¨çš„ ES6 ç¯å¢ƒ</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am outside'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> f <span class="token operator">=</span> undefined<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am inside'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Uncaught TypeError: f is not a function</span></code></pre><p>è€ƒè™‘åˆ°ç¯å¢ƒå¯¼è‡´çš„è¡Œä¸ºå·®å¼‚å¤ªå¤§ï¼Œåº”è¯¥é¿å…åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ã€‚å¦‚æœç¡®å®éœ€è¦ï¼Œä¹Ÿåº”è¯¥å†™æˆå‡½æ•°è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜è¯­å¥ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// å—çº§ä½œç”¨åŸŸå†…éƒ¨çš„å‡½æ•°å£°æ˜è¯­å¥ï¼Œå»ºè®®ä¸è¦ä½¿ç”¨ã€‚</span><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'secret'</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å—çº§ä½œç”¨åŸŸå†…éƒ¨ï¼Œä¼˜å…ˆä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼ã€‚</span><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'secret'</span><span class="token punctuation">;</span><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚<code>ES6</code>çš„å—çº§ä½œç”¨åŸŸå¿…é¡»æœ‰å¤§æ‹¬å·ï¼Œå¦‚æœæ²¡æœ‰å¤§æ‹¬å·ï¼Œ<code>JavaScript</code>å¼•æ“å°±è®¤ä¸ºä¸å­˜åœ¨å—çº§ä½œç”¨åŸŸã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ç¬¬ä¸€ç§å†™æ³• æŠ¥é”™</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Uncaught SyntaxError: Lexical declaration cannot appear in a single-statement context</span><span class="token comment" spellcheck="true">// ç¬¬äºŒç§å†™æ³• ä¸æŠ¥é”™</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œç¬¬ä¸€ç§å†™æ³•æ²¡æœ‰å¤§æ‹¬å·ï¼Œæ‰€ä»¥ä¸å­˜åœ¨å—çº§ä½œç”¨åŸŸï¼Œè€Œ<code>let</code>åªèƒ½å‡ºç°åœ¨å½“å‰ä½œç”¨åŸŸçš„é¡¶å±‚ï¼Œæ‰€ä»¥æŠ¥é”™ã€‚ç¬¬äºŒç§å†™æ³•æœ‰å¤§æ‹¬å·ï¼Œæ‰€ä»¥å—çº§ä½œç”¨åŸŸæˆç«‹ã€‚</p><p>å‡½æ•°å£°æ˜ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°åªèƒ½å£°æ˜åœ¨å½“å‰ä½œç”¨åŸŸçš„é¡¶å±‚ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ä¸æŠ¥é”™</span><span class="token string">'use strict'</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æŠ¥é”™</span><span class="token string">'use strict'</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// Uncaught SyntaxError: In strict mode code, functions can only be declared at top level or inside a block</span></code></pre><hr><h3 id="3ã€const-å‘½ä»¤"><a href="#3ã€const-å‘½ä»¤" class="headerlink" title="3ã€const å‘½ä»¤"></a>3ã€const å‘½ä»¤</h3><hr><h4 id="3-1ã€åŸºæœ¬ç”¨æ³•"><a href="#3-1ã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="3.1ã€åŸºæœ¬ç”¨æ³•"></a>3.1ã€åŸºæœ¬ç”¨æ³•</h4><p>å‘½ä»¤<code>const</code>å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> PI <span class="token operator">=</span> <span class="token number">3.1415</span><span class="token punctuation">;</span>PI<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 3.1415</span>PI <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Uncaught TypeError: Assignment to constant variable</span></code></pre><p>ä¸Šé¢ ğŸ‘† çš„ä»£ç è¡¨æ˜ï¼Œæ”¹å˜å¸¸é‡çš„å€¼ä¼šæŠ¥é”™ã€‚</p><p>å‘½ä»¤<code>const</code>å£°æ˜çš„å˜é‡ä¸å¾—æ”¹å˜å€¼ï¼Œè¿™æ„å‘³ç€ï¼Œ<code>const</code>ä¸€æ—¦å£°æ˜å˜é‡ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> foo<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// SyntaxError: Missing initializer in const declaration</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç è¡¨ç¤ºï¼Œå¯¹äº<code>const</code>æ¥è¯´ï¼Œåªå£°æ˜ä¸èµ‹å€¼ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p><p>å‘½ä»¤<code>const</code>çš„ä½œç”¨åŸŸä¸<code>let</code>ç›¸åŒï¼šåªåœ¨å£°æ˜æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> MAX <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token punctuation">}</span>MAX<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Uncaught ReferenceError: MAX is not defined</span></code></pre><p>å‘½ä»¤<code>const</code>å£°æ˜çš„å¸¸é‡ä¹Ÿæ˜¯ä¸æå‡ï¼ŒåŒæ ·å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œåªèƒ½åœ¨å£°æ˜çš„ä½ç½®åé¢ä½¿ç”¨ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>MAX<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> MAX <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// Uncaught ReferenceError: Cannot access 'MAX' before initialization</span><span class="token punctuation">}</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç åœ¨å¸¸é‡<code>MAX</code>å£°æ˜ä¹‹å‰å°±è°ƒç”¨ï¼Œç»“æœæŠ¥é”™ã€‚</p><p>å‘½ä»¤<code>const</code>å£°æ˜çš„å˜é‡ï¼Œä¹Ÿä¸<code>let</code>ä¸€æ ·ä¸å¯é‡å¤å£°æ˜ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">'Hello World'</span><span class="token punctuation">;</span><span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä»¥ä¸‹ä¸¤è¡Œéƒ½ä¼šæŠ¥é”™</span><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'Goodbye'</span><span class="token punctuation">;</span><span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// SyntaxError: Identifier 'message' has already been declared</span><span class="token comment" spellcheck="true">// SyntaxError: Identifier 'age' has already been declared</span></code></pre><hr><h4 id="3-2ã€æœ¬è´¨"><a href="#3-2ã€æœ¬è´¨" class="headerlink" title="3.2ã€æœ¬è´¨"></a>3.2ã€æœ¬è´¨</h4><p>å‘½ä»¤<code>const</code>å®é™…ä¸Šä¿è¯çš„ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„åªä¸å¾—æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹åŠ¨ã€‚å¯¹äºç®€å•çš„æ•°æ®ç±»å‹ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œå€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡ã€‚ä½†å¯¹äºå¤åˆç±»å‹çš„æ•°æ®ï¼ˆä¸»è¦æ˜¯å¯¹è±¡å’Œæ•°ç»„ï¼‰ï¼Œå˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œä¿å­˜çš„åªæ˜¯ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆï¼Œ<code>const</code>åªèƒ½ä¿è¯è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼ˆå³æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå›ºå®šçš„åœ°å€ï¼‰ï¼Œè‡³äºå®ƒæŒ‡å‘çš„æ•°æ®æœºæ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå°±å®Œå…¨ä¸èƒ½æ§åˆ¶äº†ã€‚å› æ­¤ï¼Œå°†ä¸€ä¸ªå¯¹è±¡å£°æ˜ä¸ºå¸¸é‡å¿…é¡»éå¸¸å°å¿ƒã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¸º foo æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥æˆåŠŸ</span>foo<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å°† foo æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šæŠ¥é”™</span>foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Uncaught TypeError: Assignment to constant variable</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå¸¸é‡<code>foo</code>å‚¨å­˜çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚ä¸å¯å˜çš„åªæ˜¯è¿™ä¸ªåœ°å€ï¼Œå³ä¸èƒ½æŠŠ<code>foo</code>æŒ‡å‘å¦ä¸€ä¸ªåœ°å€ï¼Œä½†å¯¹è±¡æœ¬èº«æ˜¯å¯å˜çš„ï¼Œæ‰€ä»¥ä¾ç„¶å¯ä»¥ä¸ºå…¶æ·»åŠ æ–°å±æ€§ã€‚</p><p>ä¸‹é¢ ğŸ‘‡ æ˜¯å¦ä¸€ä¸ªä¾‹å­ ğŸŒ°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¯æ‰§è¡Œ</span>a<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¯æ‰§è¡Œ</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Dave'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æŠ¥é”™ TypeError</span></code></pre><p>å¦‚æœçœŸçš„æƒ³å°†å¯¹è±¡å†»ç»“ï¼Œåº”è¯¥ä½¿ç”¨<code>Object.freeze</code>æ–¹æ³•ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> foo <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¸¸è§„æ¨¡å¼æ—¶ï¼Œä¸‹é¢ä¸€è¡Œä¸èµ·ä½œç”¨</span><span class="token comment" spellcheck="true">// ä¸¥æ ¼æ¨¡å¼æ—¶ï¼Œæ”¹è¡Œä¼šæŠ¥é”™</span>foo<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå¸¸é‡<code>foo</code>æŒ‡å‘ä¸€ä¸ªå†»ç»“çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ·»åŠ æ–°å±æ€§ä¸èµ·ä½œç”¨ï¼Œä¸¥æ ¼æ¨¡å¼æ—¶è¿˜ä¼šæŠ¥é”™<code>TypeError</code>ã€‚</p><p>é™¤äº†å°†å¯¹è±¡æœ¬èº«å†»ç»“ï¼Œå¯¹è±¡çš„å±æ€§ä¹Ÿåº”è¯¥å†»ç»“ã€‚ä¸‹é¢ ğŸ‘‡ æ˜¯ä¸€ä¸ªå°†å¯¹è±¡å½»åº•å†»ç»“çš„å‡½æ•°ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> constantize <span class="token operator">=</span> obj <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">foreach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">constanize</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><hr><h4 id="3-3ã€å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•"><a href="#3-3ã€å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•" class="headerlink" title="3.3ã€å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•"></a>3.3ã€å£°æ˜å˜é‡çš„å…­ç§æ–¹æ³•</h4><p>åœ¨<code>ES5</code>ä¸­åªæœ‰ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼š<code>var</code>å‘½ä»¤å’Œ<code>function</code>å‘½ä»¤ã€‚åœ¨<code>ES6</code>ä¸­ï¼Œé™¤äº†æ·»åŠ <code>let</code>å‘½ä»¤å’Œ<code>const</code>å‘½ä»¤å¤–ï¼Œè¿˜æœ‰<code>import</code>å‘½ä»¤å’Œ<code>class</code>å‘½ä»¤ã€‚æ‰€ä»¥<code>ES6</code>ä¸­ä¸€å…±æœ‰ 6 ä¸­å£°æ˜å˜é‡çš„æ–¹æ³•ã€‚</p><hr><h3 id="4ã€é¡¶å±‚å¯¹è±¡çš„å±æ€§"><a href="#4ã€é¡¶å±‚å¯¹è±¡çš„å±æ€§" class="headerlink" title="4ã€é¡¶å±‚å¯¹è±¡çš„å±æ€§"></a>4ã€é¡¶å±‚å¯¹è±¡çš„å±æ€§</h3><p>é¡¶å±‚å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæŒ‡çš„æ˜¯<code>window</code>å¯¹è±¡ï¼Œåœ¨<code>Node</code>æŒ‡çš„æ˜¯<code>global</code>å¯¹è±¡ã€‚<code>ES5</code>ä¹‹ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æ˜¯ç­‰ä»·çš„ã€‚</p><pre class=" language-javascript"><code class="language-javascript">window<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>a<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1</span>a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>window<span class="token punctuation">.</span>a<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 2</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§èµ‹å€¼ä¸å…¨å±€å˜é‡çš„èµ‹å€¼ï¼Œæ˜¯åŒä¸€ä»¶äº‹ã€‚</p><p>é¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å±æ€§æŒ‚é’©ï¼Œè¢«è®¤ä¸ºæ˜¯<code>JavaScript</code>è¯­è¨€æœ€å¤§çš„è®¾è®¡è´¥ç¬”ä¹‹ä¸€ã€‚è¿™æ ·çš„è®¾è®¡å¸¦æ¥äº†å‡ ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œé¦–å…ˆæ˜¯æ²¡æ³•åœ¨æœªç¼–è¯‘æ—¶å°±æŠ¥å‡ºå˜é‡æœªå£°æ˜çš„é”™è¯¯ï¼Œåªæœ‰è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“ï¼ˆå› ä¸ºå…¨å±€å˜é‡å¯èƒ½æ—¶é¡¶å±‚å¯¹è±¡çš„å±æ€§åˆ›é€ çš„ï¼Œè€Œå±æ€§çš„åˆ›é€ æ˜¯åŠ¨æ€çš„ï¼‰ï¼›å…¶æ¬¡ï¼Œç¨‹åºå‘˜å¾ˆå®¹æ˜“ä¸çŸ¥ä¸è§‰çš„å°±åˆ›å»ºäº†å…¨å±€å˜é‡ï¼ˆæ¯”å¦‚æ‰“å­—å‡ºé”™ï¼‰ï¼›æœ€åï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§æ˜¯åˆ°å¤„å¯ä»¥è¯»å†™çš„ï¼Œè¿™éå¸¸ä¸åˆ©äºæ¨¡å—åŒ–ç¼–ç¨‹ã€‚å¦ä¸€æ–¹é¢ï¼Œ<code>window</code>å¯¹è±¡æœ‰å®ä½“å«ä¹‰ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„çª—å£å¯¹è±¡ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯ä¸€ä¸ªæœ‰å®ä½“å«ä¹‰çš„å¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸åˆé€‚çš„ã€‚</p><p>å‘½ä»¤<code>ES6</code>ä¸ºäº†æ”¹å˜è¿™ä¸€ç‚¹ï¼Œä¸€æ–¹é¢è§„å®šï¼Œä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œ<code>var</code>å‘½ä»¤å’Œ<code>function</code>å‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼›å¦ä¸€æ–¹é¢è§„å®šï¼Œ<code>let</code>å‘½ä»¤ã€<code>const</code>å‘½ä»¤ã€<code>class</code>å‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»<code>ES6</code>å¼€å§‹ï¼Œå…¨å±€å˜é‡å°†é€æ¸ä¸é¡¶å±‚å¯¹è±¡è„±é’©ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// å¦‚æœåœ¨ Node çš„ REPL ç¯å¢ƒï¼Œå¯ä»¥å†™æˆ global.a</span><span class="token comment" spellcheck="true">// æˆ–è€…å†™æˆé€šç”¨æ–¹æ³•ï¼Œå†™æˆ this.a</span>window<span class="token punctuation">.</span>a<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1</span><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>window<span class="token punctuation">.</span>b<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// undefined</span></code></pre><p>ä¸Šé¢ ğŸ‘† ä»£ç ä¸­ï¼Œå…¨éƒ¨å˜é‡<code>a</code>ç”±<code>var</code>å‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒæ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ã€‚å…¨å±€å˜é‡<code>b</code>ç”±<code>let</code>å‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼Œæ‰€ä»¥è¿”å›<code>undefined</code>ã€‚</p><hr><h3 id="5ã€globalThis-å¯¹è±¡"><a href="#5ã€globalThis-å¯¹è±¡" class="headerlink" title="5ã€globalThis å¯¹è±¡"></a>5ã€globalThis å¯¹è±¡</h3><hr><p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>JavaScript</code>è¯­è¨€å­˜åœ¨ä¸€ä¸ªé¡¶å±‚å¯¹è±¡ï¼Œå®ƒæä¾›å…¨å±€ç¯å¢ƒï¼ˆå³å…¨å±€ä½œç”¨åŸŸï¼‰ï¼Œæ‰€æœ‰ä»£ç éƒ½æ˜¯åœ¨è¿™ä¸ªç¯å¢ƒä¸­è¿è¡Œã€‚ä½†æ˜¯ï¼Œé¡¶å±‚å¯¹è±¡åœ¨å„ç§å®ç°é‡Œé¢æ˜¯ä¸ç»Ÿä¸€çš„ã€‚</p><ul><li>æµè§ˆå™¨é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯<code>window</code>ï¼Œä½†<code>Node</code>ä¸<code>Web Worker</code>æ²¡æœ‰<code>window</code>ã€‚</li><li>æµè§ˆå™¨å’Œ<code>Web Worker</code>é‡Œé¢ï¼Œ<code>self</code>ä¹ŸæŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œä½†æ˜¯<code>Node</code>æ²¡æœ‰<code>self</code>ã€‚</li><li>åœ¨<code>Node</code>é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯<code>global</code>ï¼Œä½†å…¶ä»–ç¯å¢ƒéƒ½ä¸æ”¯æŒã€‚</li></ul><p>åŒä¸€æ®µä»£ç ä¸ºäº†ä¸ºäº†èƒ½å¤Ÿåœ¨å„ç§ç¯å¢ƒéƒ½èƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨<code>this</code>å˜é‡ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ã€‚</p><ul><li>å…¨å±€ç¯å¢ƒä¸­ï¼Œ<code>this</code>ä¼šè¿”å›é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯<code>Node</code>æ¨¡å—å’Œ<code>ES6</code>æ¨¡å—ä¸­ï¼Œ<code>this</code>è¿”å›çš„æ˜¯å½“å‰æ¨¡å—ã€‚</li><li>å‡½æ•°é‡Œé¢çš„<code>this</code>ï¼Œå¦‚æœå‡½æ•°ä¸æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿è¡Œï¼Œè€Œæ˜¯å•çº¯ä½œä¸ºå‡½æ•°è¿è¡Œï¼Œ<code>this</code>ä¼šæŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ—¶<code>this</code>ä¼šè¿”å›<code>undefined</code>ã€‚</li><li>ä¸ç®¡æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œè¿˜æ˜¯æ™®é€šæ¨¡å¼ï¼Œ<code>new Function(&#39;return this&#39;)()</code>æ€»æ˜¯ä¼šè¿”å›å…¨å±€å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæµè§ˆå™¨ç”¨äº†<code>CSP</code>ï¼ˆ<code>Content Security Policy</code>ï¼Œå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰ï¼Œé‚£ä¹ˆï¼Œ<code>eval</code>ã€<code>new Function</code>è¿™äº›æ–¹æ³•éƒ½å¯èƒ½æ— æ³•ä½¿ç”¨ã€‚</li></ul><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¾ˆéš¾æ‰¾åˆ°ä¸€å‘¨å¯ä»¥åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œéƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ã€‚ä¸‹é¢ ğŸ‘‡ æ˜¯ä¸¤ç§å‹‰å¼ºå¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æ–¹æ³•ä¸€</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span>  <span class="token operator">?</span> window  <span class="token punctuation">:</span> <span class="token keyword">typeof</span> process <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span>    <span class="token keyword">typeof</span> require <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span>    <span class="token keyword">typeof</span> global <span class="token operator">===</span> <span class="token string">'object'</span>  <span class="token operator">?</span> global  <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// æ–¹æ³•äºŒ</span><span class="token keyword">var</span> getGlobal <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> self<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> window<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> global <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> global<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'unable locate global object'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>ç°æœ‰ä¸€ä¸ª<a href="https://github.com/tc39/proposal-global" target="_blank" rel="noopener">ææ¡ˆ</a>ï¼Œåœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ï¼Œå¼•å…¥<code>globalThis</code>ä½œä¸ºé¡¶å±‚å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä½•ç¯å¢ƒä¸‹ï¼Œ<code>globalThis</code>éƒ½æ˜¯å­˜åœ¨çš„ï¼Œéƒ½å¯ä»¥ä»å®ƒæ‹¿åˆ°é¡¶å±‚å¯¹è±¡ï¼ŒæŒ‡å‘å…¨å±€ç¯å¢ƒä¸‹çš„<code>this</code>ã€‚</p><p>å«ç‰‡åº“<code>global-this</code>æ¨¡æ‹Ÿäº†è¿™ä¸ªææ¡ˆï¼Œå¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒæ‹¿åˆ°<code>globalThis</code>ã€‚</p><hr><p>æœ¬æ–‡å‚è€ƒæ¥æº <a href="http://es6.ruanyifeng.com/#docs/let" target="_blank" rel="noopener">é˜®ä¸€å³°åšå®¢ let&amp;&amp;const</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> ES6 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ES6 </tag>
            
            <tag> let </tag>
            
            <tag> const </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå›½é™…åŒ–   vue-i18n</title>
      <link href="/2019/07/11/vue-guo-ji-hua-vue-i18n-de-shi-yong/"/>
      <url>/2019/07/11/vue-guo-ji-hua-vue-i18n-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€ç¤ºä¾‹"><a href="#ä¸€ã€ç¤ºä¾‹" class="headerlink" title="ä¸€ã€ç¤ºä¾‹"></a>ä¸€ã€ç¤ºä¾‹</h3><p><a href="https://github.com/libing-cheer/vue-international-i18n" target="_blank" rel="noopener">demo ä»£ç ç¤ºä¾‹</a></p><p>ä»£ç ä¸‹è½½åè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå³å¯è·‘èµ·æ¥çœ‹åˆ°æ•ˆæœã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> run serve</code></pre><h3 id="äºŒã€ç›®å½•ç»“æ„"><a href="#äºŒã€ç›®å½•ç»“æ„" class="headerlink" title="äºŒã€ç›®å½•ç»“æ„"></a>äºŒã€ç›®å½•ç»“æ„</h3><ul><li>ğŸ“src @æ ¹<ul><li>ğŸ“assets é™æ€èµ„æºç›®å½•<ul><li>ğŸ“common å­—ä½“åº“</li><li>ğŸ“„cn.js ä¸­æ–‡å­—ä½“åº“</li><li>ğŸ“„en.js è‹±æ–‡å­—ä½“åº“</li><li>ğŸ“„fa.js æ³•è¯­å­—ä½“åº“</li><li>ğŸ“„ft.js ä¸­æ–‡ç¹ä½“å­—ä½“åº“</li><li>img</li><li>cn.png ä¸­æ–‡é¢„è§ˆæ•ˆæœå›¾</li><li>en.png è‹±æ–‡é¢„è§ˆæ•ˆæœå›¾</li><li>fa.png æ³•è¯­é¢„è§ˆæ•ˆæœå›¾</li><li>ft.png ä¸­æ–‡ç¹ä½“é¢„è§ˆæ•ˆæœå›¾</li></ul></li><li>ğŸ“components ç»„ä»¶<ul><li>ğŸ“„vue-international-i18n.vue å±•ç¤ºåˆ‡æ¢è¯­è¨€ç»„ä»¶</li></ul></li><li>ğŸ“„App.vue å…¥å£æ¨¡ç‰ˆ</li><li>ğŸ“„main.js å…¥å£ä¸»å‡½æ•°</li></ul></li></ul><h3 id="ä¸‰ã€vue-i18n-çš„ä½¿ç”¨"><a href="#ä¸‰ã€vue-i18n-çš„ä½¿ç”¨" class="headerlink" title="ä¸‰ã€vue-i18n çš„ä½¿ç”¨"></a>ä¸‰ã€vue-i18n çš„ä½¿ç”¨</h3><h4 id="1ã€å®‰è£…ä¾èµ–"><a href="#1ã€å®‰è£…ä¾èµ–" class="headerlink" title="1ã€å®‰è£…ä¾èµ–"></a>1ã€å®‰è£…ä¾èµ–</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> vue-i18n</code></pre><p>ä¹Ÿå¯ä»¥è¿™æ ·</p><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/vue/dist/vue.js"</span><span class="token operator">></span><span class="token operator">&lt;</span>/script<span class="token operator">></span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/vue-i18n/dist/vue-i18n.js"</span><span class="token operator">></span><span class="token operator">&lt;</span>/script<span class="token operator">></span></code></pre><h4 id="2ã€å…¥å£æ–‡ä»¶-main-js-é…ç½®"><a href="#2ã€å…¥å£æ–‡ä»¶-main-js-é…ç½®" class="headerlink" title="2ã€å…¥å£æ–‡ä»¶ main.js é…ç½®"></a>2ã€å…¥å£æ–‡ä»¶ main.js é…ç½®</h4><p>åœ¨ å…¥å£æ–‡ä»¶ <code>main.js</code> ä¸­å¼•ç”¨, <code>demo</code> ç”¨äº† <code>elementUI</code> çš„ç»„ä»¶ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå…¨å±€å¼•ç”¨äº† <code>element-ui</code> ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> VueI18n <span class="token keyword">from</span> <span class="token string">'vue-i18n'</span><span class="token punctuation">;</span><span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">'element-ui/lib/theme-chalk/index.css'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*---------æŒ‚è½½å…¨å±€ä½¿ç”¨-----------*/</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueI18n<span class="token punctuation">)</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*---------åŸºæœ¬ä½¿ç”¨-----------*/</span><span class="token comment" spellcheck="true">// </span><span class="token comment" spellcheck="true">/*---------ä½¿ç”¨è¯­è¨€åŒ…-----------*/</span><span class="token keyword">const</span> i18n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueI18n</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  locale<span class="token punctuation">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// è¯­è¨€æ ‡è¯†</span>  messages<span class="token punctuation">:</span> <span class="token punctuation">{</span>    <span class="token string">'zh-CN'</span><span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./assets/common/cn'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// ä¸­æ–‡è¯­è¨€åŒ…</span>    <span class="token string">'zh-EN'</span><span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./assets/common/en'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// è‹±æ–‡è¯­è¨€åŒ…</span>    <span class="token string">'zh-FA'</span><span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./assets/common/fa'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// æ³•è¯­è¯­è¨€åŒ…</span>    <span class="token string">'zh-FT'</span><span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./assets/common/ft'</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// ç¹ä½“å­—è¯­è¨€åŒ…</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  i18n<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// è¿™é‡Œä¸è¦å¿˜è®°å“¦ï¼</span>  render<span class="token punctuation">:</span> h <span class="token operator">=</span><span class="token operator">></span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="3ã€è¯­è¨€åŒ…ç¤ºä¾‹"><a href="#3ã€è¯­è¨€åŒ…ç¤ºä¾‹" class="headerlink" title="3ã€è¯­è¨€åŒ…ç¤ºä¾‹"></a>3ã€è¯­è¨€åŒ…ç¤ºä¾‹</h4><p>è¯­è¨€åŒ…æ˜¯è‡ªå·±å®šä¹‰çš„ <code>js</code> æ–‡ä»¶ï¼Œä»¥ä¸­æ–‡ <code>cn.js</code> å’Œ è‹±æ–‡ <code>en.js</code> ä¸ºä¾‹ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//  cn.js</span><span class="token keyword">export</span> <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>    music<span class="token punctuation">:</span> <span class="token string">'ç½‘æ˜“äº‘éŸ³ä¹'</span><span class="token punctuation">,</span>    findMusic<span class="token punctuation">:</span> <span class="token string">'å‘ç°éŸ³ä¹'</span><span class="token punctuation">,</span>    myMusic<span class="token punctuation">:</span> <span class="token string">'æˆ‘çš„éŸ³ä¹'</span><span class="token punctuation">,</span>    friend<span class="token punctuation">:</span> <span class="token string">'æœ‹å‹'</span><span class="token punctuation">,</span>    musician<span class="token punctuation">:</span> <span class="token string">'éŸ³ä¹äºº'</span><span class="token punctuation">,</span>    download<span class="token punctuation">:</span> <span class="token string">'ä¸‹è½½å®¢æˆ·ç«¯'</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//  en.js</span><span class="token keyword">export</span> <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token punctuation">{</span>    music<span class="token punctuation">:</span> <span class="token string">'Music'</span><span class="token punctuation">,</span>    findMusic<span class="token punctuation">:</span> <span class="token string">'FIND MUSIC'</span><span class="token punctuation">,</span>    myMusic<span class="token punctuation">:</span> <span class="token string">'MY MUSIC'</span><span class="token punctuation">,</span>    friend<span class="token punctuation">:</span> <span class="token string">'FRIEND'</span><span class="token punctuation">,</span>    musician<span class="token punctuation">:</span> <span class="token string">'MUSICIAN'</span><span class="token punctuation">,</span>    download<span class="token punctuation">:</span> <span class="token string">'DOWNLOAD'</span><span class="token punctuation">}</span></code></pre><h4 id="4ã€vue-international-i18n-vue-æ–‡ä»¶"><a href="#4ã€vue-international-i18n-vue-æ–‡ä»¶" class="headerlink" title="4ã€vue-international-i18n.vue æ–‡ä»¶"></a>4ã€vue-international-i18n.vue æ–‡ä»¶</h4><p><code>changeLangEvent</code> äº‹ä»¶å®ç°è¯­è¨€åˆ‡æ¢ï¼›é‡ç‚¹åœ¨äºâ€å…³é”®è¯­å¥â€ï¼š<code>this.\$i18n.locale</code>ï¼š<br>å½“èµ‹å€¼ä¸ºâ€<code>zh-CN</code>â€œæ—¶ï¼Œå¯¼èˆªæ å°±å˜æˆä¸­æ–‡ï¼›<br>å½“èµ‹å€¼ä¸º â€œ<code>zh-EN</code>â€œæ—¶ï¼Œå¯¼èˆªæ å°±å˜æˆè‹±æ–‡ï¼›<br>å½“èµ‹å€¼ä¸ºâ€<code>zh-FA</code>â€œæ—¶ï¼Œå¯¼èˆªæ å°±å˜æˆæ³•è¯­ï¼›<br>å½“èµ‹å€¼ä¸ºâ€<code>zh-FT</code>â€œæ—¶ï¼Œå¯¼èˆªæ å°±å˜æˆä¸­æ–‡ç¹ä½“ã€‚</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>international<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- åˆ‡æ¢è¯­è¨€ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>language<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-select</span>        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>value<span class="token punctuation">"</span></span>        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>è¯·é€‰æ‹©<span class="token punctuation">"</span></span>        <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>changeLangEvent(value)<span class="token punctuation">"</span></span>      <span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-option</span>          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(item, index) in options<span class="token punctuation">"</span></span>          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>          <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item.label<span class="token punctuation">"</span></span>          <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item.value<span class="token punctuation">"</span></span>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-option</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-select</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!-- tabsæ ‡ç­¾é¡µ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tabs<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>activeName<span class="token punctuation">"</span></span> <span class="token attr-name">@tab-click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>handleClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tab-pane</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>message.music<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>first<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          {{$t('message.music')}}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tab-pane</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tab-pane</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>message.findMusic<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>second<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          {{$t('message.findMusic')}}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tab-pane</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tab-pane</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>message.myMusic<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>third<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          {{$t('message.myMusic')}}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tab-pane</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tab-pane</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>message.friend<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fourth<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          {{$t('message.friend')}}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tab-pane</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tab-pane</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>message.musician<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fivth<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          {{$t('message.musician')}}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tab-pane</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tab-pane</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>message.download<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sixth<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>          {{$t('message.download')}}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tab-pane</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tabs</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">'vueInternationalI18n'</span><span class="token punctuation">,</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        value<span class="token punctuation">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>        lang<span class="token punctuation">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>        activeName<span class="token punctuation">:</span> <span class="token string">'first'</span><span class="token punctuation">,</span>        options<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            value<span class="token punctuation">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>            label<span class="token punctuation">:</span> <span class="token string">'ä¸­æ–‡'</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            value<span class="token punctuation">:</span> <span class="token string">'zh-EN'</span><span class="token punctuation">,</span>            label<span class="token punctuation">:</span> <span class="token string">'è‹±æ–‡'</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            value<span class="token punctuation">:</span> <span class="token string">'zh-FA'</span><span class="token punctuation">,</span>            label<span class="token punctuation">:</span> <span class="token string">'æ³•è¯­'</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            value<span class="token punctuation">:</span> <span class="token string">'zh-FT'</span><span class="token punctuation">,</span>            label<span class="token punctuation">:</span> <span class="token string">'ç¹ä½“'</span>          <span class="token punctuation">}</span>        <span class="token punctuation">]</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">// åˆ‡æ¢è¯­è¨€</span>      <span class="token function">changeLangEvent</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">case</span> <span class="token string">'zh-CN'</span><span class="token punctuation">:</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>lang <span class="token operator">=</span> value<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$i18n<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lang<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å…³é”®è¯­å¥</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">case</span> <span class="token string">'zh-EN'</span><span class="token punctuation">:</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>lang <span class="token operator">=</span> value<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$i18n<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lang<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å…³é”®è¯­å¥</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">case</span> <span class="token string">'zh-FA'</span><span class="token punctuation">:</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>lang <span class="token operator">=</span> value<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$i18n<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lang<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å…³é”®è¯­å¥</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">case</span> <span class="token string">'zh-FT'</span><span class="token punctuation">:</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>lang <span class="token operator">=</span> value<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$i18n<span class="token punctuation">.</span>locale <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lang<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å…³é”®è¯­å¥</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">default</span><span class="token punctuation">:</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">  <span class="token selector"><span class="token class">.international</span> </span><span class="token punctuation">{</span>    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">75</span>vw<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token selector"><span class="token class">.language</span> </span><span class="token punctuation">{</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">12.5</span>vw<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> <span class="token number">20000000</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token selector"><span class="token class">.tabs</span> </span><span class="token punctuation">{</span>    <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">15</span>px<span class="token punctuation">;</span>  <span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><h3 id="å››ã€vue-i18n-æ•°æ®æ¸²æŸ“çš„æ¨¡æ¿è¯­æ³•"><a href="#å››ã€vue-i18n-æ•°æ®æ¸²æŸ“çš„æ¨¡æ¿è¯­æ³•" class="headerlink" title="å››ã€vue-i18n æ•°æ®æ¸²æŸ“çš„æ¨¡æ¿è¯­æ³•"></a>å››ã€vue-i18n æ•°æ®æ¸²æŸ“çš„æ¨¡æ¿è¯­æ³•</h3><pre class=" language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!-- v-text å½¢å¼ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>$t(<span class="token punctuation">'</span>m.music<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- {{}} å½¢å¼ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>{{$t('m.music')}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h3 id="äº”ã€æ•ˆæœé¢„è§ˆ"><a href="#äº”ã€æ•ˆæœé¢„è§ˆ" class="headerlink" title="äº”ã€æ•ˆæœé¢„è§ˆ"></a>äº”ã€æ•ˆæœé¢„è§ˆ</h3><p><img src="https://raw.githubusercontent.com/libing-cheer/vue-international-i18n/master/src/assets/img/cn.png" alt="ä¸­æ–‡"><br><img src="https://raw.githubusercontent.com/libing-cheer/vue-international-i18n/master/src/assets/img/en.png" alt="è‹±æ–‡"><br><img src="https://raw.githubusercontent.com/libing-cheer/vue-international-i18n/master/src/assets/img/fa.png" alt="æ³•è¯­"><br><img src="https://raw.githubusercontent.com/libing-cheer/vue-international-i18n/master/src/assets/img/ft.png" alt="ä¸­æ–‡ç¹ä½“"></p><h3 id="6ã€vue-i18n-äº†è§£æ›´å¤š"><a href="#6ã€vue-i18n-äº†è§£æ›´å¤š" class="headerlink" title="6ã€vue-i18n äº†è§£æ›´å¤š"></a>6ã€vue-i18n äº†è§£æ›´å¤š</h3><p>è‹¥æƒ³äº†è§£æ›´å¤šå…³äº <code>vue-i18n</code> çš„ä½¿ç”¨ï¼Œè¯·å‰å¾€ <a href="https://kazupon.github.io/vue-i18n/zh/introduction.html" target="_blank" rel="noopener">vue-i18n å®˜ç½‘</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å›½é™…åŒ– </tag>
            
            <tag> Vue </tag>
            
            <tag> vue-i18n </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElementUIä¸­tableè¡¨æ ¼è‡ªå®šä¹‰è¡¨å¤´Tooltipæ–‡å­—æç¤º</title>
      <link href="/2019/07/03/elementui-zhong-table-biao-ge-zi-ding-yi-biao-tou-tooltip-wen-zi-ti-shi/"/>
      <url>/2019/07/03/elementui-zhong-table-biao-ge-zi-ding-yi-biao-tou-tooltip-wen-zi-ti-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="table-header-tips"><a href="#table-header-tips" class="headerlink" title="table-header-tips"></a>table-header-tips</h2><p>åº”ç”¨ <code>element</code> ä¸­çš„ <code>table</code> ç»„ä»¶ï¼Œè‡ªå®šä¹‰è¡¨å¤´ <code>Tooltip</code> æ–‡å­—æç¤ºã€‚</p><h3 id="æ•ˆæœå›¾"><a href="#æ•ˆæœå›¾" class="headerlink" title="æ•ˆæœå›¾"></a>æ•ˆæœå›¾</h3><p><img src="https://raw.githubusercontent.com/libing-cheer/table-header-tips/master/src/assets/tooltip.png" alt="æ•ˆæœå›¾"></p><h3 id="ç¤ºä¾‹-demo-ä»£ç "><a href="#ç¤ºä¾‹-demo-ä»£ç " class="headerlink" title="ç¤ºä¾‹ demo ä»£ç "></a>ç¤ºä¾‹ demo ä»£ç </h3><p><a href="https://github.com/libing-cheer/table-header-tips" target="_blank" rel="noopener">è¯·ç‚¹è¿™é‡Œ</a></p><h3 id="å¼•ç”¨-element-ui"><a href="#å¼•ç”¨-element-ui" class="headerlink" title="å¼•ç”¨ element-ui"></a>å¼•ç”¨ element-ui</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> element-ui</code></pre><p>åœ¨ <code>main.js</code> ä¸­å¼•å…¥</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">'element-ui/lib/theme-chalk/index.css'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="å¢åŠ å…¨å±€ç»„ä»¶-promptMessages-å¹¶åœ¨å…¨å±€å¼•ç”¨"><a href="#å¢åŠ å…¨å±€ç»„ä»¶-promptMessages-å¹¶åœ¨å…¨å±€å¼•ç”¨" class="headerlink" title="å¢åŠ å…¨å±€ç»„ä»¶ promptMessages å¹¶åœ¨å…¨å±€å¼•ç”¨"></a>å¢åŠ å…¨å±€ç»„ä»¶ promptMessages å¹¶åœ¨å…¨å±€å¼•ç”¨</h3><p>åœ¨ <code>src -&gt; modules -&gt; components -&gt; messages</code> ä¸­å¢åŠ  <code>promptMessages</code> ç»„ä»¶åŠ <code>index.js</code> æ–‡ä»¶</p><p><code>promptMessages</code> ç»„ä»¶</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tooltip<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tooltip</span> <span class="token attr-name">effect</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dark<span class="token punctuation">"</span></span> <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- æ’æ§½ï¼Œå¯æä¾›å¤šè¡Œçš„æç¤ºä¿¡æ¯ --></span>        <span class="token comment" spellcheck="true">&lt;!-- å…¨å±€ç»„ä»¶ï¼Œè¿™é‡Œæ˜¯é…ç½®å›¾æ ‡iconå’Œæç¤ºä¿¡æ¯çš„åœ°æ–¹ --></span>        <span class="token comment" spellcheck="true">&lt;!-- åœ¨å…¶ä»–ç»„ä»¶ä¸­å¼•ç”¨æ–¹å¼è¯¦è§ table-header-tips.vue ç»„ä»¶ä¸­çš„ renderHeaderMethods æ–¹æ³• --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(item, index) in messages<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>el-icon-info<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span><span class="token hexcode">#409eff</span><span class="token punctuation">;</span><span class="token property">margin-left</span><span class="token punctuation">:</span><span class="token number">5</span>px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tooltip</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">'promptMessages'</span><span class="token punctuation">,</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    props<span class="token punctuation">:</span> <span class="token punctuation">{</span>      messages<span class="token punctuation">:</span> <span class="token punctuation">{</span>        type<span class="token punctuation">:</span> Array<span class="token punctuation">,</span>        <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p><code>index.js</code> æ–‡ä»¶</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> promptMessages <span class="token keyword">from</span> <span class="token string">'./promptMessages.vue'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* istanbul ignore next */</span>promptMessages<span class="token punctuation">.</span>install <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>promptMessages<span class="token punctuation">.</span>name<span class="token punctuation">,</span> promptMessages<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> promptMessages<span class="token punctuation">;</span></code></pre><p>åœ¨ <code>utils</code> æ–‡ä»¶å¤¹ ğŸ“ ä¸‹ï¼Œæ–°å¢ <code>components.js</code> ç”¨äº å¼•å…¥å…¨å±€ç»„ä»¶<br><code>components.js</code> æ–‡ä»¶</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">/** * Created by Administrator on 2019/07/03 0030. * æ‰€æœ‰è‡ªå®šä¹‰å…¨å±€ç»„ä»¶åœ¨æ­¤å¼•å…¥ */</span><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">import</span> promptMessages <span class="token keyword">from</span> <span class="token string">'@/modules/components/messages'</span><span class="token punctuation">;</span>Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>promptMessages<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è¡¨å¤´æç¤ºè‡ªå®šä¹‰æç¤ºä¿¡æ¯ç»„ä»¶</span></code></pre><p>æœ€ååœ¨ <code>main.js</code> ä¸­å¼•å…¥ <code>components.js</code> æ–‡ä»¶å³å¯å…¨å±€ä½¿ç”¨ <code>promptMessages</code> ç»„ä»¶ã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token function">import</span> <span class="token string">'@/utils/components.js'</span><span class="token punctuation">;</span> // è‡ªå®šä¹‰ç»„ä»¶ js</code></pre><h3 id="table-header-tips-ç»„ä»¶-è‡ªå®šä¹‰è¡¨å¤´æ–¹æ³•-renderHeaderMethods"><a href="#table-header-tips-ç»„ä»¶-è‡ªå®šä¹‰è¡¨å¤´æ–¹æ³•-renderHeaderMethods" class="headerlink" title="table-header-tips ç»„ä»¶ è‡ªå®šä¹‰è¡¨å¤´æ–¹æ³• renderHeaderMethods"></a>table-header-tips ç»„ä»¶ è‡ªå®šä¹‰è¡¨å¤´æ–¹æ³• renderHeaderMethods</h3><p>åº”ç”¨äº† <code>element table</code> ç»„ä»¶çš„ <code>render-header</code>ï¼ˆåˆ—æ ‡é¢˜ <code>Label</code> åŒºåŸŸæ¸²æŸ“ä½¿ç”¨çš„ <code>Function</code>ï¼‰ã€‚</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>table-header-tips<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tableData<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span></span><span class="token punctuation">"</span></span> <span class="token attr-name">stripe</span> <span class="token attr-name">border</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>        <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>date<span class="token punctuation">"</span></span>        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>æ—¥æœŸ<span class="token punctuation">"</span></span>        <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span>        <span class="token attr-name">:show-overflow-tooltip</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>      <span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>        <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span>        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>å§“å<span class="token punctuation">"</span></span>        <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>180<span class="token punctuation">"</span></span>        <span class="token attr-name">:show-overflow-tooltip</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>      <span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>        <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>address<span class="token punctuation">"</span></span>        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>åœ°å€<span class="token punctuation">"</span></span>        <span class="token attr-name">:show-overflow-tooltip</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name">:render-header</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>renderHeaderMethods<span class="token punctuation">"</span></span>      <span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">'tableHeaderTips'</span><span class="token punctuation">,</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        tableData<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">'2016-05-02'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'ç‹å°è™'</span><span class="token punctuation">,</span>            address<span class="token punctuation">:</span>              <span class="token string">'SlideShare Inc., 490 2nd St, Suite 300, San Francisco, CA 94107'</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">'2016-05-04'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'æå°è™'</span><span class="token punctuation">,</span>            address<span class="token punctuation">:</span>              <span class="token string">'Room 201,No.34,Lane 125,XiKang Road(South),HongKou District'</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">'2016-05-01'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'èµµå°è™'</span><span class="token punctuation">,</span>            address<span class="token punctuation">:</span>              <span class="token string">'Room 702, 7th Building, Hengda Garden, East District, Zhongshan'</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            date<span class="token punctuation">:</span> <span class="token string">'2016-05-03'</span><span class="token punctuation">,</span>            name<span class="token punctuation">:</span> <span class="token string">'é»‘å°è™'</span><span class="token punctuation">,</span>            address<span class="token punctuation">:</span>              <span class="token string">'Room 403,No.37,ShiFan Residential Quarter,BaoShan District'</span>          <span class="token punctuation">}</span>        <span class="token punctuation">]</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// è‡ªå®šä¹‰è¡¨æ ¼</span>      <span class="token comment" spellcheck="true">// ä¾‹å¦‚ï¼šç»™è¡¨å¤´ åœ°å€ åŠ ä¸€ä¸ª iconï¼Œé¼ æ ‡ç§»å…¥iconå±•ç¤ºæç¤ºä¿¡æ¯</span>      <span class="token function">renderHeaderMethods</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> <span class="token punctuation">{</span> column <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>          <span class="token string">'div'</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            style<span class="token punctuation">:</span> <span class="token string">'display:flex;margin:auto;'</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">[</span>            <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> column<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'promptMessages'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>              <span class="token comment" spellcheck="true">// å¼•ç”¨ promptMessages å…¨å±€ç»„ä»¶</span>              props<span class="token punctuation">:</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">// messages é‡Œé¢é…ç½®çš„ä¿¡æ¯å³ä¸º Tooltip æç¤ºä¿¡æ¯</span>                messages<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'åœ°å€æç¤ºä¿¡æ¯ï¼Œä»¥ä¸‹åœ°å€æœ‰ä¸­å›½ğŸ‡¨ğŸ‡³å’Œæ¾³æ´²ğŸ‡¦ğŸ‡ºè¯·ä»”ç»†æŸ¥çœ‹ã€‚'</span><span class="token punctuation">]</span>              <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>          <span class="token punctuation">]</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">  <span class="token selector"><span class="token class">.table-header-tips</span> </span><span class="token punctuation">{</span>    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">1000</span>px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">50</span>px auto<span class="token punctuation">;</span>  <span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Element </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElementUI </tag>
            
            <tag> è‡ªå®šä¹‰è¡¨å¤´ </tag>
            
            <tag> Tooltipæ–‡å­—æç¤º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueè§†é¢‘æ’­æ”¾å™¨</title>
      <link href="/2019/06/12/vue-shi-pin-bo-fang-qi/"/>
      <url>/2019/06/12/vue-shi-pin-bo-fang-qi/</url>
      
        <content type="html"><![CDATA[<h3 id="Vue-Video-Player"><a href="#Vue-Video-Player" class="headerlink" title="Vue-Video-Player"></a>Vue-Video-Player</h3><p>é€‚ç”¨äº <code>Vue</code> çš„ <code>video.js</code> æ’­æ”¾å™¨ç»„ä»¶ã€‚</p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p><a href="https://github.com/libing-cheer/video-player" target="_blank" rel="noopener">demo ä»£ç ç¤ºä¾‹</a></p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><h4 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h4><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>path/to/video.js/dist/video-js.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>path/to/video.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>path/to/vue.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>path/to/dist/vue-video-player.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">  Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>VueVideoPlayer<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h4 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> vue-video-player --save</code></pre><h3 id="å…¨å±€å¼•ç”¨æ ·å¼æ–‡ä»¶"><a href="#å…¨å±€å¼•ç”¨æ ·å¼æ–‡ä»¶" class="headerlink" title="å…¨å±€å¼•ç”¨æ ·å¼æ–‡ä»¶"></a>å…¨å±€å¼•ç”¨æ ·å¼æ–‡ä»¶</h3><p>åœ¨ main.js ä¸­å¼•ç”¨ vue-video-player æ ·å¼æ–‡ä»¶ä»¥åŠè‡ªå®šä¹‰çš„æ ·å¼æ–‡ä»¶</p><pre class=" language-bash"><code class="language-bash"><span class="token function">import</span> <span class="token string">'video.js/dist/video-js.css'</span><span class="token function">import</span> <span class="token string">'vue-video-player/src/custom-theme.css'</span><span class="token function">import</span> <span class="token string">'@/../static/theme.css'</span>                // è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶ æ’­æ”¾buttonæŒ‰é’®</code></pre><h3 id="ç»„ä»¶ä¸­ä½¿ç”¨"><a href="#ç»„ä»¶ä¸­ä½¿ç”¨" class="headerlink" title="ç»„ä»¶ä¸­ä½¿ç”¨"></a>ç»„ä»¶ä¸­ä½¿ç”¨</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>player<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video-player</span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>video-player vjs-custom-skin<span class="token punctuation">"</span></span>        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>videoPlayer<span class="token punctuation">"</span></span>        <span class="token attr-name">:playsinline</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>        <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>playerOptions<span class="token punctuation">"</span></span>        <span class="token attr-name">@play</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onPlayerPlay($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@pause</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onPlayerPause($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@ended</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onPlayerEnded($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@waiting</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onPlayerWaiting($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@playing</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onPlayerPlaying($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@loadeddata</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onPlayerLoadeddata($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@timeupdate</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onPlayerTimeupdate($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@canplay</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onPlayerCanplay($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@canplaythrough</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onPlayerCanplaythrough($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@statechanged</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>playerStateChanged($event)<span class="token punctuation">"</span></span>        <span class="token attr-name">@ready</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>playerReadied<span class="token punctuation">"</span></span>      <span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video-player</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">import</span> <span class="token punctuation">{</span> videoPlayer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-video-player'</span><span class="token punctuation">;</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    name<span class="token punctuation">:</span> <span class="token string">'VideoPlayer'</span><span class="token punctuation">,</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        playerOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>          playbackRates<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//æ’­æ”¾é€Ÿåº¦</span>          autoplay<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//å¦‚æœtrue,æµè§ˆå™¨å‡†å¤‡å¥½æ—¶å¼€å§‹å›æ”¾ã€‚</span>          muted<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// é»˜è®¤æƒ…å†µä¸‹å°†ä¼šæ¶ˆé™¤ä»»ä½•éŸ³é¢‘ã€‚</span>          loop<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// å¯¼è‡´è§†é¢‘ä¸€ç»“æŸå°±é‡æ–°å¼€å§‹ã€‚</span>          preload<span class="token punctuation">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>          <span class="token comment" spellcheck="true">// å»ºè®®æµè§ˆå™¨åœ¨&lt;video>åŠ è½½å…ƒç´ åæ˜¯å¦åº”è¯¥å¼€å§‹ä¸‹è½½è§†é¢‘æ•°æ®ã€‚</span>          <span class="token comment" spellcheck="true">// autoæµè§ˆå™¨é€‰æ‹©æœ€ä½³è¡Œä¸º,ç«‹å³å¼€å§‹åŠ è½½è§†é¢‘ï¼ˆå¦‚æœæµè§ˆå™¨æ”¯æŒï¼‰</span>          language<span class="token punctuation">:</span> <span class="token string">'zh-CN'</span><span class="token punctuation">,</span>          aspectRatio<span class="token punctuation">:</span> <span class="token string">'16:9'</span><span class="token punctuation">,</span>          <span class="token comment" spellcheck="true">// å°†æ’­æ”¾å™¨ç½®äºæµç•…æ¨¡å¼ï¼Œå¹¶åœ¨è®¡ç®—æ’­æ”¾å™¨çš„åŠ¨æ€å¤§å°æ—¶ä½¿ç”¨è¯¥å€¼ã€‚</span>          <span class="token comment" spellcheck="true">// å€¼åº”è¯¥ä»£è¡¨ä¸€ä¸ªæ¯”ä¾‹ - ç”¨å†’å·åˆ†éš”çš„ä¸¤ä¸ªæ•°å­—ï¼ˆä¾‹å¦‚"16:9"æˆ–"4:3"ï¼‰</span>          fluid<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>          <span class="token comment" spellcheck="true">// å½“fluidä¸ºtrueæ—¶ï¼ŒVideo.js playerå°†æ‹¥æœ‰æµä½“å¤§å°ã€‚</span>          <span class="token comment" spellcheck="true">// æ¢å¥è¯è¯´ï¼Œå®ƒå°†æŒ‰æ¯”ä¾‹ç¼©æ”¾ä»¥é€‚åº”å…¶å®¹å™¨ã€‚</span>          sources<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">{</span>              type<span class="token punctuation">:</span> <span class="token string">'video/mp4'</span><span class="token punctuation">,</span>              src<span class="token punctuation">:</span> <span class="token string">'http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4'</span>              <span class="token comment" spellcheck="true">//ä½ çš„è§†é¢‘åœ°å€ï¼ˆå¿…å¡«ï¼‰</span>            <span class="token punctuation">}</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          poster<span class="token punctuation">:</span> <span class="token string">'poster.jpg'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//ä½ çš„å°é¢åœ°å€</span>          width<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span>          notSupportedMessage<span class="token punctuation">:</span> <span class="token string">'æ­¤è§†é¢‘æš‚æ— æ³•æ’­æ”¾ï¼Œè¯·ç¨åå†è¯•'</span><span class="token punctuation">,</span>          <span class="token comment" spellcheck="true">//å…è®¸è¦†ç›–Video.jsæ— æ³•æ’­æ”¾åª’ä½“æºæ—¶æ˜¾ç¤ºçš„é»˜è®¤ä¿¡æ¯ã€‚</span>          controlBar<span class="token punctuation">:</span> <span class="token punctuation">{</span>            timeDivider<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            durationDisplay<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            remainingTimeDisplay<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            fullscreenToggle<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">//å…¨å±æŒ‰é’®</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    components<span class="token punctuation">:</span> <span class="token punctuation">{</span>      videoPlayer    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// æ’­æ”¾äº‹ä»¶</span>      <span class="token function">onPlayerPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">// æš‚åœäº‹ä»¶</span>      <span class="token function">onPlayerPause</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">// æ’­æ”¾ç»“æŸäº‹ä»¶</span>      <span class="token function">onPlayerEnded</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">onPlayerWaiting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">onPlayerPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">onPlayerLoadeddata</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">onPlayerTimeupdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">onPlayerTimeupdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">onPlayerCanplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">onPlayerCanplaythrough</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">playerStateChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function">playerReadied</span><span class="token punctuation">(</span>player<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'the player is readied'</span><span class="token punctuation">,</span> player<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// you can use it to do something...</span>        <span class="token comment" spellcheck="true">// player.[methods]</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id="äº†è§£æ›´å¤š"><a href="#äº†è§£æ›´å¤š" class="headerlink" title="äº†è§£æ›´å¤š"></a>äº†è§£æ›´å¤š</h3><p>äº†è§£æ›´å¤šç‚¹å‡»<a href="https://www.npmjs.com/package/vue-video-player" target="_blank" rel="noopener">è¿™é‡Œ</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Vueè§†é¢‘æ’­æ”¾å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå¯¼å‡ºExcelè¡¨æ ¼</title>
      <link href="/2019/05/29/vue-dao-chu-excel-biao-ge/"/>
      <url>/2019/05/29/vue-dao-chu-excel-biao-ge/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p><a href="https://github.com/libing-cheer/excel-export" target="_blank" rel="noopener">demo ä»£ç ç¤ºä¾‹</a></p><h3 id="å»ºç«‹é¡¹ç›®"><a href="#å»ºç«‹é¡¹ç›®" class="headerlink" title="å»ºç«‹é¡¹ç›®"></a>å»ºç«‹é¡¹ç›®</h3><pre class=" language-bash"><code class="language-bash">vue init webpack excel-export       å»ºç«‹excel-exporté¡¹ç›®<span class="token function">cd</span> excel-export                     è¿›å…¥excel-exportæ–‡ä»¶å¤¹ä¸‹<span class="token function">npm</span> <span class="token function">install</span>                         å®‰è£…ä¾èµ–<span class="token function">npm</span> run dev                         è¿è¡Œ</code></pre><h3 id="å¯¼å‡º-Excel-å…³é”®"><a href="#å¯¼å‡º-Excel-å…³é”®" class="headerlink" title="å¯¼å‡º Excel å…³é”®"></a>å¯¼å‡º Excel å…³é”®</h3><h4 id="1ã€å®‰è£…ä¾èµ–"><a href="#1ã€å®‰è£…ä¾èµ–" class="headerlink" title="1ã€å®‰è£…ä¾èµ–"></a>1ã€å®‰è£…ä¾èµ–</h4><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -S file-saver           ç”¨æ¥ç”Ÿæˆæ–‡ä»¶çš„webåº”ç”¨ç¨‹åº</code></pre><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -S xlsx                 ç”µå­è¡¨æ ¼æ ¼å¼çš„è§£æå™¨</code></pre><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -D script-loader        å°†jsæŒ‚è½½åœ¨å…¨å±€ä¸‹</code></pre><h4 id="2ã€æ·»åŠ -Blob-js-åŠ-Export2Excel-js-æ–‡ä»¶"><a href="#2ã€æ·»åŠ -Blob-js-åŠ-Export2Excel-js-æ–‡ä»¶" class="headerlink" title="2ã€æ·»åŠ  Blob.js åŠ Export2Excel.js æ–‡ä»¶"></a>2ã€æ·»åŠ  Blob.js åŠ Export2Excel.js æ–‡ä»¶</h4><p>åœ¨ <code>src</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶(<code>vendor</code>) å¹¶æ·»åŠ <a href="https://raw.githubusercontent.com/libing-cheer/excel-export/master/src/vendor/Blob.js" target="_blank" rel="noopener">Blob.js</a>å’Œ<a href="https://raw.githubusercontent.com/libing-cheer/excel-export/master/src/vendor/Export2Excel.js" target="_blank" rel="noopener">Export2Excel.js</a>ï¼Œå¯¹ <code>Export2Excel.js</code> æ·»åŠ äº†ä¸€æ®µä»£ç ï¼Œå¯ä»¥ä½¿å¯¼å‡ºçš„è¡¨æ ¼åˆ—å®½è‡ªé€‚åº”ã€‚æ‰€æ”¹åŠ¨ä»£ç ä¸º 147 - 155 è¡Œï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash">/*è®¾ç½®worksheetæ¯åˆ—çš„æœ€å¤§å®½åº¦*/  const colWidth <span class="token operator">=</span> data.map<span class="token punctuation">(</span>row <span class="token operator">=</span><span class="token operator">></span> row.map<span class="token punctuation">(</span>val <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    /*å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºnull/undefined*/    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token string">'wch'</span><span class="token keyword">:</span> 10 <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    /*å†åˆ¤æ–­æ˜¯å¦ä¸ºä¸­æ–‡*/    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>val.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>.charCodeAt<span class="token punctuation">(</span>0<span class="token punctuation">)</span> <span class="token operator">></span> 255<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token string">'wch'</span><span class="token keyword">:</span> val.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>.length * 2 + 5 <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token string">'wch'</span><span class="token keyword">:</span> val.toString<span class="token punctuation">(</span><span class="token punctuation">)</span>.length + 5 <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">))</span>/*ä»¥ç¬¬ä¸€è¡Œä¸ºåˆå§‹å€¼*/   <span class="token keyword">let</span> result <span class="token operator">=</span> colWidth<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span>let i <span class="token operator">=</span> 1<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> colWidth.length<span class="token punctuation">;</span> i++<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>let j <span class="token operator">=</span> 0<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> colWidth<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.length<span class="token punctuation">;</span> j++<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'wch'</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> colWidth<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'wch'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        result<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'wch'</span><span class="token punctuation">]</span> <span class="token operator">=</span> colWidth<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'wch'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  ws<span class="token punctuation">[</span><span class="token string">'!cols'</span><span class="token punctuation">]</span> <span class="token operator">=</span> result<span class="token punctuation">;</span></code></pre><h4 id="3ã€é…ç½®åŠ è½½æ—¶çš„è·¯å¾„"><a href="#3ã€é…ç½®åŠ è½½æ—¶çš„è·¯å¾„" class="headerlink" title="3ã€é…ç½®åŠ è½½æ—¶çš„è·¯å¾„"></a>3ã€é…ç½®åŠ è½½æ—¶çš„è·¯å¾„</h4><p>åœ¨ <code>build</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>webpack.base.conf.js</code> æ–‡ä»¶ä¸‹ä¿®æ”¹ï¼Œé…ç½®è¦åŠ è½½æ—¶çš„è·¯å¾„</p><pre class=" language-bash"><code class="language-bash">alias: <span class="token punctuation">{</span>      <span class="token string">'vue$'</span><span class="token keyword">:</span> <span class="token string">'vue/dist/vue.esm.js'</span>,      <span class="token string">'@'</span><span class="token keyword">:</span> resolve<span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span>,      <span class="token string">'vendor'</span><span class="token keyword">:</span> resolve<span class="token punctuation">(</span><span class="token string">'src/vendor'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span></code></pre><h4 id="4ã€Export2Excel-js-å¼•ç”¨ä¾èµ–"><a href="#4ã€Export2Excel-js-å¼•ç”¨ä¾èµ–" class="headerlink" title="4ã€Export2Excel.js å¼•ç”¨ä¾èµ–"></a>4ã€Export2Excel.js å¼•ç”¨ä¾èµ–</h4><p>åœ¨ <code>Export2Excel.js</code> å¼•ç”¨ä¾èµ–å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash">require<span class="token punctuation">(</span><span class="token string">'./Blob'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>require<span class="token punctuation">(</span><span class="token string">'script-loader!file-saver'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>require<span class="token punctuation">(</span><span class="token string">'script-loader!xlsx/dist/xlsx.core.min'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="element-ui-ä½¿ç”¨"><a href="#element-ui-ä½¿ç”¨" class="headerlink" title="element-ui ä½¿ç”¨"></a>element-ui ä½¿ç”¨</h3><p>ç”¨äº† <code>element-ui</code> ä¸­çš„ <code>table</code> å’Œ <code>button</code> ç»„ä»¶ï¼Œå®‰è£…ä¾èµ–ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> -S element-ui</code></pre><p>åœ¨ main.js ä¸­å¼•ç”¨ element åŠå…¶æ ·å¼ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">import</span> Element from <span class="token string">'element-ui'</span>                    // å¼•å…¥element ui<span class="token function">import</span> <span class="token string">'element-ui/lib/theme-chalk/index.css'</span>       // å¼•å…¥ element ui æ ·å¼Vue.use<span class="token punctuation">(</span>Element, <span class="token punctuation">{</span>  size: <span class="token string">'mini'</span>                                      // <span class="token keyword">set</span> element-ui default size<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h3 id="Vue-æ–‡ä»¶ä½¿ç”¨"><a href="#Vue-æ–‡ä»¶ä½¿ç”¨" class="headerlink" title="Vue æ–‡ä»¶ä½¿ç”¨"></a>Vue æ–‡ä»¶ä½¿ç”¨</h3><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"hello"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>el-button        type<span class="token operator">=</span><span class="token string">"primary"</span>        size<span class="token operator">=</span><span class="token string">"mini"</span>        style<span class="token operator">=</span><span class="token string">"margin:30px auto;"</span>        @click<span class="token operator">=</span><span class="token string">"handleDownloadData"</span>      <span class="token operator">></span>å¯¼å‡º<span class="token operator">&lt;</span>/el-button<span class="token operator">></span>      <span class="token operator">&lt;</span>el-table        :data<span class="token operator">=</span><span class="token string">"tableData"</span>        stripe        style<span class="token operator">=</span><span class="token string">"width: 600px;margin:30px auto;"</span>      <span class="token operator">></span>        <span class="token operator">&lt;</span>el-table-column          prop<span class="token operator">=</span><span class="token string">"date"</span>          label<span class="token operator">=</span><span class="token string">"æ—¥æœŸ"</span>          width<span class="token operator">=</span><span class="token string">"180"</span>        <span class="token operator">></span>        <span class="token operator">&lt;</span>/el-table-column<span class="token operator">></span>        <span class="token operator">&lt;</span>el-table-column          prop<span class="token operator">=</span><span class="token string">"name"</span>          label<span class="token operator">=</span><span class="token string">"å§“å"</span>          width<span class="token operator">=</span><span class="token string">"180"</span>        <span class="token operator">></span>        <span class="token operator">&lt;</span>/el-table-column<span class="token operator">></span>        <span class="token operator">&lt;</span>el-table-column          prop<span class="token operator">=</span><span class="token string">"address"</span>          label<span class="token operator">=</span><span class="token string">"åœ°å€"</span>        <span class="token operator">></span>        <span class="token operator">&lt;</span>/el-table-column<span class="token operator">></span>      <span class="token operator">&lt;</span>/el-table<span class="token operator">></span>    <span class="token operator">&lt;</span>/div<span class="token operator">></span>  <span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token function">export</span> default <span class="token punctuation">{</span>  name: <span class="token string">'excelExport'</span>,  data<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      msg: <span class="token string">'Welcome to Your Excel Export'</span>,      tableData: <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          date: <span class="token string">'2016-05-02'</span>,          name: <span class="token string">'ç‹å°è™'</span>,          address: <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1510 å¼„'</span>        <span class="token punctuation">}</span>,        <span class="token punctuation">{</span>          date: <span class="token string">'2016-05-04'</span>,          name: <span class="token string">'æå°è™'</span>,          address: <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1511 å¼„'</span>        <span class="token punctuation">}</span>,        <span class="token punctuation">{</span>          date: <span class="token string">'2016-05-01'</span>,          name: <span class="token string">'å­™å°è™'</span>,          address: <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1512 å¼„'</span>        <span class="token punctuation">}</span>,        <span class="token punctuation">{</span>          date: <span class="token string">'2016-05-02'</span>,          name: <span class="token string">'æœ±å°è™'</span>,          address: <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1513 å¼„'</span>        <span class="token punctuation">}</span>,        <span class="token punctuation">{</span>          date: <span class="token string">'2016-05-04'</span>,          name: <span class="token string">'é’±å°è™'</span>,          address: <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1514 å¼„'</span>        <span class="token punctuation">}</span>,        <span class="token punctuation">{</span>          date: <span class="token string">'2016-05-01'</span>,          name: <span class="token string">'æœå°è™'</span>,          address: <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1515 å¼„'</span>        <span class="token punctuation">}</span>,        <span class="token punctuation">{</span>          date: <span class="token string">'2016-05-03'</span>,          name: <span class="token string">'èµµå°è™'</span>,          address: <span class="token string">'ä¸Šæµ·å¸‚æ™®é™€åŒºé‡‘æ²™æ±Ÿè·¯ 1516 å¼„'</span>        <span class="token punctuation">}</span><span class="token punctuation">]</span>,      tableTitleData: <span class="token punctuation">[</span>        <span class="token punctuation">{</span>          label: <span class="token string">'æ—¥æœŸ'</span>,          prop: <span class="token string">'date'</span>        <span class="token punctuation">}</span>,        <span class="token punctuation">{</span>          label: <span class="token string">'å§“å'</span>,          prop: <span class="token string">'name'</span>        <span class="token punctuation">}</span>,        <span class="token punctuation">{</span>          label: <span class="token string">'åœ°å€'</span>,          prop: <span class="token string">'address'</span>        <span class="token punctuation">}</span>      <span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>,  methods: <span class="token punctuation">{</span>    // å¯¼å‡ºçš„æ–¹æ³•    handleDownloadData<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      // å¯¼å‡ºè¡¨æ ¼çš„è¡¨å¤´è®¾ç½®      <span class="token keyword">let</span> allColumns <span class="token operator">=</span> this.tableTitleData      var columnNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      var columnValues <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span>var i <span class="token operator">=</span> 0<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> allColumns.length<span class="token punctuation">;</span> i++<span class="token punctuation">)</span> <span class="token punctuation">{</span>        columnNames<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> allColumns<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.label        columnValues<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> allColumns<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.prop      <span class="token punctuation">}</span>      require.ensure<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        const <span class="token punctuation">{</span> export_json_to_excel <span class="token punctuation">}</span> <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'vendor/Export2Excel'</span><span class="token punctuation">)</span>        const tHeader <span class="token operator">=</span> columnNames        const filterVal <span class="token operator">=</span> columnValues        const list <span class="token operator">=</span> this.tableData        const data <span class="token operator">=</span> this.formatJson<span class="token punctuation">(</span>filterVal, list<span class="token punctuation">)</span>        export_json_to_excel<span class="token punctuation">(</span>tHeader, data, <span class="token string">'å¯¼å‡ºexcelåˆ—è¡¨demo'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>,    formatJson<span class="token punctuation">(</span>filterVal, jsonData<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> jsonData.map<span class="token punctuation">(</span>v <span class="token operator">=</span><span class="token operator">></span> filterVal.map<span class="token punctuation">(</span>j <span class="token operator">=</span><span class="token operator">></span> v<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">))</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/script<span class="token operator">></span></code></pre><h3 id="è¿è¡Œæ•ˆæœå›¾"><a href="#è¿è¡Œæ•ˆæœå›¾" class="headerlink" title="è¿è¡Œæ•ˆæœå›¾"></a>è¿è¡Œæ•ˆæœå›¾</h3><p><img src="https://raw.githubusercontent.com/libing-cheer/excel-export/master/src/assets/%E6%95%88%E6%9E%9C%E5%9B%BE.png" alt="è¿è¡Œæ•ˆæœå›¾"></p><h3 id="å¯¼å‡ºæ•ˆæœå›¾"><a href="#å¯¼å‡ºæ•ˆæœå›¾" class="headerlink" title="å¯¼å‡ºæ•ˆæœå›¾"></a>å¯¼å‡ºæ•ˆæœå›¾</h3><p><img src="https://raw.githubusercontent.com/libing-cheer/excel-export/master/src/assets/%E5%AF%BC%E5%87%BA%E7%A4%BA%E4%BE%8B%E5%9B%BE.png" alt="å¯¼å‡ºæ•ˆæœå›¾"></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Vue </category>
          
          <category> å¯¼å‡ºè¡¨æ ¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> å¯¼å‡ºExcelè¡¨æ ¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueæ‹–æ‹½æ’åº</title>
      <link href="/2019/05/28/vue-tuo-zhuai-pai-xu/"/>
      <url>/2019/05/28/vue-tuo-zhuai-pai-xu/</url>
      
        <content type="html"><![CDATA[<h3 id="Awe-dnd"><a href="#Awe-dnd" class="headerlink" title="Awe-dnd"></a>Awe-dnd</h3><p><code>Awe-dnd</code>ï¼šä¸€ä¸ªè½»é‡çš„ <code>Vue</code> æ‹–åŠ¨æ’åºæ’ä»¶ï¼Œå¯ä½¿æ‚¨çš„å…ƒç´ åœ¨ <code>Vue</code> ä¸­å¯æ‹–åŠ¨ã€‚</p><h5 id="demo-ç¤ºä¾‹å›¾"><a href="#demo-ç¤ºä¾‹å›¾" class="headerlink" title="demo ç¤ºä¾‹å›¾"></a><a href="https://github.com/hilongjw/vue-dragging/blob/master/preview.gif" target="_blank" rel="noopener">demo ç¤ºä¾‹å›¾</a></h5><h3 id="Awe-dnd-ç‰¹ç‚¹"><a href="#Awe-dnd-ç‰¹ç‚¹" class="headerlink" title="Awe-dnd ç‰¹ç‚¹"></a>Awe-dnd ç‰¹ç‚¹</h3><ul><li>æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡</li><li><code>Vue</code> æ•°æ®é©±åŠ¨ç†å¿µ</li><li>æ”¯æŒ <code>multi drag</code></li><li>æ”¯æŒ <code>Vue 1.0</code> and <code>Vue 2.0</code></li></ul><h3 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a>è¦æ±‚</h3><ul><li><code>Vue: ^1.0.0 or ^2.0.0</code></li></ul><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><pre class=" language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> awe-dnd --save</code></pre><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><pre class=" language-bash"><code class="language-bash">// main.js<span class="token function">import</span> VueDND from <span class="token string">'awe-dnd'</span>Vue.use<span class="token punctuation">(</span>VueDND<span class="token punctuation">)</span></code></pre><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span><span class="token operator">!</span>--your.vue--<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span><span class="token function">export</span> default <span class="token punctuation">{</span>  data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>        colors: <span class="token punctuation">[</span><span class="token punctuation">{</span>            text: <span class="token string">"Aquamarine"</span>        <span class="token punctuation">}</span>, <span class="token punctuation">{</span>            text: <span class="token string">"Hotpink"</span>        <span class="token punctuation">}</span>, <span class="token punctuation">{</span>            text: <span class="token string">"Gold"</span>        <span class="token punctuation">}</span>, <span class="token punctuation">{</span>            text: <span class="token string">"Crimson"</span>        <span class="token punctuation">}</span>, <span class="token punctuation">{</span>            text: <span class="token string">"Blueviolet"</span>        <span class="token punctuation">}</span>, <span class="token punctuation">{</span>            text: <span class="token string">"Lightblue"</span>        <span class="token punctuation">}</span>, <span class="token punctuation">{</span>            text: <span class="token string">"Cornflowerblue"</span>        <span class="token punctuation">}</span>, <span class="token punctuation">{</span>            text: <span class="token string">"Skyblue"</span>        <span class="token punctuation">}</span>, <span class="token punctuation">{</span>            text: <span class="token string">"Burlywood"</span>        <span class="token punctuation">}</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>,  /* <span class="token keyword">if</span> your need multi drag  mounted: function<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      this.colors.forEach<span class="token punctuation">((</span>item<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>          Vue.set<span class="token punctuation">(</span>item, <span class="token string">'isComb'</span>, false<span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> */<span class="token punctuation">}</span><span class="token operator">&lt;</span>/script<span class="token operator">></span><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"color-list"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>div          class<span class="token operator">=</span><span class="token string">"color-item"</span>          v-for<span class="token operator">=</span><span class="token string">"color in colors"</span> v-dragging<span class="token operator">=</span><span class="token string">"{ item: color, list: colors, group: 'color' }"</span>          :key<span class="token operator">=</span><span class="token string">"color.text"</span>      <span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>color.text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/div<span class="token operator">></span>  <span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/template<span class="token operator">></span></code></pre><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><pre class=" language-bash"><code class="language-bash">v-dragging<span class="token operator">=</span><span class="token string">"{ item: color, list: colors, group: 'color' }"</span></code></pre><h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><ul><li><code>{item} Object</code></li><li><code>{list} Array</code></li><li><code>{group} String</code></li><li><p><code>{comb} String</code></p><p>group is unique key of dragable list.</p><p>comb use for multi drag</p></li></ul><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span><span class="token operator">!</span>-- Vue2.0 --<span class="token operator">></span><span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"color-list"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div        class<span class="token operator">=</span><span class="token string">"color-item"</span>        v-for<span class="token operator">=</span><span class="token string">"color in colors"</span> v-dragging<span class="token operator">=</span><span class="token string">"{ item: color, list: colors, group: 'color' }"</span>        :key<span class="token operator">=</span><span class="token string">"color.text"</span>    <span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>color.text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">!</span>-- Vue1.0 --<span class="token operator">></span><span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"color-list"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div        class<span class="token operator">=</span><span class="token string">"color-item"</span>        v-for<span class="token operator">=</span><span class="token string">"color in colors"</span> v-dragging<span class="token operator">=</span><span class="token string">"{ item: color, list: colors, group: 'color', key: color.text }"</span>        track-by<span class="token operator">=</span><span class="token string">"text"</span>    <span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>color.text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/div<span class="token operator">></span></code></pre><h3 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h3><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"color-list"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div        class<span class="token operator">=</span><span class="token string">"color-item"</span>        v-for<span class="token operator">=</span><span class="token string">"color in colors"</span> v-dragging<span class="token operator">=</span><span class="token string">"{ item: color, list: colors, group: 'color', otherData: otherData, comb: 'isComb' }"</span>        :key<span class="token operator">=</span><span class="token string">"color.text"</span>    <span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span>color.text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/div<span class="token operator">></span></code></pre><pre class=" language-bash"><code class="language-bash"><span class="token function">export</span> default <span class="token punctuation">{</span>  mounted <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    this.<span class="token variable">$dragging</span><span class="token keyword">.</span><span class="token variable">$on</span><span class="token punctuation">(</span><span class="token string">'dragged'</span>, <span class="token punctuation">(</span><span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      console.log<span class="token punctuation">(</span>value.item<span class="token punctuation">)</span>      console.log<span class="token punctuation">(</span>value.list<span class="token punctuation">)</span>      console.log<span class="token punctuation">(</span>value.otherData<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    this.<span class="token variable">$dragging</span><span class="token keyword">.</span><span class="token variable">$on</span><span class="token punctuation">(</span><span class="token string">'dragend'</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="è®¸å¯è¯"><a href="#è®¸å¯è¯" class="headerlink" title="è®¸å¯è¯"></a>è®¸å¯è¯</h3><p><a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener">MIT è®¸å¯è¯</a></p><h3 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h3><p><a href="https://www.npmjs.com/search?q=keywords:vue-dragging" target="_blank" rel="noopener">vue-dragging</a><br><a href="https://www.npmjs.com/search?q=keywords:vue-drag" target="_blank" rel="noopener">vue-drag</a><br><a href="https://www.npmjs.com/search?q=keywords:vue-dnd" target="_blank" rel="noopener">vue-dnd</a><br><a href="https://www.npmjs.com/search?q=keywords:vue" target="_blank" rel="noopener">vue</a><br><a href="https://www.npmjs.com/search?q=keywords:draggable" target="_blank" rel="noopener">draggable</a><br><a href="https://www.npmjs.com/search?q=keywords:drag" target="_blank" rel="noopener">drag</a><br><a href="https://www.npmjs.com/search?q=keywords:drop" target="_blank" rel="noopener">drop</a><br><a href="https://www.npmjs.com/search?q=keywords:html5" target="_blank" rel="noopener">html5</a><br><a href="https://www.npmjs.com/search?q=keywords:draggable" target="_blank" rel="noopener">draggable</a><br><a href="https://www.npmjs.com/search?q=keywords:droppable" target="_blank" rel="noopener">droppable</a><br><a href="https://www.npmjs.com/search?q=keywords:dnd" target="_blank" rel="noopener">drag-and-drop</a><br><a href="https://www.npmjs.com/search?q=keywords:dnd" target="_blank" rel="noopener">dnd</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Vue </category>
          
          <category> æ‹–æ‹½æ’åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> æ‹–æ‹½æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm command not found</title>
      <link href="/2019/05/19/mac-xia-node-an-zhuang-cheng-gong-dan-ti-shi-npm-command-not-found/"/>
      <url>/2019/05/19/mac-xia-node-an-zhuang-cheng-gong-dan-ti-shi-npm-command-not-found/</url>
      
        <content type="html"><![CDATA[<h3 id="å‡ºç°çš„é—®é¢˜"><a href="#å‡ºç°çš„é—®é¢˜" class="headerlink" title="å‡ºç°çš„é—®é¢˜"></a>å‡ºç°çš„é—®é¢˜</h3><p>ä»å®˜ç½‘ä¸‹è½½äº† <code>node</code> çš„ <code>.pkg</code> æ–‡ä»¶å®‰è£… <code>node</code>ï¼Œå®‰è£…å¥½åï¼Œåœ¨ <code>mac</code> ç»ˆç«¯ä¸‹è¾“å…¥ <code>npm -v</code> å’Œ <code>node -v</code> å‡æç¤º <code>command not found</code>ã€‚</p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p>1ã€ç¬¬ä¸€æ­¥ï¼šåˆ›å»º <code>.bash_profile</code> æ–‡ä»¶ï¼Œï½è¡¨ç¤ºåœ¨ï½ç›®å½•ä¸‹ï¼Œ.è¡¨ç¤ºéšè—æ–‡ä»¶ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">touch</span> ~/.bash_profile</code></pre><p>2ã€ç¬¬äºŒæ­¥ï¼šæ‰“å¼€ <code>.bash_profile</code> æ–‡ä»¶ï¼Œè¾“å…¥å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">open</span> -e .bash_profile</code></pre><p>3ã€ç¬¬ä¸‰æ­¥ï¼šè¿™æ—¶å€™ä¼šå¼¹å‡º <code>.bash_profile</code> æ–‡æœ¬ç¼–è¾‘æ¡†ï¼Œåœ¨æ–‡æœ¬ç¼–è¾‘æ¡†é‡Œé¢ç¼–è¾‘ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">export</span> PATH<span class="token operator">=</span>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin</code></pre><p>4ã€ç¬¬å››æ­¥ï¼š<code>command+s</code> ä¿å­˜ <code>.bash_profile</code> æ–‡ä»¶ï¼Œä¸ºä½¿ <code>.bash_profile</code> æ–‡ä»¶ç”Ÿæ•ˆï¼Œè¾“å…¥å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">source</span> .bash_profile</code></pre><p>5ã€ç¬¬äº”æ­¥ï¼šå†è¾“å…¥ <code>npm -v</code> æˆ–è€… <code>node -v</code> å°±èƒ½çœ‹åˆ°ç‰ˆæœ¬å·å•¦~ã€‚</p><pre class=" language-bash"><code class="language-bash">node -v</code></pre><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> -v</code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueæ–‡ä»¶é¢„è§ˆ</title>
      <link href="/2019/05/10/vue-wen-jian-yu-lan/"/>
      <url>/2019/05/10/vue-wen-jian-yu-lan/</url>
      
        <content type="html"><![CDATA[<h3 id="pdfæ–‡ä»¶é¢„è§ˆ"><a href="#pdfæ–‡ä»¶é¢„è§ˆ" class="headerlink" title="pdfæ–‡ä»¶é¢„è§ˆ"></a>pdfæ–‡ä»¶é¢„è§ˆ</h3><h4 id="1ã€embed-æ ‡ç­¾"><a href="#1ã€embed-æ ‡ç­¾" class="headerlink" title="1ã€embed æ ‡ç­¾"></a>1ã€embed æ ‡ç­¾</h4><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"height:100vh"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>embed src<span class="token operator">=</span><span class="token string">"https://fscdn.xxx.com/pdfæ–‡ä»¶åœ°å€.pdf"</span>         width<span class="token operator">=</span><span class="token string">"100%"</span>         height<span class="token operator">=</span><span class="token string">"100%"</span>                  type<span class="token operator">=</span><span class="token string">"application/pdf"</span> /<span class="token operator">></span>  <span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/template<span class="token operator">></span></code></pre><h4 id="2ã€iframe-æ ‡ç­¾"><a href="#2ã€iframe-æ ‡ç­¾" class="headerlink" title="2ã€iframe æ ‡ç­¾"></a>2ã€iframe æ ‡ç­¾</h4><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"height:100vh"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>iframe src<span class="token operator">=</span><span class="token string">"https://fscdn.xxx.com/pdfæ–‡ä»¶åœ°å€.pdf"</span>         width<span class="token operator">=</span><span class="token string">"100%"</span>         height<span class="token operator">=</span><span class="token string">"100%"</span> /<span class="token operator">></span>  <span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/template<span class="token operator">></span></code></pre><h4 id="3ã€-pdf-js"><a href="#3ã€-pdf-js" class="headerlink" title="3ã€ pdf.js"></a>3ã€ pdf.js</h4><p>è¯·å‰å¾€<br><a href="https://www.jb51.net/article/117166.htm" target="_blank" rel="noopener">vue2.0å…¨å±€ç»„ä»¶ä¹‹pdfè¯¦è§£</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Vue </category>
          
          <category> æ–‡ä»¶é¢„è§ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Vueæ–‡ä»¶é¢„è§ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå›¾ç‰‡é¢„è§ˆ</title>
      <link href="/2019/05/04/vue-tu-pian-yu-lan/"/>
      <url>/2019/05/04/vue-tu-pian-yu-lan/</url>
      
        <content type="html"><![CDATA[<h2 id="v-viewer"><a href="#v-viewer" class="headerlink" title="v-viewer"></a>v-viewer</h2><p>ç”¨äºå›¾ç‰‡æµè§ˆçš„ <code>Vue</code> ç»„ä»¶ï¼Œæ”¯æŒæ—‹è½¬ã€ç¼©æ”¾ã€ç¿»è½¬ç­‰æ“ä½œï¼ŒåŸºäº <code>viewer.js</code>ã€‚</p><h5 id="æ¼”ç¤ºç¤ºä¾‹"><a href="#æ¼”ç¤ºç¤ºä¾‹" class="headerlink" title="æ¼”ç¤ºç¤ºä¾‹"></a><a href="https://mirari.cc/v-viewer/" target="_blank" rel="noopener">æ¼”ç¤ºç¤ºä¾‹</a></h5><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> v-viewer</code></pre><h3 id="æ‰‹åŠ¨å¼•å…¥æ ·å¼æ–‡ä»¶"><a href="#æ‰‹åŠ¨å¼•å…¥æ ·å¼æ–‡ä»¶" class="headerlink" title="æ‰‹åŠ¨å¼•å…¥æ ·å¼æ–‡ä»¶"></a>æ‰‹åŠ¨å¼•å…¥æ ·å¼æ–‡ä»¶</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">import</span> <span class="token string">'viewerjs/dist/viewer.css'</span></code></pre><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>å¼•å…¥ <code>v-viewer</code> åŠå¿…éœ€çš„ <code>css</code> æ ·å¼ï¼Œå¹¶ä½¿ç”¨ <code>Vue.use()</code> æ³¨å†Œæ’ä»¶ï¼Œä¹‹åå³å¯ä½¿ç”¨ã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span>-- directive --<span class="token operator">></span>    <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"images"</span> v-viewer<span class="token operator">></span>      <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"1.jpg"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"2.jpg"</span><span class="token operator">></span>      <span class="token punctuation">..</span>.    <span class="token operator">&lt;</span>/div<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span>-- component --<span class="token operator">></span>    <span class="token operator">&lt;</span>viewer :images<span class="token operator">=</span><span class="token string">"images"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>img v-for<span class="token operator">=</span><span class="token string">"src in images"</span> :src<span class="token operator">=</span><span class="token string">"src"</span> :key<span class="token operator">=</span><span class="token string">"src"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>/viewer<span class="token operator">></span>  <span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>  <span class="token function">import</span> <span class="token string">'viewerjs/dist/viewer.css'</span>  <span class="token function">import</span> Viewer from <span class="token string">'v-viewer'</span>  <span class="token function">import</span> Vue from <span class="token string">'vue'</span>  Vue.use<span class="token punctuation">(</span>Viewer<span class="token punctuation">)</span>  <span class="token function">export</span> default <span class="token punctuation">{</span>    data<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      images: <span class="token punctuation">[</span><span class="token string">'1.jpg'</span>, <span class="token string">'2.jpg'</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token operator">&lt;</span>/script<span class="token operator">></span></code></pre><h3 id="ä»¥æŒ‡ä»¤å½¢å¼ä½¿ç”¨"><a href="#ä»¥æŒ‡ä»¤å½¢å¼ä½¿ç”¨" class="headerlink" title="ä»¥æŒ‡ä»¤å½¢å¼ä½¿ç”¨"></a>ä»¥æŒ‡ä»¤å½¢å¼ä½¿ç”¨</h3><p>åªéœ€è¦å°† <code>v-viewer</code> æŒ‡ä»¤æ·»åŠ åˆ°ä»»æ„å…ƒç´ å³å¯ï¼Œè¯¥å…ƒç´ ä¸‹çš„æ‰€æœ‰ <code>img</code> å…ƒç´ éƒ½ä¼šè¢« <code>viewer</code> è‡ªåŠ¨å¤„ç†ã€‚</p><p>ä½ å¯ä»¥åƒè¿™æ ·ä¼ å…¥é…ç½®é¡¹ï¼š <code>v-viewer=&quot;{inline: true}&quot;</code></p><p>å¦‚æœæœ‰å¿…è¦ï¼Œå¯ä»¥å…ˆç”¨é€‰æ‹©å™¨æŸ¥æ‰¾åˆ°ç›®æ ‡å…ƒç´ ï¼Œç„¶åå¯ä»¥ç”¨ <code>el.\$viewer</code> æ¥è·å– <code>viewer</code> å®ä¾‹ã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"images"</span> v-viewer<span class="token operator">=</span><span class="token string">"{movable: false}"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>img v-for<span class="token operator">=</span><span class="token string">"src in images"</span> :src<span class="token operator">=</span><span class="token string">"src"</span> :key<span class="token operator">=</span><span class="token string">"src"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>/div<span class="token operator">></span>    <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"button"</span> @click<span class="token operator">=</span><span class="token string">"show"</span><span class="token operator">></span>Show<span class="token operator">&lt;</span>/button<span class="token operator">></span>  <span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>  <span class="token function">import</span> <span class="token string">'viewerjs/dist/viewer.css'</span>  <span class="token function">import</span> Viewer from <span class="token string">'v-viewer'</span>  <span class="token function">import</span> Vue from <span class="token string">'vue'</span>  Vue.use<span class="token punctuation">(</span>Viewer<span class="token punctuation">)</span>  <span class="token function">export</span> default <span class="token punctuation">{</span>    data<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      images: <span class="token punctuation">[</span><span class="token string">'1.jpg'</span>, <span class="token string">'2.jpg'</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>,    methods: <span class="token punctuation">{</span>      show <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        const viewer <span class="token operator">=</span> this.<span class="token variable">$el</span>.querySelector<span class="token punctuation">(</span><span class="token string">'.images'</span><span class="token punctuation">)</span>.<span class="token variable">$viewer</span>        viewer.show<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token operator">&lt;</span>/script<span class="token operator">></span></code></pre><h3 id="æŒ‡ä»¤ä¿®é¥°å™¨"><a href="#æŒ‡ä»¤ä¿®é¥°å™¨" class="headerlink" title="æŒ‡ä»¤ä¿®é¥°å™¨"></a>æŒ‡ä»¤ä¿®é¥°å™¨</h3><p>æ·»åŠ ä¿®é¥°å™¨åï¼Œ<code>viewer</code> çš„åˆ›å»ºåªä¼šåœ¨å…ƒç´ ç»‘å®šæŒ‡ä»¤æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚<br>å¦‚æœä½ ç¡®å®šå…ƒç´ å†…çš„å›¾ç‰‡ä¸ä¼šå†å‘ç”Ÿå˜åŒ–ï¼Œä½¿ç”¨å®ƒå¯ä»¥é¿å…ä¸å¿…è¦çš„é‡å»ºåŠ¨ä½œã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"images"</span> v-viewer.static<span class="token operator">=</span><span class="token string">"{inline: true}"</span><span class="token operator">></span>  <span class="token operator">&lt;</span>img v-for<span class="token operator">=</span><span class="token string">"src in images"</span> :src<span class="token operator">=</span><span class="token string">"src"</span> :key<span class="token operator">=</span><span class="token string">"src"</span><span class="token operator">></span><span class="token operator">&lt;</span>/div<span class="token operator">></span></code></pre><h3 id="ä»¥ç»„ä»¶å½¢å¼ä½¿ç”¨"><a href="#ä»¥ç»„ä»¶å½¢å¼ä½¿ç”¨" class="headerlink" title="ä»¥ç»„ä»¶å½¢å¼ä½¿ç”¨"></a>ä»¥ç»„ä»¶å½¢å¼ä½¿ç”¨</h3><p>ä½ ä¹Ÿå¯ä»¥å•ç‹¬å¼•å…¥å…¨å±ç»„ä»¶å¹¶å±€éƒ¨æ³¨å†Œå®ƒã€‚</p><p>ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½æ¥å®šåˆ¶ä½ çš„å›¾ç‰‡å±•ç¤ºæ–¹å¼ã€‚</p><p>ç›‘å¬ <code>inited</code> äº‹ä»¶æ¥è·å– <code>viewer</code> å®ä¾‹ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ç”¨ <code>this.refs.xxx.\$viewer</code> è¿™ç§æ–¹æ³•ã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>viewer :options<span class="token operator">=</span><span class="token string">"options"</span> :images<span class="token operator">=</span><span class="token string">"images"</span>            @inited<span class="token operator">=</span><span class="token string">"inited"</span>            class<span class="token operator">=</span><span class="token string">"viewer"</span> ref<span class="token operator">=</span><span class="token string">"viewer"</span>    <span class="token operator">></span>      <span class="token operator">&lt;</span>template scope<span class="token operator">=</span><span class="token string">"scope"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>img v-for<span class="token operator">=</span><span class="token string">"src in scope.images"</span> :src<span class="token operator">=</span><span class="token string">"src"</span> :key<span class="token operator">=</span><span class="token string">"src"</span><span class="token operator">></span>        <span class="token punctuation">{</span><span class="token punctuation">{</span>scope.options<span class="token punctuation">}</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span>/template<span class="token operator">></span>    <span class="token operator">&lt;</span>/viewer<span class="token operator">></span>    <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"button"</span> @click<span class="token operator">=</span><span class="token string">"show"</span><span class="token operator">></span>Show<span class="token operator">&lt;</span>/button<span class="token operator">></span>  <span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>  <span class="token function">import</span> <span class="token string">'viewerjs/dist/viewer.css'</span>  <span class="token function">import</span> Viewer from <span class="token string">"v-viewer/src/component.vue"</span>  <span class="token function">export</span> default <span class="token punctuation">{</span>    components: <span class="token punctuation">{</span>      Viewer    <span class="token punctuation">}</span>,    data<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      images: <span class="token punctuation">[</span><span class="token string">'1.jpg'</span>, <span class="token string">'2.jpg'</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>,    methods: <span class="token punctuation">{</span>      inited <span class="token punctuation">(</span>viewer<span class="token punctuation">)</span> <span class="token punctuation">{</span>        this.<span class="token variable">$viewer</span> <span class="token operator">=</span> viewer      <span class="token punctuation">}</span>,      show <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        this.<span class="token variable">$viewer</span>.show<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token operator">&lt;</span>/script<span class="token operator">></span></code></pre><h3 id="é…ç½®é¡¹-amp-æ–¹æ³•"><a href="#é…ç½®é¡¹-amp-æ–¹æ³•" class="headerlink" title="é…ç½®é¡¹ &amp; æ–¹æ³•"></a>é…ç½®é¡¹ &amp; æ–¹æ³•</h3><p>è¯·å‚è€ƒ<a href="https://github.com/fengyuanchen/viewerjs" target="_blank" rel="noopener">viewer.js.</a></p><h3 id="æ’ä»¶é…ç½®é¡¹"><a href="#æ’ä»¶é…ç½®é¡¹" class="headerlink" title="æ’ä»¶é…ç½®é¡¹"></a>æ’ä»¶é…ç½®é¡¹</h3><p><strong> name</strong></p><ul><li><code>Type: String</code></li><li><code>Default: viewer</code></li></ul><p>å¦‚æœä½ éœ€è¦é¿å…é‡åå†²çªï¼Œå¯ä»¥åƒè¿™æ ·å¼•å…¥:</p><pre class=" language-bash"><code class="language-bash"><span class="token operator">&lt;</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>div class<span class="token operator">=</span><span class="token string">"images"</span> v-vuer<span class="token operator">=</span><span class="token string">"{movable: false}"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>img v-for<span class="token operator">=</span><span class="token string">"src in images"</span> :src<span class="token operator">=</span><span class="token string">"src"</span> :key<span class="token operator">=</span><span class="token string">"src"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>/div<span class="token operator">></span>    <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"button"</span> @click<span class="token operator">=</span><span class="token string">"show"</span><span class="token operator">></span>Show<span class="token operator">&lt;</span>/button<span class="token operator">></span>  <span class="token operator">&lt;</span>/div<span class="token operator">></span><span class="token operator">&lt;</span>/template<span class="token operator">></span><span class="token operator">&lt;</span>script<span class="token operator">></span>  <span class="token function">import</span> <span class="token string">'viewerjs/dist/viewer.css'</span>  <span class="token function">import</span> Vuer from <span class="token string">'v-viewer'</span>  <span class="token function">import</span> Vue from <span class="token string">'vue'</span>  Vue.use<span class="token punctuation">(</span>Vuer, <span class="token punctuation">{</span>name: <span class="token string">'vuer'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token function">export</span> default <span class="token punctuation">{</span>    data<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      images: <span class="token punctuation">[</span><span class="token string">'1.jpg'</span>, <span class="token string">'2.jpg'</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>,    methods: <span class="token punctuation">{</span>      show <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        const vuer <span class="token operator">=</span> this.<span class="token variable">$el</span>.querySelector<span class="token punctuation">(</span><span class="token string">'.images'</span><span class="token punctuation">)</span>.<span class="token variable">$vuer</span>        vuer.show<span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token operator">&lt;</span>/script<span class="token operator">></span></code></pre><h3 id="é»˜è®¤é…ç½®é¡¹"><a href="#é»˜è®¤é…ç½®é¡¹" class="headerlink" title="é»˜è®¤é…ç½®é¡¹"></a>é»˜è®¤é…ç½®é¡¹</h3><ul><li><code>Type: Object</code></li><li><code>Default: undefined</code><br>å¦‚æœä½ éœ€è¦ä¿®æ”¹ <code>viewer.js</code> çš„å…¨å±€é»˜è®¤é…ç½®é¡¹ï¼Œå¯ä»¥åƒè¿™æ ·å¼•å…¥ï¼š</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token function">import</span> Viewer from <span class="token string">'v-viewer'</span><span class="token function">import</span> Vue from <span class="token string">'vue'</span>Vue.use<span class="token punctuation">(</span>Viewer, <span class="token punctuation">{</span>  defaultOptions: <span class="token punctuation">{</span>    zIndex: 9999  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>ä½ è¿˜å¯ä»¥åœ¨ä»»ä½•æ—¶å€™åƒè¿™æ ·ä¿®æ”¹å…¨å±€é»˜è®¤é…ç½®é¡¹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">import</span> Viewer from <span class="token string">'v-viewer'</span><span class="token function">import</span> Vue from <span class="token string">'vue'</span>Vue.use<span class="token punctuation">(</span>Viewer<span class="token punctuation">)</span>Viewer.setDefaults<span class="token punctuation">(</span><span class="token punctuation">{</span>  zIndexInline: 2017<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> Vue </category>
          
          <category> å›¾ç‰‡é¢„è§ˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> Vueå›¾ç‰‡é¢„è§ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/05/04/hello-world/"/>
      <url>/2019/05/04/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class=" language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class=" language-bash"><code class="language-bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class=" language-bash"><code class="language-bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class=" language-bash"><code class="language-bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
